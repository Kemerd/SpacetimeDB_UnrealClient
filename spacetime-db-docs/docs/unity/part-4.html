<!DOCTYPE html><html lang="en">
<!-- Mirrored from spacetimedb.com/docs/unity/part-4 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 May 2025 02:58:43 GMT -->
<head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png"/><link rel="manifest" href="../../site.webmanifest"/><link rel="mask-icon" href="../../safari-pinned-tab.svg" color="#202126"/><meta name="msapplication-TileColor" content="#202126"/><meta name="theme-color" content="#202126"/><link href="../../favicon-light.ico" rel="icon" media="(prefers-color-scheme: light)"/><link href="../../favicon.ico" rel="icon" media="(prefers-color-scheme: dark)"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="title" content="SpacetimeDB"/><meta name="description" content="Multiplayer at the speed of light."/><meta property="og:type" content="website"/><meta property="og:url" content="../../index.html"/><meta property="og:title" content="SpacetimeDB"/><meta property="og:description" content="Multiplayer at the speed of light."/><meta property="og:image" content="../../meta-tags.png"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:url" content="../../index.html"/><meta property="twitter:title" content="SpacetimeDB"/><meta property="twitter:description" content="Multiplayer at the speed of light."/><meta property="twitter:image" content="../../meta-tags.png"/><link rel="preload" as="font" href="../../assets/ibm-plex-mono-latin-600-normal-rgB1DpUr.woff2" type="font/woff2" crossorigin="anonymous"/><link rel="preload" as="font" href="../../assets/inter-latin-wght-normal-C2S99t-D.woff2" type="font/woff2" crossorigin="anonymous"/><link rel="preload" as="font" href="../../assets/source-code-pro-latin-wght-normal-C54hYqvT.woff2" type="font/woff2" crossorigin="anonymous"/><title>Docs | SpacetimeDB</title><link rel="stylesheet" href="../../assets/root-DgiNzMOf.css"/><link rel="stylesheet" href="../../assets/Layout-CTL7f1Hd.css"/><link rel="stylesheet" href="../../assets/Container-_6nMI5g_.css"/><link rel="stylesheet" href="../../assets/Button-C8_kLgtz.css"/><link rel="stylesheet" href="../../assets/route-DfbkRanz.css"/><link rel="stylesheet" href="../../assets/ScrollAnimation-HNI5Nioi.css"/><link rel="stylesheet" href="../../assets/route-DPGvI9WQ.css"/><link rel="stylesheet" href="../../assets/MDComponent-CdQtYgZs.css"/></head><body><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div><div id="root"><div><div class="BPQwEa_scrollScapegoat"></div><header class="BPQwEa_header" style="--background:transparent;--color-border:transparent"><div class="sDndEq_announcementBanner text-tagline-1"><div class="wtWGoa_root"><div class="sDndEq_content"><div class="sDndEq_left"><svg class="sDndEq_announcementIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.2413 2H7.7587C6.95374 1.99999 6.28937 1.99998 5.74818 2.04419C5.18608 2.09012 4.66937 2.18868 4.18404 2.43598C3.43139 2.81947 2.81947 3.43139 2.43598 4.18404C2.18868 4.66937 2.09012 5.18608 2.04419 5.74818C1.99998 6.28937 1.99999 6.95372 2 7.75869V13.5343C1.99999 14.2041 1.99999 14.7569 2.03087 15.2095C2.06289 15.6788 2.13142 16.1129 2.30448 16.5307C2.71046 17.5108 3.48916 18.2895 4.46927 18.6955C4.88708 18.8686 5.32118 18.9371 5.79046 18.9691C6.24307 19 6.79594 19 7.46573 19H7.5C8.03656 19 8.14307 19.0063 8.22975 19.0268C8.38085 19.0624 8.52156 19.1328 8.64075 19.2322C8.70913 19.2893 8.77806 19.3708 9.1 19.8L10.5769 21.7692C10.6703 21.8938 10.7758 22.0346 10.8774 22.1476C10.9894 22.2721 11.1756 22.4555 11.4563 22.5647C11.806 22.7007 12.194 22.7007 12.5437 22.5647C12.8244 22.4555 13.0106 22.2721 13.1226 22.1476C13.2242 22.0346 13.3297 21.8938 13.4231 21.7692L14.9 19.8C15.2219 19.3708 15.2909 19.2893 15.3593 19.2322C15.4784 19.1328 15.6192 19.0624 15.7702 19.0268C15.8569 19.0063 15.9634 19 16.5 19H16.5343C17.2041 19 17.7569 19 18.2095 18.9691C18.6788 18.9371 19.1129 18.8686 19.5307 18.6955C20.5108 18.2895 21.2895 17.5108 21.6955 16.5307C21.8686 16.1129 21.9371 15.6788 21.9691 15.2095C22 14.7569 22 14.2041 22 13.5343V7.75868C22 6.95372 22 6.28937 21.9558 5.74818C21.9099 5.18608 21.8113 4.66937 21.564 4.18404C21.1805 3.43139 20.5686 2.81947 19.816 2.43598C19.3306 2.18868 18.8139 2.09012 18.2518 2.04419C17.7106 1.99998 17.0463 1.99999 16.2413 2ZM13 7C13 6.44772 12.5523 6 12 6C11.4477 6 11 6.44772 11 7V10.5C11 11.0523 11.4477 11.5 12 11.5C12.5523 11.5 13 11.0523 13 10.5V7ZM12 13C11.4477 13 11 13.4477 11 14C11 14.5523 11.4477 15 12 15H12.01C12.5623 15 13.01 14.5523 13.01 14C13.01 13.4477 12.5623 13 12.01 13H12Z" fill="#4CF490"></path></svg><p class="md-body-docs">Maincloud is now <b>LIVE</b>! Get Maincloud Energy 90% off until we run out!</p></div><form method="post" action="https://spacetimedb.com/api/announcement-banner"><button aria-label="Close announcement banner"><svg class="dismiss-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM15.7071 8.29289C16.0976 8.68342 16.0976 9.31658 15.7071 9.70711L13.4142 12L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L12 13.4142L9.70711 15.7071C9.31658 16.0976 8.68342 16.0976 8.29289 15.7071C7.90237 15.3166 7.90237 14.6834 8.29289 14.2929L10.5858 12L8.29289 9.70711C7.90237 9.31658 7.90237 8.68342 8.29289 8.29289C8.68342 7.90237 9.31658 7.90237 9.70711 8.29289L12 10.5858L14.2929 8.29289C14.6834 7.90237 15.3166 7.90237 15.7071 8.29289Z" fill="#A4CBB4"></path></svg></button></form></div></div></div><div class="wtWGoa_root"><div class="BPQwEa_inner" style="--padding:24px 0"><a class="BPQwEa_brand BPQwEa_hideMobile" data-discover="true" href="../../home.html"><img src="../../images/brand.png" alt="SpacetimeDB" width="390" height="96"/></a><a class="BPQwEa_logo BPQwEa_hideDesktop" data-discover="true" href="../../home.html"><img src="../../images/logo.png" alt="SpacetimeDB" width="36" height="36"/></a><div class="BPQwEa_versionTag text-value-3"><p>v1.1</p></div><nav class="BPQwEa_nav text-menu BPQwEa_hideMobile"><a data-discover="true" class="" href="../../install.html">Install</a><a data-discover="true" class="" href="../../pricing.html">Pricing</a><a data-discover="true" class="" href="../../maincloud.html">Maincloud</a><a data-discover="true" aria-current="page" class="BPQwEa_active" href="../../docs.html">Docs</a><a data-discover="true" class="" href="../../blog.html">Blog</a><a data-discover="true" class="" href="../../community.html">Community</a></nav><button cy-data="" class="GM6BWG_button GM6BWG_primary BPQwEa_hideMobile BPQwEa_starUsBtn text-menu" aria-label="16K stars" type="button"><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M8.12384 7.08774C7.87849 6.97075 7.59345 6.97075 7.3481 7.08774C7.136 7.18886 7.01906 7.36444 6.96009 7.46077C6.89912 7.56035 6.83654 7.6872 6.77554 7.81084L5.48033 10.4348L2.58314 10.8583C2.44676 10.8782 2.30682 10.8986 2.19332 10.9259C2.08351 10.9523 1.88049 11.0094 1.71892 11.1799C1.53201 11.3772 1.44411 11.6483 1.47969 11.9178C1.51044 12.1507 1.64133 12.316 1.71475 12.4018C1.79064 12.4905 1.89197 12.5892 1.99073 12.6854L4.08627 14.7264L3.59181 17.6093C3.56847 17.7452 3.54452 17.8847 3.53531 18.0011C3.52639 18.1137 3.51777 18.3245 3.62995 18.5311C3.7597 18.7699 3.99034 18.9375 4.25762 18.987C4.4887 19.0299 4.68654 18.9565 4.79087 18.9132C4.89875 18.8684 5.02397 18.8026 5.14603 18.7383L7.73597 17.3763L10.3259 18.7383C10.448 18.8026 10.5732 18.8685 10.6811 18.9132C10.7854 18.9565 10.9832 19.0299 11.2143 18.987C11.4816 18.9375 11.7122 18.7699 11.842 18.5311C11.9542 18.3245 11.9455 18.1137 11.9366 18.0011C11.9274 17.8847 11.9035 17.7453 11.8801 17.6093L11.3857 14.7264L13.4812 12.6853C13.58 12.5892 13.6813 12.4905 13.7572 12.4018C13.8306 12.316 13.9615 12.1507 13.9922 11.9178C14.0278 11.6483 13.9399 11.3772 13.753 11.1799C13.5914 11.0094 13.3884 10.9523 13.2786 10.9259C13.1651 10.8986 13.0252 10.8782 12.8888 10.8583L9.99161 10.4348L8.69642 7.81089C8.63542 7.68724 8.57282 7.56036 8.51185 7.46077C8.45288 7.36444 8.33594 7.18886 8.12384 7.08774Z" fill="currentColor" stroke="rgba(0, 0, 0, 0)" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="10" cy="4" r="2" fill="currentColor"></circle><circle cx="3.5" cy="5.5" r="1.5" fill="currentColor"></circle><circle cx="6" cy="1" r="1" fill="currentColor"></circle></svg>16K stars</button><a class="BPQwEa_hideMobile BPQwEa_loginBtn" data-discover="true" href="https://github.com/login/oauth/authorize?client_id=Iv23liKJqWZxDyNA4Y9G&amp;scope=read%3Auser+user%3Aemail&amp;redirect_uri=https%3A%2F%2Fspacetimedb.com%2Fapi%2Fauth%2Fgithub%2Fcallback&amp;state=01JTSFM2HKQ1NWZFHE4NZNGE5P&amp;allow_signup=true&amp;prompt=select_account">Login</a><button class="BPQwEa_burger" aria-label="Toggle navigation menu"><span></span></button></div></div></header><div class="BPQwEa_modal"><div class="BPQwEa_modalContainer"><nav class="BPQwEa_nav text-menu"><a data-discover="true" class="" href="../../install.html">Install</a><a data-discover="true" class="" href="../../pricing.html">Pricing</a><a data-discover="true" class="" href="../../maincloud.html">Maincloud</a><a data-discover="true" aria-current="page" class="BPQwEa_active" href="../../docs.html">Docs</a><a data-discover="true" class="" href="../../blog.html">Blog</a><a data-discover="true" class="" href="../../community.html">Community</a></nav><div class="BPQwEa_group"><div class="BPQwEa_communitySection"><h4 class="BPQwEa_title text-xs">Community</h4><div class="BPQwEa_socials"><a href="https://github.com/ClockworkLabs/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M10.041 0C4.519 0 0 4.519 0 10.041a10.03 10.03 0 0 0 6.862 9.539c.502.084.669-.251.669-.502v-1.674c-2.761.586-3.347-1.339-3.347-1.339-.418-1.171-1.088-1.506-1.088-1.506-1.004-.586 0-.586 0-.586 1.004.084 1.506 1.004 1.506 1.004.92 1.506 2.343 1.088 2.929.837.084-.669.335-1.088.669-1.339-2.259-.251-4.602-1.088-4.602-4.937a4.04 4.04 0 0 1 1.004-2.678c0-.335-.418-1.339.167-2.678 0 0 .837-.251 2.761 1.004.837-.251 1.674-.335 2.51-.335s1.674.084 2.51.335c1.925-1.339 2.761-1.004 2.761-1.004.586 1.423.167 2.427.084 2.678.669.669 1.004 1.59 1.004 2.678 0 3.849-2.343 4.686-4.602 4.937.335.335.669.92.669 1.841v2.761c0 .251.167.586.669.502a10.03 10.03 0 0 0 6.862-9.539C20.083 4.519 15.564 0 10.041 0z"></path></svg></a><a href="https://discord.gg/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M16.7 0c.27.001.537.054.786.158s.475.256.666.447.341.418.444.668.155.517.155.787h0V20l-2.15-1.9-1.21-1.117-1.28-1.19.53 1.85H3.3c-.27-.001-.537-.054-.786-.158s-.475-.256-.666-.447-.341-.418-.444-.668-.155-.517-.155-.787h0V2.06c-.001-.27.052-.537.155-.787s.253-.476.444-.668.417-.343.666-.447S3.03.001 3.3 0h0 13.4zm-5.05 4.66l-.14.16c.911.242 1.759.675 2.49 1.27a8.15 8.15 0 0 0-3.013-.963 8.46 8.46 0 0 0-2.02.02c-.056.002-.112.009-.167.02a7.51 7.51 0 0 0-2.27.633l-.59.29a6.75 6.75 0 0 1 2.637-1.31h0l-.1-.12c-1.023.051-2.005.417-2.81 1.05a13.39 13.39 0 0 0-1.44 5.833c.345.484.803.876 1.335 1.141s1.121.395 1.715.379l.667-.833a3.11 3.11 0 0 1-1.75-1.18c.357.239.739.437 1.14.59a8.39 8.39 0 0 0 1.467.43c.855.164 1.734.168 2.59.01a6.58 6.58 0 0 0 1.45-.43 5.72 5.72 0 0 0 1.15-.59c-.444.598-1.085 1.019-1.81 1.19l.07.088.142.177.448.545c.595.015 1.185-.115 1.718-.379s.994-.655 1.342-1.138a13.39 13.39 0 0 0-1.44-5.833c-.805-.633-1.787-.999-2.81-1.05h0zm.056 3.727l.134.003c.14.006.277.039.404.098s.241.142.336.245.168.224.216.355.07.271.064.411c0 .224-.068.444-.194.629s-.306.328-.515.41-.438.098-.656.047-.417-.166-.569-.332-.25-.372-.282-.594.004-.449.102-.65.256-.368.451-.479.419-.159.643-.14l-.134-.003zM8.19 8.39c.14.005.278.038.405.097a1.06 1.06 0 0 1 .553.601 1.06 1.06 0 0 1 .062.412l-.001.105c-.006.104-.027.208-.063.306-.048.131-.122.252-.216.355s-.209.187-.336.245-.264.092-.404.098c-.278-.024-.536-.152-.725-.357s-.293-.474-.293-.753.105-.548.293-.753.447-.333.725-.357z"></path></svg></a><a href="https://twitter.com/spacetime_db" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M20 3.833c-.75.333-1.5.583-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1-.75-.833-1.833-1.333-3-1.333A4.09 4.09 0 0 0 9.833 6c0 .333 0 .667.083.917-3.5-.167-6.5-1.833-8.5-4.333a3.76 3.76 0 0 0-.583 2.083c0 1.417.75 2.667 1.833 3.417-.667 0-1.333-.167-1.833-.5v.083c0 2 1.417 3.667 3.25 4-.333.083-.667.167-1.083.167-.25 0-.5 0-.75-.083a3.95 3.95 0 0 0 3.833 2.833c-1.417 1.083-3.167 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.667v-.5c.833-.583 1.5-1.333 2.083-2.083z"></path></svg></a><a href="https://www.twitch.tv/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M3.55263 0L0 3.57143V16.4286H4.26316V20L7.81579 16.4286H10.6579L17.0526 10V0H3.55263ZM15.6316 9.28571L12.7895 12.1429H9.94737L7.46053 14.6429V12.1429H4.26316V1.42857H15.6316V9.28571Z M13.5 3.92857H12.0789V8.21429H13.5V3.92857Z M9.59211 3.92857H8.17105V8.21429H9.59211V3.92857Z"></path></svg></a><a href="https://www.youtube.com/@SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M19.833 6S19.667 4.583 19 4c-.75-.833-1.583-.833-2-.833L10 3l-7 .167C2.583 3.25 1.75 3.25 1 4c-.583.583-.833 2-.833 2S0 7.583 0 9.25v1.5C0 12.333.167 14 .167 14s.167 1.417.833 2c.75.833 1.75.75 2.167.833C4.75 17 10 17 10 17l7-.25c.417-.083 1.25-.083 2-.833.583-.583.833-2 .833-2s.167-1.583.167-3.25v-1.5C20 7.583 19.833 6 19.833 6zM7.917 12.583V7l5.417 2.833-5.417 2.75z"></path></svg></a></div></div><div class="BPQwEa_buttons"><button cy-data="" class="GM6BWG_button GM6BWG_primary BPQwEa_starUsBtn BPQwEa_starUsBtnMobile text-menu" aria-label="16K stars" type="button"><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M8.12384 7.08774C7.87849 6.97075 7.59345 6.97075 7.3481 7.08774C7.136 7.18886 7.01906 7.36444 6.96009 7.46077C6.89912 7.56035 6.83654 7.6872 6.77554 7.81084L5.48033 10.4348L2.58314 10.8583C2.44676 10.8782 2.30682 10.8986 2.19332 10.9259C2.08351 10.9523 1.88049 11.0094 1.71892 11.1799C1.53201 11.3772 1.44411 11.6483 1.47969 11.9178C1.51044 12.1507 1.64133 12.316 1.71475 12.4018C1.79064 12.4905 1.89197 12.5892 1.99073 12.6854L4.08627 14.7264L3.59181 17.6093C3.56847 17.7452 3.54452 17.8847 3.53531 18.0011C3.52639 18.1137 3.51777 18.3245 3.62995 18.5311C3.7597 18.7699 3.99034 18.9375 4.25762 18.987C4.4887 19.0299 4.68654 18.9565 4.79087 18.9132C4.89875 18.8684 5.02397 18.8026 5.14603 18.7383L7.73597 17.3763L10.3259 18.7383C10.448 18.8026 10.5732 18.8685 10.6811 18.9132C10.7854 18.9565 10.9832 19.0299 11.2143 18.987C11.4816 18.9375 11.7122 18.7699 11.842 18.5311C11.9542 18.3245 11.9455 18.1137 11.9366 18.0011C11.9274 17.8847 11.9035 17.7453 11.8801 17.6093L11.3857 14.7264L13.4812 12.6853C13.58 12.5892 13.6813 12.4905 13.7572 12.4018C13.8306 12.316 13.9615 12.1507 13.9922 11.9178C14.0278 11.6483 13.9399 11.3772 13.753 11.1799C13.5914 11.0094 13.3884 10.9523 13.2786 10.9259C13.1651 10.8986 13.0252 10.8782 12.8888 10.8583L9.99161 10.4348L8.69642 7.81089C8.63542 7.68724 8.57282 7.56036 8.51185 7.46077C8.45288 7.36444 8.33594 7.18886 8.12384 7.08774Z" fill="currentColor" stroke="rgba(0, 0, 0, 0)" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="10" cy="4" r="2" fill="currentColor"></circle><circle cx="3.5" cy="5.5" r="1.5" fill="currentColor"></circle><circle cx="6" cy="1" r="1" fill="currentColor"></circle></svg>16K stars</button></div><div class="BPQwEa_buttons"><a cy-data="" aria-label="try the demo" class="GM6BWG_button GM6BWG_secondary text-menu" type="button" data-discover="true" href="part-4.html#demo" target=""><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M10.108 1.55c4.611 0 8.35 3.741 8.35 8.35h0v.208a8.36 8.36 0 0 1-8.35 8.35h0H9.9c-4.611 0-8.35-3.741-8.35-8.35h0V9.9c0-4.611 3.741-8.35 8.35-8.35h0zm0 1.5H9.9c-3.78 0-6.85 3.067-6.85 6.85h0v.208c0 3.78 3.067 6.85 6.85 6.85h0 .208a6.86 6.86 0 0 0 6.85-6.85h0V9.9c0-3.78-3.067-6.85-6.85-6.85h0zm.864 4.29l.084.073 2.048 2.056h0a.75.75 0 0 1 .108.136.74.74 0 0 1 .03.052c.006.012.012.024.017.036.011.024.02.048.028.072a.76.76 0 0 1 .009.031.75.75 0 0 1 .018.08.76.76 0 0 1 .005.034.75.75 0 0 1 .005.069c0 .016 0 .033 0 .049-.001.022-.003.043-.005.065-.002.015-.004.03-.007.045-.005.026-.011.051-.018.077a.73.73 0 0 1-.009.028.75.75 0 0 1-.033.082c-.003.007-.007.014-.01.021-.02.04-.045.078-.073.115l-.062.07-2.05 2.058a.75.75 0 0 1-1.135-.974l.072-.084.775-.779H7.425a.75.75 0 0 1-.102-1.493l.102-.007h3.345l-.776-.779a.75.75 0 0 1 .979-1.131z"></path></svg>try the demo</a><a cy-data="" aria-label="install" class="GM6BWG_button GM6BWG_primary text-menu" type="button" data-discover="true" href="../../install.html" target=""><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M15.333 6.25c1.703 0 3.069 1.339 3.162 3.064l.005.186v5.75c0 1.752-1.307 3.151-2.985 3.245l-.181.005H4.583c-1.703 0-3.07-1.339-3.162-3.064l-.005-.186V9.5c0-1.814 1.403-3.25 3.167-3.25a.75.75 0 1 1 0 1.5c-.879 0-1.588.679-1.661 1.595l-.006.155v5.75c0 .941.663 1.67 1.522 1.744l.145.006h10.75c.879 0 1.588-.679 1.661-1.595L17 15.25V9.5c0-.993-.739-1.75-1.667-1.75a.75.75 0 1 1 0-1.5zM9.377 9.854L7.044 7.438a.75.75 0 0 1 .996-1.116l.083.074 1.043 1.081v-5.06a.75.75 0 0 1 1.493-.102l.007.102v5.105l1.136-1.135a.75.75 0 0 1 1.133.977l-.073.084-2.417 2.417h0l-.009.009h0l-.025.023-.045.037-.005.004-.013.007-.007.007-.063.039-.022.012-.037.018-.024.01-.022.008-.023.008-.031.009-.047.011-.027.005-.052.007-.047.003h-.029l-.038-.001-.04-.003-.024-.003h0l-.014-.002-.028-.005-.04-.009-.038-.011-.026-.009-.031-.011-.049-.022-.038-.02a.72.72 0 0 1-.061-.038l-.024-.017c-.028-.021-.054-.044-.079-.069l-.009-.009z"></path></svg>install</a></div><div class="BPQwEa_background"><img src="../../images/space-time-astrolabe.jpg" alt="Astrolabe" loading="lazy" width="1616" height="2444"/></div></div></div></div><div class="wtWGoa_root" style="padding-top:144px"><div class="_1ZGmjW_root _1ZGmjW_visible FTy4tq_layoutContainer"><nav class="_7MaBSq_sidebar"><a class="_7MaBSq_pageTitle" data-discover="true" href="../ai-chat.html">Ask AI Chat</a><p class="_7MaBSq_sectionTitle">Intro</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../../docs.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../getting-started.html">Getting Started</a><p class="_7MaBSq_sectionTitle">Deploying</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../deploying/maincloud.html">Maincloud</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../deploying/spacetimedb-standalone.html">Self-Hosting SpacetimeDB</a><p class="_7MaBSq_sectionTitle">Unity Tutorial - Basic Multiplayer</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../unity.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="part-1.html">1 - Setup</a><a class="_7MaBSq_pageTitle" data-discover="true" href="part-2.html">2 - Connecting to SpacetimeDB</a><a class="_7MaBSq_pageTitle" data-discover="true" href="part-3.html">3 - Gameplay</a><a class="_7MaBSq_pageTitle _7MaBSq_active" data-discover="true" href="part-4.html">4 - Moving and Colliding</a><p class="_7MaBSq_sectionTitle">CLI Reference</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../cli-reference.html">CLI Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../cli-reference/standalone-config.html">SpacetimeDB Standalone Configuration</a><p class="_7MaBSq_sectionTitle">Server Module Languages</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../modules.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../modules/rust/quickstart.html">Rust Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../modules/rust.html">Rust Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../modules/c-sharp/quickstart.html">C# Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../modules/c-sharp.html">C# Reference</a><p class="_7MaBSq_sectionTitle">Client SDK Languages</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks/c-sharp/quickstart.html">C# Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks/c-sharp.html">C# Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks/rust/quickstart.html">Rust Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks/rust.html">Rust Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks/typescript/quickstart.html">TypeScript Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sdks/typescript.html">TypeScript Reference</a><p class="_7MaBSq_sectionTitle">SQL</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../sql.html">SQL Reference</a><p class="_7MaBSq_sectionTitle">Subscriptions</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../subscriptions.html">Subscription Reference</a><p class="_7MaBSq_sectionTitle">Row Level Security</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../rls.html">Row Level Security</a><p class="_7MaBSq_sectionTitle">How To</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../how-to/incremental-migrations.html">Incremental Migrations</a><p class="_7MaBSq_sectionTitle">HTTP API</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../http/authorization.html">Authorization</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../http/identity.html">`/identity`</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../http/database.html">`/database`</a><p class="_7MaBSq_sectionTitle">Internals</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../webassembly-abi.html">Module ABI Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../sats-json.html">SATS-JSON Data Format</a><a class="_7MaBSq_pageTitle" data-discover="true" href="../bsatn.html">BSATN Data Format</a><p class="_7MaBSq_sectionTitle">Appendix</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../appendix.html">Appendix</a></nav><div class="WT-eTq_content"><div><article class="sc30Jq_mdc md-body-docs line-break"><h2 id="unity-tutorial---part-4---moving-and-colliding">Unity Tutorial - Part 4 - Moving and Colliding<a href="#unity-tutorial---part-4---moving-and-colliding" class="permalink"><span class="visually-hidden"></span></a></h2><p>Need help with the tutorial? <a href="https://discord.gg/spacetimedb">Join our Discord server</a>!</p>
<p>This progressive tutorial is continued from <a href="part-3.html">part 3</a>.</p>
<h4 id="moving-the-player">Moving the player<a href="#moving-the-player" class="permalink"><span class="visually-hidden"></span></a></h4><p>At this point, we&#39;re very close to having a working game. All we have to do is modify our server to allow the player to move around, and to simulate the physics and collisions of the game.</p>

        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                <p>Let&#39;s start by building out a simple math library to help us do collision calculations. Create a new <code>math.rs</code> file in the <code>server-rust/src</code> directory and add the following contents. Let&#39;s also move the <code>DbVector2</code> type from <code>lib.rs</code> into this file.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> spacetimedb</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SpacetimeType</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// This allows us to store 2D points in tables.</span></span>
<span class="line"><span style="color:#F8F8F2">#[derive(</span><span style="color:#8BE9FD;font-style:italic">SpacetimeType</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Debug</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Clone</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Copy</span><span style="color:#F8F8F2">)]</span></span>
<span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> struct</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> x</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> y</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Add</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">&#x26;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Output</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> add</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, other</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">            x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x,</span></span>
<span class="line"><span style="color:#F8F8F2">            y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y,</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Add</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Output</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> add</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, other</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">            x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x,</span></span>
<span class="line"><span style="color:#F8F8F2">            y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y,</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">AddAssign</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> add_assign</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;mut</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#F8F8F2">, rhs</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> rhs</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x;</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> rhs</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">iter</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Sum</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> sum</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">I</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Iterator</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">Item</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">>>(iter</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> I</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#FF79C6"> mut</span><span style="color:#F8F8F2"> r </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">new</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0.0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0.0</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">        for</span><span style="color:#F8F8F2"> val </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> iter {</span></span>
<span class="line"><span style="color:#F8F8F2">            r </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> val;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        r</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Sub</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">&#x26;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Output</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> sub</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, other</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">            x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x,</span></span>
<span class="line"><span style="color:#F8F8F2">            y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y,</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Sub</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Output</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> sub</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, other</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">            x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x,</span></span>
<span class="line"><span style="color:#F8F8F2">            y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> other</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y,</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SubAssign</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> sub_assign</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;mut</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#F8F8F2">, rhs</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">-=</span><span style="color:#F8F8F2"> rhs</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x;</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">-=</span><span style="color:#F8F8F2"> rhs</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Mul</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">f32</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Output</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> mul</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, other</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">            x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> other,</span></span>
<span class="line"><span style="color:#F8F8F2">            y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> other,</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ops</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Div</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">f32</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">for</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Output</span><span style="color:#FF79C6"> =</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> div</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, other</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> other </span><span style="color:#FF79C6">!=</span><span style="color:#BD93F9"> 0.0</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">                x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> other,</span></span>
<span class="line"><span style="color:#F8F8F2">                y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> other,</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        } </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            DbVector2</span><span style="color:#F8F8F2"> { x</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.0</span><span style="color:#F8F8F2">, y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.0</span><span style="color:#F8F8F2"> }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> new</span><span style="color:#F8F8F2">(x</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">, y</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        Self</span><span style="color:#F8F8F2"> { x, y }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> sqr_magnitude</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">*</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">+</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">*</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> magnitude</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        (</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">*</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">+</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">*</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y)</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">sqrt</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> normalized</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">magnitude</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>At the very top of <code>lib.rs</code> add the following lines to import the moved <code>DbVector2</code> from the <code>math</code> module.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> mod</span><span style="color:#F8F8F2"> math;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> math</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#6272A4">// ...</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Next, add the following reducer to your <code>lib.rs</code> file.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">#[spacetimedb</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">reducer]</span></span>
<span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> update_player_input</span><span style="color:#F8F8F2">(ctx</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">ReducerContext</span><span style="color:#F8F8F2">, direction</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&#x3C;(), </span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#F8F8F2">> {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> player </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#F8F8F2">db</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">player</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">identity</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">sender)</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">ok_or</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">"Player not found"</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#FF79C6"> mut</span><span style="color:#F8F8F2"> circle </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">circle</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">player_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">filter</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">player</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">player_id) {</span></span>
<span class="line"><span style="color:#F8F8F2">        circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> direction</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">normalized</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">        circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">speed </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> direction</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">magnitude</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">clamp</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0.0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">1.0</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">        ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">circle</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">update</span><span style="color:#F8F8F2">(circle);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">    Ok</span><span style="color:#F8F8F2">(())</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>This is a simple reducer that takes the movement input from the client and applies them to all circles that that player controls. Note that it is not possible for a player to move another player&#39;s circles using this reducer, because the <code>ctx.sender</code> value is not set by the client. Instead <code>ctx.sender</code> is set by SpacetimeDB after it has authenticated that sender. You can rest assured that the caller has been authenticated as that player by the time this reducer is called.</p>

            </div>
            <div class="lang-block" data-lang="C#">
                <p>Let&#39;s start by building out a simple math library to help us do collision calculations. Create a new <code>Math.cs</code> file in the <code>csharp-server</code> directory and add the following contents. Let&#39;s also remove the <code>DbVector2</code> type from <code>Lib.cs</code>.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">SpacetimeDB</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD;font-style:italic">Type</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> partial</span><span style="color:#FF79C6"> struct</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> float</span><span style="color:#F8F8F2"> x;</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> float</span><span style="color:#F8F8F2"> y;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#50FA7B"> DbVector2</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">float</span><span style="color:#FFB86C;font-style:italic"> x</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">float</span><span style="color:#FFB86C;font-style:italic"> y</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        this</span><span style="color:#F8F8F2">.x </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> x;</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        this</span><span style="color:#F8F8F2">.y </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> y;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> float</span><span style="color:#F8F8F2"> SqrMagnitude </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> x </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> x </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> y </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> y;</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> float</span><span style="color:#F8F8F2"> Magnitude </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> MathF.</span><span style="color:#50FA7B">Sqrt</span><span style="color:#F8F8F2">(SqrMagnitude);</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2"> Normalized </span><span style="color:#FF79C6">=></span><span style="color:#BD93F9;font-style:italic"> this</span><span style="color:#FF79C6"> /</span><span style="color:#F8F8F2"> Magnitude;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> static</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#FF79C6"> operator</span><span style="color:#50FA7B"> +</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> a</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">(a.x </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> b.x, a.y </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> b.y);</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> static</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#FF79C6"> operator</span><span style="color:#50FA7B"> -</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> a</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">(a.x </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> b.x, a.y </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> b.y);</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> static</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#FF79C6"> operator</span><span style="color:#50FA7B"> *</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> a</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">float</span><span style="color:#FFB86C;font-style:italic"> b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">(a.x </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> b, a.y </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> b);</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> static</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#FF79C6"> operator</span><span style="color:#50FA7B"> /</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> a</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">float</span><span style="color:#FFB86C;font-style:italic"> b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> DbVector2</span><span style="color:#F8F8F2">(a.x </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> b, a.y </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> b);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Next, add the following reducer to the <code>Module</code> class of your <code>Lib.cs</code> file.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> UpdatePlayerInput</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">ReducerContext</span><span style="color:#FFB86C;font-style:italic"> ctx</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">DbVector2</span><span style="color:#FFB86C;font-style:italic"> direction</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> player </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx.Db.player.identity.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(ctx.Sender) </span><span style="color:#FF79C6">??</span><span style="color:#FF79C6"> throw</span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> Exception</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">Player not found</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">);				</span></span>
<span class="line"><span style="color:#FF79C6">    foreach</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> c </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx.Db.circle.player_id.</span><span style="color:#50FA7B">Filter</span><span style="color:#F8F8F2">(player.player_id))</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> circle </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> c;</span></span>
<span class="line"><span style="color:#F8F8F2">        circle.direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> direction.Normalized;</span></span>
<span class="line"><span style="color:#F8F8F2">        circle.speed </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#50FA7B">Clamp</span><span style="color:#F8F8F2">(direction.Magnitude, </span><span style="color:#BD93F9">0f</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">1f</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">        ctx.Db.circle.entity_id.</span><span style="color:#50FA7B">Update</span><span style="color:#F8F8F2">(circle);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>This is a simple reducer that takes the movement input from the client and applies them to all circles that that player controls. Note that it is not possible for a player to move another player&#39;s circles using this reducer, because the <code>ctx.Sender</code> value is not set by the client. Instead <code>ctx.Sender</code> is set by SpacetimeDB after it has authenticated that sender. You can rest assured that the caller has been authenticated as that player by the time this reducer is called.</p>

            </div>
        </div>
        <p>Finally, let&#39;s schedule a reducer to run every 50 milliseconds to move the player&#39;s circles around based on the most recently set player input.</p>

        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">#[spacetimedb</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">table(name </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> move_all_players_timer, scheduled(move_all_players))]</span></span>
<span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> struct</span><span style="color:#8BE9FD;font-style:italic"> MoveAllPlayersTimer</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    #[primary_key]</span></span>
<span class="line"><span style="color:#F8F8F2">    #[auto_inc]</span></span>
<span class="line"><span style="color:#F8F8F2">    scheduled_id</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> u64</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    scheduled_at</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> spacetimedb</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ScheduleAt</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#BD93F9"> START_PLAYER_SPEED</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> u32</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> 10</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">fn</span><span style="color:#50FA7B"> mass_to_max_move_speed</span><span style="color:#F8F8F2">(mass</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> u32</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#BD93F9">    2.0</span><span style="color:#FF79C6"> *</span><span style="color:#BD93F9"> START_PLAYER_SPEED</span><span style="color:#FF79C6"> as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6"> /</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">1.0</span><span style="color:#FF79C6"> +</span><span style="color:#F8F8F2"> (mass </span><span style="color:#FF79C6">as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> START_PLAYER_MASS</span><span style="color:#FF79C6"> as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">sqrt</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">#[spacetimedb</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">reducer]</span></span>
<span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> move_all_players</span><span style="color:#F8F8F2">(ctx</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">ReducerContext</span><span style="color:#F8F8F2">, _timer</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> MoveAllPlayersTimer</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&#x3C;(), </span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#F8F8F2">> {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> world_size </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#F8F8F2">db</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">config</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">id</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">ok_or</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">"Config not found"</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">?</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#F8F8F2">world_size;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Handle player input</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#F8F8F2"> circle </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">circle</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">iter</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> circle_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#FF79C6"> !</span><span style="color:#F8F8F2">circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">is_some</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#6272A4">            // This can happen if a circle is eaten by another circle</span></span>
<span class="line"><span style="color:#FF79C6">            continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#FF79C6"> mut</span><span style="color:#F8F8F2"> circle_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">unwrap</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> circle_radius </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> mass_to_radius</span><span style="color:#F8F8F2">(circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass);</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">direction </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">speed;</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> new_pos </span><span style="color:#FF79C6">=</span></span>
<span class="line"><span style="color:#F8F8F2">            circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">*</span><span style="color:#50FA7B"> mass_to_max_move_speed</span><span style="color:#F8F8F2">(circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass);</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> min </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_radius;</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> max </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> world_size </span><span style="color:#FF79C6">as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6"> -</span><span style="color:#F8F8F2"> circle_radius;</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> new_pos</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">clamp</span><span style="color:#F8F8F2">(min, max);</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> new_pos</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">clamp</span><span style="color:#F8F8F2">(min, max);</span></span>
<span class="line"><span style="color:#F8F8F2">        ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">update</span><span style="color:#F8F8F2">(circle_entity);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">    Ok</span><span style="color:#F8F8F2">(())</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">Table</span><span style="color:#F8F8F2">(Name </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">move_all_players_timer</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, Scheduled </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> nameof</span><span style="color:#F8F8F2">(MoveAllPlayers), ScheduledAt </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> nameof</span><span style="color:#F8F8F2">(scheduled_at))]</span></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> partial</span><span style="color:#FF79C6"> struct</span><span style="color:#8BE9FD;font-style:italic"> MoveAllPlayersTimer</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">    [</span><span style="color:#8BE9FD;font-style:italic">PrimaryKey</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">AutoInc</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> ulong</span><span style="color:#F8F8F2"> scheduled_id;</span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#8BE9FD;font-style:italic"> ScheduleAt</span><span style="color:#F8F8F2"> scheduled_at;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#FF79C6"> uint</span><span style="color:#F8F8F2"> START_PLAYER_SPEED </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 10</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> float</span><span style="color:#50FA7B"> MassToMaxMoveSpeed</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">uint</span><span style="color:#FFB86C;font-style:italic"> mass</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#BD93F9"> 2f</span><span style="color:#FF79C6"> *</span><span style="color:#F8F8F2"> START_PLAYER_SPEED </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">1f</span><span style="color:#FF79C6"> +</span><span style="color:#F8F8F2"> MathF.</span><span style="color:#50FA7B">Sqrt</span><span style="color:#F8F8F2">((</span><span style="color:#FF79C6">float</span><span style="color:#F8F8F2">)mass </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> START_PLAYER_MASS));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> MoveAllPlayers</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">ReducerContext</span><span style="color:#FFB86C;font-style:italic"> ctx</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">MoveAllPlayersTimer</span><span style="color:#FFB86C;font-style:italic"> timer</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> world_size </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (ctx.Db.config.id.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">??</span><span style="color:#FF79C6"> throw</span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> Exception</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">Config not found</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">)).world_size;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> circle_directions </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx.Db.circle.</span><span style="color:#50FA7B">Iter</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">Select</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">c</span><span style="color:#FF79C6"> =></span><span style="color:#F8F8F2"> (c.entity_id, c.direction </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> c.speed)).</span><span style="color:#50FA7B">ToDictionary</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Handle player input</span></span>
<span class="line"><span style="color:#FF79C6">    foreach</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> circle </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx.Db.circle.</span><span style="color:#50FA7B">Iter</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> check_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx.Db.entity.entity_id.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(circle.entity_id);</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (check_entity </span><span style="color:#FF79C6">==</span><span style="color:#BD93F9"> null</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#6272A4">            // This can happen if the circle has been eaten by another circle.</span></span>
<span class="line"><span style="color:#FF79C6">            continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> circle_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> check_entity.Value;</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> circle_radius </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> MassToRadius</span><span style="color:#F8F8F2">(circle_entity.mass);</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_directions[circle.entity_id];</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> new_pos </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_entity.position </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">*</span><span style="color:#50FA7B"> MassToMaxMoveSpeed</span><span style="color:#F8F8F2">(circle_entity.mass);</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity.position.x </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#50FA7B">Clamp</span><span style="color:#F8F8F2">(new_pos.x, circle_radius, world_size </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> circle_radius);</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity.position.y </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#50FA7B">Clamp</span><span style="color:#F8F8F2">(new_pos.y, circle_radius, world_size </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> circle_radius);</span></span>
<span class="line"><span style="color:#F8F8F2">        ctx.Db.entity.entity_id.</span><span style="color:#50FA7B">Update</span><span style="color:#F8F8F2">(circle_entity);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <p>This reducer is very similar to a standard game &quot;tick&quot; or &quot;frame&quot; that you might find in an ordinary game server or similar to something like the <code>Update</code> loop in a game engine like Unity. We&#39;ve scheduled it every 50 milliseconds and we can use it to step forward our simulation by moving all the circles a little bit further in the direction they&#39;re moving.</p>
<p>In this reducer, we&#39;re just looping through all the circles in the game and updating their position based on their direction, speed, and mass. Just basic physics.</p>

        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                <p>Add the following to your <code>init</code> reducer to schedule the <code>move_all_players</code> reducer to run every 50 milliseconds.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">move_all_players_timer</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">try_insert</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">MoveAllPlayersTimer</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        scheduled_id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        scheduled_at</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> ScheduleAt</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">Interval</span><span style="color:#F8F8F2">(Duration</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">from_millis</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">50</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">into</span><span style="color:#F8F8F2">()),</span></span>
<span class="line"><span style="color:#F8F8F2">    })</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2">;</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                <p>Add the following to your <code>Init</code> reducer to schedule the <code>MoveAllPlayers</code> reducer to run every 50 milliseconds.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">ctx.Db.move_all_players_timer.</span><span style="color:#50FA7B">Insert</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#8BE9FD;font-style:italic"> MoveAllPlayersTimer</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">    scheduled_at </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> ScheduleAt</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD;font-style:italic">Interval</span><span style="color:#F8F8F2">(TimeSpan.</span><span style="color:#50FA7B">FromMilliseconds</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">50</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">});</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <p>Republish your module with:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> publish</span><span style="color:#BD93F9"> --server</span><span style="color:#F1FA8C"> local</span><span style="color:#F1FA8C"> blackholio</span><span style="color:#BD93F9"> --delete-data</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Regenerate your server bindings with:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> generate</span><span style="color:#BD93F9"> --lang</span><span style="color:#F1FA8C"> csharp</span><span style="color:#BD93F9"> --out-dir</span><span style="color:#F1FA8C"> ../client-unity/Assets/autogen</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><h4 id="moving-on-the-client">Moving on the Client<a href="#moving-on-the-client" class="permalink"><span class="visually-hidden"></span></a></h4><p>All that&#39;s left is to modify our <code>PlayerController</code> on the client to call the <code>update_player_input</code> reducer. Open <code>PlayerController.cs</code> and add an <code>Update</code> function:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> Update</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">IsLocalPlayer </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> NumberOfOwnedCircles </span><span style="color:#FF79C6">==</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (Input.</span><span style="color:#50FA7B">GetKeyDown</span><span style="color:#F8F8F2">(KeyCode.Q))</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (LockInputPosition.HasValue)</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#F8F8F2">            LockInputPosition </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> null</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        else</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#F8F8F2">            LockInputPosition </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (</span><span style="color:#8BE9FD;font-style:italic">Vector2</span><span style="color:#F8F8F2">)Input.mousePosition;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Throttled input requests</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (Time.time </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> LastMovementSendTimestamp </span><span style="color:#FF79C6">>=</span><span style="color:#F8F8F2"> SEND_UPDATES_FREQUENCY)</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#F8F8F2">        LastMovementSendTimestamp </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Time.time;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> mousePosition </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> LockInputPosition </span><span style="color:#FF79C6">??</span><span style="color:#F8F8F2"> (</span><span style="color:#8BE9FD;font-style:italic">Vector2</span><span style="color:#F8F8F2">)Input.mousePosition;</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> screenSize </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> Vector2</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#F8F8F2">            x </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Screen.width,</span></span>
<span class="line"><span style="color:#F8F8F2">            y </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Screen.height,</span></span>
<span class="line"><span style="color:#F8F8F2">        };</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> centerOfScreen </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> screenSize </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (mousePosition </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> centerOfScreen) </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> (screenSize.y </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (testInputEnabled) { direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> testInput; }</span></span>
<span class="line"><span style="color:#F8F8F2">        GameManager.Conn.Reducers.</span><span style="color:#50FA7B">UpdatePlayerInput</span><span style="color:#F8F8F2">(direction);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Let&#39;s try it out! Press play and roam freely around the arena! Now we&#39;re cooking with gas.</p>
<h4 id="collisions-and-eating-food">Collisions and Eating Food<a href="#collisions-and-eating-food" class="permalink"><span class="visually-hidden"></span></a></h4><p>Well this is pretty fun, but wouldn&#39;t it be better if we could eat food and grow our circle? Surely, that&#39;s going to be a pain, right?</p>

        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                <p>Wrong. With SpacetimeDB it&#39;s extremely easy. All we have to do is add an <code>is_overlapping</code> helper function which does some basic math based on mass radii, and modify our <code>move_all_player</code> reducer to loop through every entity in the arena for every circle, checking each for overlaps. This may not be the most efficient way to do collision checking (building a quad tree or doing <a href="https://conkerjo.wordpress.com/2009/06/13/spatial-hashing-implementation-for-fast-2d-collisions/">spatial hashing</a> might be better), but SpacetimeDB is very fast so for this number of entities it&#39;ll be a breeze for SpacetimeDB.</p>
<p>Sometimes simple is best! Add the following code to your <code>lib.rs</code> file and make sure to replace the existing <code>move_all_players</code> reducer.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#BD93F9"> MINIMUM_SAFE_MASS_RATIO</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> 0.85</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">fn</span><span style="color:#50FA7B"> is_overlapping</span><span style="color:#F8F8F2">(a</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">Entity</span><span style="color:#F8F8F2">, b</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">Entity</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> bool</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> dx </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> a</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> b</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x;</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> dy </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> a</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> b</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y;</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> distance_sq </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> dx </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> dx </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> dy </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> dy;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> radius_a </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> mass_to_radius</span><span style="color:#F8F8F2">(a</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass);</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> radius_b </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> mass_to_radius</span><span style="color:#F8F8F2">(b</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // If the distance between the two circle centers is less than the </span></span>
<span class="line"><span style="color:#6272A4">    // maximum radius, then the center of the smaller circle is inside</span></span>
<span class="line"><span style="color:#6272A4">    // the larger circle. This gives some leeway for the circles to overlap</span></span>
<span class="line"><span style="color:#6272A4">    // before being eaten.</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> max_radius </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">max</span><span style="color:#F8F8F2">(radius_a, radius_b);</span></span>
<span class="line"><span style="color:#F8F8F2">    distance_sq </span><span style="color:#FF79C6">&#x3C;=</span><span style="color:#F8F8F2"> max_radius </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> max_radius</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">#[spacetimedb</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">reducer]</span></span>
<span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> move_all_players</span><span style="color:#F8F8F2">(ctx</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &#x26;</span><span style="color:#8BE9FD;font-style:italic">ReducerContext</span><span style="color:#F8F8F2">, _timer</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> MoveAllPlayersTimer</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&#x3C;(), </span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#F8F8F2">> {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> world_size </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#F8F8F2">db</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">config</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">id</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">ok_or</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">"Config not found"</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">?</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#F8F8F2">world_size;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Handle player input</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#F8F8F2"> circle </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">circle</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">iter</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> circle_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#FF79C6"> !</span><span style="color:#F8F8F2">circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">is_some</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#6272A4">            // This can happen if a circle is eaten by another circle</span></span>
<span class="line"><span style="color:#FF79C6">            continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#FF79C6"> mut</span><span style="color:#F8F8F2"> circle_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">unwrap</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> circle_radius </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> mass_to_radius</span><span style="color:#F8F8F2">(circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass);</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">direction </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">speed;</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> new_pos </span><span style="color:#FF79C6">=</span></span>
<span class="line"><span style="color:#F8F8F2">            circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">*</span><span style="color:#50FA7B"> mass_to_max_move_speed</span><span style="color:#F8F8F2">(circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass);</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> min </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_radius;</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> max </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> world_size </span><span style="color:#FF79C6">as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6"> -</span><span style="color:#F8F8F2"> circle_radius;</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> new_pos</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">x</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">clamp</span><span style="color:#F8F8F2">(min, max);</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> new_pos</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">y</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">clamp</span><span style="color:#F8F8F2">(min, max);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">        // Check collisions</span></span>
<span class="line"><span style="color:#FF79C6">        for</span><span style="color:#F8F8F2"> entity </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">iter</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#F8F8F2"> entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id {</span></span>
<span class="line"><span style="color:#FF79C6">                continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#50FA7B"> is_overlapping</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">circle_entity, </span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity) {</span></span>
<span class="line"><span style="color:#6272A4">                // Check to see if we're overlapping with food</span></span>
<span class="line"><span style="color:#FF79C6">                if</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">food</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id)</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">is_some</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">                    ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">delete</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                    ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">food</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">delete</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                    circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass;</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">                // Check to see if we're overlapping with another circle owned by another player</span></span>
<span class="line"><span style="color:#FF79C6">                let</span><span style="color:#F8F8F2"> other_circle </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">circle</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#FF79C6">                if</span><span style="color:#FF79C6"> let</span><span style="color:#8BE9FD;font-style:italic"> Some</span><span style="color:#F8F8F2">(other_circle) </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> other_circle {</span></span>
<span class="line"><span style="color:#FF79C6">                    if</span><span style="color:#F8F8F2"> other_circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">player_id </span><span style="color:#FF79C6">!=</span><span style="color:#F8F8F2"> circle</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">player_id {</span></span>
<span class="line"><span style="color:#FF79C6">                        let</span><span style="color:#F8F8F2"> mass_ratio </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass </span><span style="color:#FF79C6">as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#FF79C6"> /</span><span style="color:#F8F8F2"> circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass </span><span style="color:#FF79C6">as</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">                        if</span><span style="color:#F8F8F2"> mass_ratio </span><span style="color:#FF79C6">&#x3C;</span><span style="color:#BD93F9"> MINIMUM_SAFE_MASS_RATIO</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">                            ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">delete</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                            ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">circle</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">delete</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                            circle_entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> entity</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">mass;</span></span>
<span class="line"><span style="color:#F8F8F2">                        }</span></span>
<span class="line"><span style="color:#F8F8F2">                    }</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">db</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">entity_id</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">update</span><span style="color:#F8F8F2">(circle_entity);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">    Ok</span><span style="color:#F8F8F2">(())</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                <p>Wrong. With SpacetimeDB it&#39;s extremely easy. All we have to do is add an <code>IsOverlapping</code> helper function which does some basic math based on mass radii, and modify our <code>MoveAllPlayers</code> reducer to loop through every entity in the arena for every circle, checking each for overlaps. This may not be the most efficient way to do collision checking (building a quad tree or doing <a href="https://conkerjo.wordpress.com/2009/06/13/spatial-hashing-implementation-for-fast-2d-collisions/">spatial hashing</a> might be better), but SpacetimeDB is very fast so for this number of entities it&#39;ll be a breeze for SpacetimeDB.</p>
<p>Sometimes simple is best! Add the following code to the <code>Module</code> class of your <code>Lib.cs</code> file and make sure to replace the existing <code>MoveAllPlayers</code> reducer.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#FF79C6"> float</span><span style="color:#F8F8F2"> MINIMUM_SAFE_MASS_RATIO </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 0.85f</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> bool</span><span style="color:#50FA7B"> IsOverlapping</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">Entity</span><span style="color:#FFB86C;font-style:italic"> a</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Entity</span><span style="color:#FFB86C;font-style:italic"> b</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> dx </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> a.position.x </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> b.position.x;</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> dy </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> a.position.y </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> b.position.y;</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> distance_sq </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> dx </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> dx </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> dy </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> dy;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> radius_a </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> MassToRadius</span><span style="color:#F8F8F2">(a.mass);</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> radius_b </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> MassToRadius</span><span style="color:#F8F8F2">(b.mass);</span></span>
<span class="line"><span style="color:#F8F8F2">    </span></span>
<span class="line"><span style="color:#6272A4">    // If the distance between the two circle centers is less than the</span></span>
<span class="line"><span style="color:#6272A4">    // maximum radius, then the center of the smaller circle is inside</span></span>
<span class="line"><span style="color:#6272A4">    // the larger circle. This gives some leeway for the circles to overlap</span></span>
<span class="line"><span style="color:#6272A4">    // before being eaten.</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> max_radius </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> radius_a </span><span style="color:#FF79C6">></span><span style="color:#F8F8F2"> radius_b </span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> radius_a</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> radius_b;</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#F8F8F2"> distance_sq </span><span style="color:#FF79C6">&#x3C;=</span><span style="color:#F8F8F2"> max_radius </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> max_radius;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> MoveAllPlayers</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">ReducerContext</span><span style="color:#FFB86C;font-style:italic"> ctx</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">MoveAllPlayersTimer</span><span style="color:#FFB86C;font-style:italic"> timer</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> world_size </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (ctx.Db.config.id.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">??</span><span style="color:#FF79C6"> throw</span><span style="color:#FF79C6"> new</span><span style="color:#8BE9FD;font-style:italic"> Exception</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">Config not found</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">)).world_size;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Handle player input</span></span>
<span class="line"><span style="color:#FF79C6">    foreach</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> circle </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx.Db.circle.</span><span style="color:#50FA7B">Iter</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> check_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx.Db.entity.entity_id.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(circle.entity_id);</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (check_entity </span><span style="color:#FF79C6">==</span><span style="color:#BD93F9"> null</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#6272A4">            // This can happen if the circle has been eaten by another circle.</span></span>
<span class="line"><span style="color:#FF79C6">            continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> circle_entity </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> check_entity.Value;</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> circle_radius </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> MassToRadius</span><span style="color:#F8F8F2">(circle_entity.mass);</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle.direction </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> circle.speed;</span></span>
<span class="line"><span style="color:#FF79C6">        var</span><span style="color:#F8F8F2"> new_pos </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> circle_entity.position </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> direction </span><span style="color:#FF79C6">*</span><span style="color:#50FA7B"> MassToMaxMoveSpeed</span><span style="color:#F8F8F2">(circle_entity.mass);</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity.position.x </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#50FA7B">Clamp</span><span style="color:#F8F8F2">(new_pos.x, circle_radius, world_size </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> circle_radius);</span></span>
<span class="line"><span style="color:#F8F8F2">        circle_entity.position.y </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#50FA7B">Clamp</span><span style="color:#F8F8F2">(new_pos.y, circle_radius, world_size </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> circle_radius);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">        // Check collisions</span></span>
<span class="line"><span style="color:#FF79C6">        foreach</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> entity </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx.Db.entity.</span><span style="color:#50FA7B">Iter</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#F8F8F2"> (entity.entity_id </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> circle_entity.entity_id)</span></span>
<span class="line"><span style="color:#F8F8F2">            {</span></span>
<span class="line"><span style="color:#FF79C6">                continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#F8F8F2"> (</span><span style="color:#50FA7B">IsOverlapping</span><span style="color:#F8F8F2">(circle_entity, entity))</span></span>
<span class="line"><span style="color:#F8F8F2">            {</span></span>
<span class="line"><span style="color:#6272A4">                // Check to see if we're overlapping with food</span></span>
<span class="line"><span style="color:#FF79C6">                if</span><span style="color:#F8F8F2"> (ctx.Db.food.entity_id.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(entity.entity_id).HasValue) {</span></span>
<span class="line"><span style="color:#F8F8F2">                    ctx.Db.entity.entity_id.</span><span style="color:#50FA7B">Delete</span><span style="color:#F8F8F2">(entity.entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                    ctx.Db.food.entity_id.</span><span style="color:#50FA7B">Delete</span><span style="color:#F8F8F2">(entity.entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                    circle_entity.mass </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> entity.mass;</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">                </span></span>
<span class="line"><span style="color:#6272A4">                // Check to see if we're overlapping with another circle owned by another player</span></span>
<span class="line"><span style="color:#FF79C6">                var</span><span style="color:#F8F8F2"> other_circle </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> ctx.Db.circle.entity_id.</span><span style="color:#50FA7B">Find</span><span style="color:#F8F8F2">(entity.entity_id);</span></span>
<span class="line"><span style="color:#FF79C6">                if</span><span style="color:#F8F8F2"> (other_circle.HasValue </span><span style="color:#FF79C6">&#x26;&#x26;</span></span>
<span class="line"><span style="color:#F8F8F2">                    other_circle.Value.player_id </span><span style="color:#FF79C6">!=</span><span style="color:#F8F8F2"> circle.player_id)</span></span>
<span class="line"><span style="color:#F8F8F2">                {</span></span>
<span class="line"><span style="color:#FF79C6">                    var</span><span style="color:#F8F8F2"> mass_ratio </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">float</span><span style="color:#F8F8F2">)entity.mass </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> circle_entity.mass;</span></span>
<span class="line"><span style="color:#FF79C6">                    if</span><span style="color:#F8F8F2"> (mass_ratio </span><span style="color:#FF79C6">&#x3C;</span><span style="color:#F8F8F2"> MINIMUM_SAFE_MASS_RATIO)</span></span>
<span class="line"><span style="color:#F8F8F2">                    {</span></span>
<span class="line"><span style="color:#F8F8F2">                        ctx.Db.entity.entity_id.</span><span style="color:#50FA7B">Delete</span><span style="color:#F8F8F2">(entity.entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                        ctx.Db.circle.entity_id.</span><span style="color:#50FA7B">Delete</span><span style="color:#F8F8F2">(entity.entity_id);</span></span>
<span class="line"><span style="color:#F8F8F2">                        circle_entity.mass </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> entity.mass;</span></span>
<span class="line"><span style="color:#F8F8F2">                    }</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        ctx.Db.entity.entity_id.</span><span style="color:#50FA7B">Update</span><span style="color:#F8F8F2">(circle_entity);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <p>For every circle, we look at all other entities. If they are overlapping then for food, we add the mass of the food to the circle and delete the food, otherwise if it&#39;s a circle we delete the smaller circle and add the mass to the bigger circle.</p>
<p>That&#39;s it. We don&#39;t even have to do anything on the client. </p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> publish</span><span style="color:#BD93F9"> --server</span><span style="color:#F1FA8C"> local</span><span style="color:#F1FA8C"> blackholio</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Just update your module by publishing and you&#39;re on your way eating food! Try to see how big you can get!</p>
<p>We didn&#39;t even have to update the client, because our client&#39;s <code>OnDelete</code> callbacks already handled deleting entities from the scene when they&#39;re deleted on the server. SpacetimeDB just synchronizes the state with your client automatically.</p>
<p>Notice that the food automatically respawns as you vaccuum them up. This is because our scheduled reducer is automatically replacing the food 2 times per second, to ensure that there is always 600 food on the map.</p>
<h3 id="connecting-to-maincloud">Connecting to Maincloud<a href="#connecting-to-maincloud" class="permalink"><span class="visually-hidden"></span></a></h3><ul>
<li>Publish to Maincloud <code>spacetime publish -s maincloud &lt;your database name&gt; --delete-data</code><ul>
<li><code>&lt;your database name&gt;</code> This name should be unique and cannot contain any special characters other than internal hyphens (<code>-</code>).</li>
</ul>
</li>
<li>Update the URL in the Unity project to: <code>https://maincloud.spacetimedb.com</code></li>
<li>Update the module name in the Unity project to <code>&lt;your database name&gt;</code>.</li>
<li>Clear the PlayerPrefs in Start() within <code>GameManager.cs</code></li>
<li>Your <code>GameManager.cs</code> should look something like this:</li>
</ul>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2"> SERVER_URL </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">https://maincloud.spacetimedb.com</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2"> MODULE_NAME </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">&#x3C;your module name></span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">..</span><span style="color:#F8F8F2">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">private</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> Start</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#6272A4">    // Clear cached connection data to ensure proper connection</span></span>
<span class="line"><span style="color:#F8F8F2">    PlayerPrefs.</span><span style="color:#50FA7B">DeleteAll</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">    </span></span>
<span class="line"><span style="color:#6272A4">    // Continue with initialization</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>To delete your Maincloud database, you can run: <code>spacetime delete -s maincloud &lt;your database name&gt;</code></p>
<h2 id="conclusion">Conclusion<a href="#conclusion" class="permalink"><span class="visually-hidden"></span></a></h2>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                <p>So far you&#39;ve learned how to configure a new Unity project to work with SpacetimeDB, how to develop, build, and publish a SpacetimeDB server module. Within the module, you&#39;ve learned how to create tables, update tables, and write reducers. You&#39;ve learned about special reducers like <code>client_connected</code> and <code>init</code> and how to created scheduled reducers. You learned how we can used scheduled reducers to implement a physics simulation right within your module.</p>

            </div>
            <div class="lang-block" data-lang="C#">
                <p>So far you&#39;ve learned how to configure a new Unity project to work with SpacetimeDB, how to develop, build, and publish a SpacetimeDB server module. Within the module, you&#39;ve learned how to create tables, update tables, and write reducers. You&#39;ve learned about special reducers like <code>ClientConnected</code> and <code>Init</code> and how to created scheduled reducers. You learned how we can used scheduled reducers to implement a physics simulation right within your module.</p>

            </div>
        </div>
        <p>You&#39;ve also learned how view module logs and connect your client to your database server, call reducers from the client and synchronize the data with client. Finally you learned how to use that synchronized data to draw game objects on the screen, so that we can interact with them and play a game!</p>
<p>And all of that completely from scratch!</p>
<p>Our game is still pretty limited in some important ways. The biggest limitation is that the client assumes your username is &quot;3Blave&quot; and doesn&#39;t give you a menu or a window to set your username before joining the game. Notably, we do not have a unique constraint on the <code>name</code> column, so that does not prevent us from connecting multiple clients to the same server.</p>
<p>In fact, if you build what we have and run multiple clients you already have a (very simple) MMO! You can connect hundreds of players to this arena with SpacetimeDB.</p>
<p>There&#39;s still plenty more we can do to build this into a proper game though. For example, you might want to also add</p>
<ul>
<li>Username chooser</li>
<li>Chat</li>
<li>Leaderboards</li>
<li>Nice animations</li>
<li>Nice shaders</li>
<li>Space theme!</li>
</ul>
<p>Fortunately, we&#39;ve done that for you! If you&#39;d like to check out the completed tutorial game, with these additional features, you can download it on GitHub:</p>
<p><a href="https://github.com/ClockworkLabs/Blackholio">https://github.com/ClockworkLabs/Blackholio</a></p>
<p>If you have any suggestions or comments on the tutorial, either open an issue in our <a href="https://github.com/ClockworkLabs/spacetime-docs">docs repo</a>, or join our Discord (<a href="https://discord.gg/SpacetimeDB">https://discord.gg/SpacetimeDB</a>) and chat with us! </p>
</article></div><div class="WT-eTq_bottomDocContent"><div class="WT-eTq_actions"><a class="WT-eTq_prev" data-discover="true" href="part-3.html"><p class="WT-eTq_sub">Previous</p><p class="WT-eTq_title">3 - Gameplay</p></a><a class="WT-eTq_next" data-discover="true" href="../cli-reference.html"><p class="WT-eTq_sub">Next</p><p class="WT-eTq_title">CLI Reference</p></a></div></div><a class="WT-eTq_githubEditStyled" rel="noreferrer" href="https://github.com/clockworklabs/spacetime-docs/edit/master/docs/unity/part-4.md" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="white" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"></path></svg>Edit On Github</a></div></div></div><!--$--><!--/$--></div></div><script>((STORAGE_KEY, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({
        key
      }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(STORAGE_KEY);
    }
  })("positions", null)</script><link rel="modulepreload" href="../../assets/entry.client-BGtfi_QV.js"/><link rel="modulepreload" href="../../assets/jsx-runtime-B8m6gtXl.js"/><link rel="modulepreload" href="../../assets/index-Gwz8MVWd.js"/><link rel="modulepreload" href="../../assets/index-DQRDp3BA.js"/><link rel="modulepreload" href="../../assets/components-DZQBhqap.js"/><link rel="modulepreload" href="../../assets/index-BtvcE26l.js"/><link rel="modulepreload" href="../../assets/Layout-BdLUilQM.js"/><link rel="modulepreload" href="../../assets/preload-helper-D21cck6N.js"/><link rel="modulepreload" href="../../assets/client-only-wNC5TimA.js"/><link rel="modulepreload" href="../../assets/Container-DsvKPwib.js"/><link rel="modulepreload" href="../../assets/clsx-BeLtu-UY.js"/><link rel="modulepreload" href="../../assets/Icon-mnw7YCvf.js"/><link rel="modulepreload" href="../../assets/socials-pIkfUSDw.js"/><link rel="modulepreload" href="../../assets/index-ZcNkxdux.js"/><link rel="modulepreload" href="../../assets/Button-BsQzyESB.js"/><link rel="modulepreload" href="../../assets/root-B5VLWL4p.js"/><link rel="modulepreload" href="../../assets/route-BN3e8Fjz.js"/><link rel="modulepreload" href="../../assets/ScrollAnimation-CzbpuesT.js"/><link rel="modulepreload" href="../../assets/route-DJZPQN6P.js"/><link rel="modulepreload" href="../../assets/route-Xb11ex6F.js"/><link rel="modulepreload" href="../../assets/MDComponent-S1Ei_Xtk.js"/><link rel="modulepreload" href="../../assets/route-BsjcODbm.js"/><script>window.__remixContext = {"basename":"/","future":{"v3_fetcherPersist":true,"v3_relativeSplatPath":true,"v3_throwAbortReason":true,"v3_routeConfig":true,"v3_singleFetch":true,"v3_lazyRouteDiscovery":true,"unstable_optimizeDeps":true},"isSpaMode":false};window.__remixContext.stream = new ReadableStream({start(controller){window.__remixContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">;
import * as route0 from "/assets/root-B5VLWL4p.js";
import * as route1 from "/assets/route-BN3e8Fjz.js";
import * as route2 from "/assets/route-DJZPQN6P.js";
import * as route3 from "/assets/route-BsjcODbm.js";
window.__remixManifest = {
  "entry": {
    "module": "/assets/entry.client-BGtfi_QV.js",
    "imports": [
      "/assets/jsx-runtime-B8m6gtXl.js",
      "../../assets/index-Gwz8MVWd.js",
      "../../assets/index-DQRDp3BA.js",
      "../../assets/components-DZQBhqap.js"
    ],
    "css": []
  },
  "routes": {
    "root": {
      "id": "root",
      "path": "",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/root-B5VLWL4p.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../../assets/index-Gwz8MVWd.js",
        "../../assets/index-DQRDp3BA.js",
        "../../assets/components-DZQBhqap.js",
        "../../assets/index-BtvcE26l.js",
        "../../assets/Layout-BdLUilQM.js",
        "../../assets/preload-helper-D21cck6N.js",
        "../../assets/client-only-wNC5TimA.js",
        "../../assets/Container-DsvKPwib.js",
        "../../assets/clsx-BeLtu-UY.js",
        "../../assets/Icon-mnw7YCvf.js",
        "../../assets/socials-pIkfUSDw.js",
        "../../assets/index-ZcNkxdux.js",
        "../../assets/Button-BsQzyESB.js"
      ],
      "css": [
        "/assets/root-DgiNzMOf.css",
        "../../assets/Layout-CTL7f1Hd.css",
        "../../assets/Container-_6nMI5g_.css",
        "../../assets/Button-C8_kLgtz.css"
      ]
    },
    "routes/_marketing": {
      "id": "routes/_marketing",
      "parentId": "root",
      "hasAction": false,
      "hasLoader": false,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-BN3e8Fjz.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../../assets/Layout-BdLUilQM.js",
        "../../assets/components-DZQBhqap.js",
        "../../assets/index-DQRDp3BA.js",
        "../../assets/preload-helper-D21cck6N.js",
        "../../assets/client-only-wNC5TimA.js",
        "../../assets/Container-DsvKPwib.js",
        "../../assets/clsx-BeLtu-UY.js",
        "../../assets/Icon-mnw7YCvf.js",
        "../../assets/socials-pIkfUSDw.js",
        "../../assets/index-ZcNkxdux.js",
        "../../assets/Button-BsQzyESB.js",
        "../../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/Layout-CTL7f1Hd.css",
        "../../assets/Container-_6nMI5g_.css",
        "../../assets/Button-C8_kLgtz.css"
      ]
    },
    "routes/_marketing.docs": {
      "id": "routes/_marketing.docs",
      "parentId": "routes/_marketing",
      "path": "docs",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-DJZPQN6P.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../../assets/ScrollAnimation-CzbpuesT.js",
        "../../assets/clsx-BeLtu-UY.js",
        "../../assets/index-DQRDp3BA.js",
        "../../assets/components-DZQBhqap.js",
        "../../assets/index-ZcNkxdux.js",
        "../../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-DfbkRanz.css",
        "../../assets/ScrollAnimation-HNI5Nioi.css"
      ]
    },
    "routes/_marketing.docs.$": {
      "id": "routes/_marketing.docs.$",
      "parentId": "routes/_marketing.docs",
      "path": "*",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-BsjcODbm.js",
      "imports": [
        "/assets/route-Xb11ex6F.js",
        "../../assets/jsx-runtime-B8m6gtXl.js",
        "../../assets/MDComponent-S1Ei_Xtk.js",
        "../../assets/clsx-BeLtu-UY.js",
        "../../assets/index-BtvcE26l.js",
        "../../assets/index-DQRDp3BA.js",
        "../../assets/components-DZQBhqap.js",
        "../../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-DPGvI9WQ.css",
        "../../assets/MDComponent-CdQtYgZs.css"
      ]
    },
    "routes/_marketing._index": {
      "id": "routes/_marketing._index",
      "parentId": "routes/_marketing",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-D1GAktaa.js",
      "imports": [
        "/assets/route-BjgmKHBp.js",
        "../../assets/jsx-runtime-B8m6gtXl.js",
        "../../assets/clsx-BeLtu-UY.js",
        "../../assets/ScrollAnimation-CzbpuesT.js",
        "../../assets/index-ZcNkxdux.js",
        "../../assets/Section-YFQuzqA2.js",
        "../../assets/Button-BsQzyESB.js",
        "../../assets/Icon-mnw7YCvf.js",
        "../../assets/components-DZQBhqap.js",
        "../../assets/index-Gwz8MVWd.js",
        "../../assets/index-DQRDp3BA.js",
        "../../assets/Modal-Drq6A6PB.js",
        "../../assets/preload-helper-D21cck6N.js",
        "../../assets/IllustrationSection-CYB1aQb8.js",
        "../../assets/Hero-CQn9OGBR.js"
      ],
      "css": [
        "/assets/route-BD-0frUD.css",
        "../../assets/ScrollAnimation-HNI5Nioi.css",
        "../../assets/Section-BU2yo9B_.css",
        "../../assets/Button-C8_kLgtz.css",
        "../../assets/Modal-4Y8efbdF.css",
        "../../assets/IllustrationSection-Ce9CQF80.css",
        "../../assets/Hero-BQ6ieBxK.css"
      ]
    },
    "routes/_marketing.docs._index": {
      "id": "routes/_marketing.docs._index",
      "parentId": "routes/_marketing.docs",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-Xb11ex6F.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../../assets/MDComponent-S1Ei_Xtk.js",
        "../../assets/components-DZQBhqap.js",
        "../../assets/clsx-BeLtu-UY.js",
        "../../assets/index-BtvcE26l.js",
        "../../assets/index-DQRDp3BA.js",
        "../../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-DPGvI9WQ.css",
        "../../assets/MDComponent-CdQtYgZs.css"
      ]
    }
  },
  "url": "/assets/manifest-81d72d9d.js",
  "version": "81d72d9d"
};
window.__remixRouteModules = {"root":route0,"routes/_marketing":route1,"routes/_marketing.docs":route2,"routes/_marketing.docs.$":route3};

import("../../assets/entry.client-BGtfi_QV.js");</script><script class="cookieconsent-optin-statistics" data-cookieconsent="statistics">
                        window.dataLayer = window.dataLayer || [];
                        function gtag(){ dataLayer.push(arguments); }
                        gtag('js', new Date());
                        gtag('config', 'G-PP0E4VHQKG');
                        </script><script src="../../../uptime.betterstack.com/widgets/announcement.js" data-id="167677" defer="" type="text/javascript"></script></body>
<!-- Mirrored from spacetimedb.com/docs/unity/part-4 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 May 2025 02:58:43 GMT -->
</html><!--$--><script>window.__remixContext.streamController.enqueue("[{\"_1\":2,\"_187\":-5,\"_188\":-5},\"loaderData\",{\"_3\":4,\"_10\":11,\"_176\":177,\"_186\":-5},\"root\",{\"_5\":6,\"_7\":8,\"_9\":-7},\"stargazersCount\",15876,\"isAnnouncementVisible\",true,\"sessionUserInfo\",\"routes/_marketing.docs\",{\"_12\":13,\"_174\":175},\"nav\",{\"_14\":15},\"items\",[16,21,28,32,34,38,42,44,47,51,55,59,63,65,68,72,74,77,81,85,89,93,95,98,101,104,107,110,114,118,120,124,126,130,132,135,137,141,143,147,151,155,157,161,165,169,171],{\"_17\":18,\"_19\":20},\"type\",\"section\",\"title\",\"Intro\",{\"_17\":22,\"_23\":24,\"_25\":26,\"_19\":27},\"page\",\"path\",\"index.md\",\"slug\",\"index\",\"Overview\",{\"_17\":22,\"_23\":29,\"_25\":30,\"_19\":31},\"getting-started.md\",\"getting-started\",\"Getting Started\",{\"_17\":18,\"_19\":33},\"Deploying\",{\"_17\":22,\"_23\":35,\"_25\":36,\"_19\":37},\"deploying/maincloud.md\",\"deploying/maincloud\",\"Maincloud\",{\"_17\":22,\"_23\":39,\"_25\":40,\"_19\":41},\"deploying/spacetimedb-standalone.md\",\"deploying/spacetimedb-standalone\",\"Self-Hosting SpacetimeDB\",{\"_17\":18,\"_19\":43},\"Unity Tutorial - Basic Multiplayer\",{\"_17\":22,\"_23\":45,\"_25\":46,\"_19\":27},\"unity/index.md\",\"unity\",{\"_17\":22,\"_23\":48,\"_25\":49,\"_19\":50},\"unity/part-1.md\",\"unity/part-1\",\"1 - Setup\",{\"_17\":22,\"_23\":52,\"_25\":53,\"_19\":54},\"unity/part-2.md\",\"unity/part-2\",\"2 - Connecting to SpacetimeDB\",{\"_17\":22,\"_23\":56,\"_25\":57,\"_19\":58},\"unity/part-3.md\",\"unity/part-3\",\"3 - Gameplay\",{\"_17\":22,\"_23\":60,\"_25\":61,\"_19\":62},\"unity/part-4.md\",\"unity/part-4\",\"4 - Moving and Colliding\",{\"_17\":18,\"_19\":64},\"CLI Reference\",{\"_17\":22,\"_23\":66,\"_25\":67,\"_19\":64},\"cli-reference.md\",\"cli-reference\",{\"_17\":22,\"_23\":69,\"_25\":70,\"_19\":71},\"cli-reference/standalone-config.md\",\"cli-reference/standalone-config\",\"SpacetimeDB Standalone Configuration\",{\"_17\":18,\"_19\":73},\"Server Module Languages\",{\"_17\":22,\"_23\":75,\"_25\":76,\"_19\":27},\"modules/index.md\",\"modules\",{\"_17\":22,\"_23\":78,\"_25\":79,\"_19\":80},\"modules/rust/quickstart.md\",\"modules/rust/quickstart\",\"Rust Quickstart\",{\"_17\":22,\"_23\":82,\"_25\":83,\"_19\":84},\"modules/rust/index.md\",\"modules/rust\",\"Rust Reference\",{\"_17\":22,\"_23\":86,\"_25\":87,\"_19\":88},\"modules/c-sharp/quickstart.md\",\"modules/c-sharp/quickstart\",\"C# Quickstart\",{\"_17\":22,\"_23\":90,\"_25\":91,\"_19\":92},\"modules/c-sharp/index.md\",\"modules/c-sharp\",\"C# Reference\",{\"_17\":18,\"_19\":94},\"Client SDK Languages\",{\"_17\":22,\"_23\":96,\"_25\":97,\"_19\":27},\"sdks/index.md\",\"sdks\",{\"_17\":22,\"_23\":99,\"_25\":100,\"_19\":88},\"sdks/c-sharp/quickstart.md\",\"sdks/c-sharp/quickstart\",{\"_17\":22,\"_23\":102,\"_25\":103,\"_19\":92},\"sdks/c-sharp/index.md\",\"sdks/c-sharp\",{\"_17\":22,\"_23\":105,\"_25\":106,\"_19\":80},\"sdks/rust/quickstart.md\",\"sdks/rust/quickstart\",{\"_17\":22,\"_23\":108,\"_25\":109,\"_19\":84},\"sdks/rust/index.md\",\"sdks/rust\",{\"_17\":22,\"_23\":111,\"_25\":112,\"_19\":113},\"sdks/typescript/quickstart.md\",\"sdks/typescript/quickstart\",\"TypeScript Quickstart\",{\"_17\":22,\"_23\":115,\"_25\":116,\"_19\":117},\"sdks/typescript/index.md\",\"sdks/typescript\",\"TypeScript Reference\",{\"_17\":18,\"_19\":119},\"SQL\",{\"_17\":22,\"_23\":121,\"_25\":122,\"_19\":123},\"sql/index.md\",\"sql\",\"SQL Reference\",{\"_17\":18,\"_19\":125},\"Subscriptions\",{\"_17\":22,\"_23\":127,\"_25\":128,\"_19\":129},\"subscriptions/index.md\",\"subscriptions\",\"Subscription Reference\",{\"_17\":18,\"_19\":131},\"Row Level Security\",{\"_17\":22,\"_23\":133,\"_25\":134,\"_19\":131},\"rls/index.md\",\"rls\",{\"_17\":18,\"_19\":136},\"How To\",{\"_17\":22,\"_23\":138,\"_25\":139,\"_19\":140},\"how-to/incremental-migrations.md\",\"how-to/incremental-migrations\",\"Incremental Migrations\",{\"_17\":18,\"_19\":142},\"HTTP API\",{\"_17\":22,\"_23\":144,\"_25\":145,\"_19\":146},\"http/authorization.md\",\"http/authorization\",\"Authorization\",{\"_17\":22,\"_23\":148,\"_25\":149,\"_19\":150},\"http/identity.md\",\"http/identity\",\"`/identity`\",{\"_17\":22,\"_23\":152,\"_25\":153,\"_19\":154},\"http/database.md\",\"http/database\",\"`/database`\",{\"_17\":18,\"_19\":156},\"Internals\",{\"_17\":22,\"_23\":158,\"_25\":159,\"_19\":160},\"webassembly-abi/index.md\",\"webassembly-abi\",\"Module ABI Reference\",{\"_17\":22,\"_23\":162,\"_25\":163,\"_19\":164},\"sats-json.md\",\"sats-json\",\"SATS-JSON Data Format\",{\"_17\":22,\"_23\":166,\"_25\":167,\"_19\":168},\"bsatn.md\",\"bsatn\",\"BSATN Data Format\",{\"_17\":18,\"_19\":170},\"Appendix\",{\"_17\":22,\"_23\":172,\"_25\":173,\"_19\":170},\"appendix.md\",\"appendix\",\"rootEditURL\",\"https://github.com/clockworklabs/spacetime-docs/edit/master/docs\",\"routes/_marketing.docs.$\",{\"_178\":179,\"_180\":181,\"_182\":183,\"_184\":185},\"content\",\"\u003ch2 id=\\\"unity-tutorial---part-4---moving-and-colliding\\\"\u003eUnity Tutorial - Part 4 - Moving and Colliding\u003ca href=\\\"#unity-tutorial---part-4---moving-and-colliding\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eNeed help with the tutorial? \u003ca href=\\\"https://discord.gg/spacetimedb\\\"\u003eJoin our Discord server\u003c/a\u003e!\u003c/p\u003e\\n\u003cp\u003eThis progressive tutorial is continued from \u003ca href=\\\"/docs/unity/part-3\\\"\u003epart 3\u003c/a\u003e.\u003c/p\u003e\\n\u003ch4 id=\\\"moving-the-player\\\"\u003eMoving the player\u003ca href=\\\"#moving-the-player\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eAt this point, we\u0026#39;re very close to having a working game. All we have to do is modify our server to allow the player to move around, and to simulate the physics and collisions of the game.\u003c/p\u003e\\n\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \u003cp\u003eLet\u0026#39;s start by building out a simple math library to help us do collision calculations. Create a new \u003ccode\u003emath.rs\u003c/code\u003e file in the \u003ccode\u003eserver-rust/src\u003c/code\u003e directory and add the following contents. Let\u0026#39;s also move the \u003ccode\u003eDbVector2\u003c/code\u003e type from \u003ccode\u003elib.rs\u003c/code\u003e into this file.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003euse\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e spacetimedb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSpacetimeType\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// This allows us to store 2D points in tables.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e#[derive(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSpacetimeType\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDebug\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eClone\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eCopy\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e struct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eAdd\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    type\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Output\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e add\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eAdd\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    type\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Output\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e add\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eAddAssign\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e add_assign\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, rhs\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e rhs\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e rhs\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eiter\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSum\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e sum\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eI\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Iterator\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eItem\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003e(iter\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e I\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e Self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e mut\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e r \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        for\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e val \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e iter {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            r \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e val;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        r\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSub\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    type\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Output\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e sub\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSub\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    type\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Output\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e sub\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubAssign\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e sub_assign\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, rhs\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e rhs\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e rhs\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eMul\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003ef32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    type\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Output\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mul\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e std\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eops\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDiv\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003ef32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efor\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    type\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Output\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e div\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, other\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e!=\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e            DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        } \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eelse\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e            DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e Self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        Self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { x, y }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e sqr_magnitude\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e magnitude\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        (\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esqrt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e normalized\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e /\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003emagnitude\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eAt the very top of \u003ccode\u003elib.rs\u003c/code\u003e add the following lines to import the moved \u003ccode\u003eDbVector2\u003c/code\u003e from the \u003ccode\u003emath\u003c/code\u003e module.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e mod\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e math;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003euse\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e math\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// ...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eNext, add the following reducer to your \u003ccode\u003elib.rs\u003c/code\u003e file.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e#[spacetimedb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ereducer]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e update_player_input\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducerContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, direction\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Result\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;(), \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eString\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e player \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eplayer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eidentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003esender)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eok_or\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\\\"Player not found\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e?\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    for\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e mut\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eplayer_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efilter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eplayer\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eplayer_id) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edirection \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003enormalized\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003espeed \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003emagnitude\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eclamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e1.0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eupdate\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e    Ok\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eThis is a simple reducer that takes the movement input from the client and applies them to all circles that that player controls. Note that it is not possible for a player to move another player\u0026#39;s circles using this reducer, because the \u003ccode\u003ectx.sender\u003c/code\u003e value is not set by the client. Instead \u003ccode\u003ectx.sender\u003c/code\u003e is set by SpacetimeDB after it has authenticated that sender. You can rest assured that the caller has been authenticated as that player by the time this reducer is called.\u003c/p\u003e\\n\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \u003cp\u003eLet\u0026#39;s start by building out a simple math library to help us do collision calculations. Create a new \u003ccode\u003eMath.cs\u003c/code\u003e file in the \u003ccode\u003ecsharp-server\u003c/code\u003e directory and add the following contents. Let\u0026#39;s also remove the \u003ccode\u003eDbVector2\u003c/code\u003e type from \u003ccode\u003eLib.cs\u003c/code\u003e.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSpacetimeDB\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eType\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e partial\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e struct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e float\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e x;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e float\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e y;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efloat\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e x\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efloat\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e y\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        this\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e x;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e        this\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e y;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e float\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e SqrMagnitude \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e y;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e float\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Magnitude \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e MathF.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSqrt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(SqrMagnitude);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Normalized \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e this\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e /\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Magnitude;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e operator\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b.x, a.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b.y);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e operator\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e -\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b.x, a.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b.y);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e operator\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efloat\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b, a.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e operator\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e /\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efloat\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b, a.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eNext, add the following reducer to the \u003ccode\u003eModule\u003c/code\u003e class of your \u003ccode\u003eLib.cs\u003c/code\u003e file.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e UpdatePlayerInput\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducerContext\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eDbVector2\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e direction\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e player \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.player.identity.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(ctx.Sender) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e??\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e throw\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Exception\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003ePlayer not found\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\\t\\t\\t\\t\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    foreach\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e c \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.circle.player_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFilter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(player.player_id))\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e c;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle.direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction.Normalized;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle.speed \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Math.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eClamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(direction.Magnitude, \u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0f\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e1f\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        ctx.Db.circle.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eUpdate\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eThis is a simple reducer that takes the movement input from the client and applies them to all circles that that player controls. Note that it is not possible for a player to move another player\u0026#39;s circles using this reducer, because the \u003ccode\u003ectx.Sender\u003c/code\u003e value is not set by the client. Instead \u003ccode\u003ectx.Sender\u003c/code\u003e is set by SpacetimeDB after it has authenticated that sender. You can rest assured that the caller has been authenticated as that player by the time this reducer is called.\u003c/p\u003e\\n\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eFinally, let\u0026#39;s schedule a reducer to run every 50 milliseconds to move the player\u0026#39;s circles around based on the most recently set player input.\u003c/p\u003e\\n\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e#[spacetimedb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003etable(name \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e move_all_players_timer, scheduled(move_all_players))]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e struct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e MoveAllPlayersTimer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    #[primary_key]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    #[auto_inc]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    scheduled_id\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e u64\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    scheduled_at\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e spacetimedb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eScheduleAt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003econst\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e START_PLAYER_SPEED\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e u32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 10\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_max_move_speed\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(mass\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e u32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e    2.0\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e START_PLAYER_SPEED\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e as\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e /\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e1.0\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (mass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eas\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e /\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e START_PLAYER_MASS\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e as\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esqrt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e#[spacetimedb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ereducer]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e move_all_players\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducerContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, _timer\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e MoveAllPlayersTimer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Result\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;(), \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eString\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003econfig\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eid\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eok_or\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\\\"Config not found\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e?\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eworld_size;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Handle player input\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    for\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eiter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e !\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ecircle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eis_some\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e            // This can happen if a circle is eaten by another circle\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            continue\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e mut\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eunwrap\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_radius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edirection \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003espeed;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_max_move_speed\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e min \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eas\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e -\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eclamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(min, max);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eclamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(min, max);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eupdate\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e    Ok\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eTable\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(Name \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003emove_all_players_timer\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, Scheduled \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e nameof\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(MoveAllPlayers), ScheduledAt \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e nameof\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(scheduled_at))]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e partial\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e struct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e MoveAllPlayersTimer\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    [\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003ePrimaryKey\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eAutoInc\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e ulong\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e scheduled_id;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e ScheduleAt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e scheduled_at;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003econst\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e uint\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e START_PLAYER_SPEED \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 10\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e float\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToMaxMoveSpeed\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003euint\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e mass\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 2f\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e START_PLAYER_SPEED \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e1f\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e MathF.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSqrt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efloat\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)mass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e START_PLAYER_MASS));\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MoveAllPlayers\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducerContext\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eMoveAllPlayersTimer\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e timer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (ctx.Db.config.id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e??\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e throw\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Exception\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eConfig not found\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)).world_size;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_directions \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.circle.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eIter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e().\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSelect\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (c.entity_id, c.direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e c.speed)).\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eToDictionary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Handle player input\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    foreach\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.circle.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eIter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e check_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.entity.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (check_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e==\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e null\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e            // This can happen if the circle has been eaten by another circle.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            continue\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e check_entity.Value;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToRadius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity.mass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_directions[circle.entity_id];\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity.position \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToMaxMoveSpeed\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity.mass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity.position.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Math.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eClamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(new_pos.x, circle_radius, world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity.position.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Math.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eClamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(new_pos.y, circle_radius, world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        ctx.Db.entity.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eUpdate\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eThis reducer is very similar to a standard game \u0026quot;tick\u0026quot; or \u0026quot;frame\u0026quot; that you might find in an ordinary game server or similar to something like the \u003ccode\u003eUpdate\u003c/code\u003e loop in a game engine like Unity. We\u0026#39;ve scheduled it every 50 milliseconds and we can use it to step forward our simulation by moving all the circles a little bit further in the direction they\u0026#39;re moving.\u003c/p\u003e\\n\u003cp\u003eIn this reducer, we\u0026#39;re just looping through all the circles in the game and updating their position based on their direction, speed, and mass. Just basic physics.\u003c/p\u003e\\n\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \u003cp\u003eAdd the following to your \u003ccode\u003einit\u003c/code\u003e reducer to schedule the \u003ccode\u003emove_all_players\u003c/code\u003e reducer to run every 50 milliseconds.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003emove_all_players_timer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003etry_insert\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eMoveAllPlayersTimer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        scheduled_id\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        scheduled_at\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ScheduleAt\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eInterval\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(Duration\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efrom_millis\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e50\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003einto\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()),\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    })\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e?\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \u003cp\u003eAdd the following to your \u003ccode\u003eInit\u003c/code\u003e reducer to schedule the \u003ccode\u003eMoveAllPlayers\u003c/code\u003e reducer to run every 50 milliseconds.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ectx.Db.move_all_players_timer.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eInsert\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e MoveAllPlayersTimer\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    scheduled_at \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e ScheduleAt\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eInterval\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(TimeSpan.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFromMilliseconds\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e50\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e))\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e});\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eRepublish your module with:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003espacetime\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e publish\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e --server\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e local\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e blackholio\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e --delete-data\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eRegenerate your server bindings with:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003espacetime\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e generate\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e --lang\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e csharp\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e --out-dir\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e ../client-unity/Assets/autogen\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003ch4 id=\\\"moving-on-the-client\\\"\u003eMoving on the Client\u003ca href=\\\"#moving-on-the-client\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eAll that\u0026#39;s left is to modify our \u003ccode\u003ePlayerController\u003c/code\u003e on the client to call the \u003ccode\u003eupdate_player_input\u003c/code\u003e reducer. Open \u003ccode\u003ePlayerController.cs\u003c/code\u003e and add an \u003ccode\u003eUpdate\u003c/code\u003e function:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Update\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e!\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eIsLocalPlayer \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e||\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e NumberOfOwnedCircles \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e==\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        return\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (Input.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eGetKeyDown\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(KeyCode.Q))\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (LockInputPosition.HasValue)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            LockInputPosition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e null\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        else\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            LockInputPosition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)Input.mousePosition;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Throttled input requests\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (Time.time \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e LastMovementSendTimestamp \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e SEND_UPDATES_FREQUENCY)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        LastMovementSendTimestamp \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Time.time;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e mousePosition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e LockInputPosition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e??\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eVector2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)Input.mousePosition;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e screenSize \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Vector2\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Screen.width,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Screen.height,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        };\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e centerOfScreen \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e screenSize \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 2\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (mousePosition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e centerOfScreen) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (screenSize.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 3\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (testInputEnabled) { direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e testInput; }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        GameManager.Conn.Reducers.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eUpdatePlayerInput\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(direction);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eLet\u0026#39;s try it out! Press play and roam freely around the arena! Now we\u0026#39;re cooking with gas.\u003c/p\u003e\\n\u003ch4 id=\\\"collisions-and-eating-food\\\"\u003eCollisions and Eating Food\u003ca href=\\\"#collisions-and-eating-food\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eWell this is pretty fun, but wouldn\u0026#39;t it be better if we could eat food and grow our circle? Surely, that\u0026#39;s going to be a pain, right?\u003c/p\u003e\\n\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \u003cp\u003eWrong. With SpacetimeDB it\u0026#39;s extremely easy. All we have to do is add an \u003ccode\u003eis_overlapping\u003c/code\u003e helper function which does some basic math based on mass radii, and modify our \u003ccode\u003emove_all_player\u003c/code\u003e reducer to loop through every entity in the arena for every circle, checking each for overlaps. This may not be the most efficient way to do collision checking (building a quad tree or doing \u003ca href=\\\"https://conkerjo.wordpress.com/2009/06/13/spatial-hashing-implementation-for-fast-2d-collisions/\\\"\u003espatial hashing\u003c/a\u003e might be better), but SpacetimeDB is very fast so for this number of entities it\u0026#39;ll be a breeze for SpacetimeDB.\u003c/p\u003e\\n\u003cp\u003eSometimes simple is best! Add the following code to your \u003ccode\u003elib.rs\u003c/code\u003e file and make sure to replace the existing \u003ccode\u003emove_all_players\u003c/code\u003e reducer.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003econst\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e MINIMUM_SAFE_MASS_RATIO\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0.85\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e is_overlapping\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eEntity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, b\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eEntity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e bool\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dx \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dy \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e distance_sq \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dx \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dx \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dy \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dy;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_a \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_radius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_b \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_radius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(b\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // If the distance between the two circle centers is less than the \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // maximum radius, then the center of the smaller circle is inside\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // the larger circle. This gives some leeway for the circles to overlap\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // before being eaten.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003emax\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(radius_a, radius_b);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    distance_sq \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max_radius\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e#[spacetimedb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ereducer]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e move_all_players\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducerContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, _timer\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e MoveAllPlayersTimer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Result\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;(), \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eString\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003econfig\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eid\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eok_or\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\\\"Config not found\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e?\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eworld_size;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Handle player input\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    for\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eiter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e !\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ecircle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eis_some\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e            // This can happen if a circle is eaten by another circle\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            continue\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e mut\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eunwrap\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_radius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edirection \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003espeed;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e mass_to_max_move_speed\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e min \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eas\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e -\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ex\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eclamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(min, max);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eposition\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ey\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eclamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(min, max);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // Check collisions\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        for\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eiter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e==\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                continue\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            if\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e is_overlapping\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ecircle_entity, \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e                // Check to see if we're overlapping with food\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efood\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id)\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eis_some\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003edelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efood\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003edelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e                // Check to see if we're overlapping with another circle owned by another player\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other_circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003efind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                if\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e let\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Some\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(other_circle) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other_circle {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                    if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other_circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eplayer_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e!=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eplayer_id {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                        let\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e mass_ratio \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eas\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e /\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eas\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                        if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e mass_ratio \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e MINIMUM_SAFE_MASS_RATIO\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                            ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003edelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                            ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003ecircle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003edelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                            circle_entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003emass;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        ctx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003edb\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eentity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eupdate\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e    Ok\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \u003cp\u003eWrong. With SpacetimeDB it\u0026#39;s extremely easy. All we have to do is add an \u003ccode\u003eIsOverlapping\u003c/code\u003e helper function which does some basic math based on mass radii, and modify our \u003ccode\u003eMoveAllPlayers\u003c/code\u003e reducer to loop through every entity in the arena for every circle, checking each for overlaps. This may not be the most efficient way to do collision checking (building a quad tree or doing \u003ca href=\\\"https://conkerjo.wordpress.com/2009/06/13/spatial-hashing-implementation-for-fast-2d-collisions/\\\"\u003espatial hashing\u003c/a\u003e might be better), but SpacetimeDB is very fast so for this number of entities it\u0026#39;ll be a breeze for SpacetimeDB.\u003c/p\u003e\\n\u003cp\u003eSometimes simple is best! Add the following code to the \u003ccode\u003eModule\u003c/code\u003e class of your \u003ccode\u003eLib.cs\u003c/code\u003e file and make sure to replace the existing \u003ccode\u003eMoveAllPlayers\u003c/code\u003e reducer.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003econst\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e float\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e MINIMUM_SAFE_MASS_RATIO \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 0.85f\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e bool\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e IsOverlapping\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eEntity\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e a\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eEntity\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e b\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dx \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e a.position.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b.position.x;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dy \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e a.position.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e b.position.y;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e distance_sq \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dx \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dx \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dy \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e dy;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_a \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToRadius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(a.mass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_b \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToRadius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(b.mass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // If the distance between the two circle centers is less than the\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // maximum radius, then the center of the smaller circle is inside\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // the larger circle. This gives some leeway for the circles to overlap\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // before being eaten.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_a \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_b \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e?\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_a\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e radius_b;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    return\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e distance_sq \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e max_radius;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e static\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MoveAllPlayers\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eReducerContext\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e ctx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eMoveAllPlayersTimer\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e timer\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (ctx.Db.config.id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e0\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e??\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e throw\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e new\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Exception\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eConfig not found\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)).world_size;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Handle player input\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    foreach\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.circle.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eIter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e check_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.entity.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (check_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e==\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e null\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e            // This can happen if the circle has been eaten by another circle.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            continue\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e check_entity.Value;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToRadius\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity.mass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle.direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle.speed;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_pos \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity.position \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e direction \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e*\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e MassToMaxMoveSpeed\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity.mass);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity.position.x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Math.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eClamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(new_pos.x, circle_radius, world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        circle_entity.position.y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Math.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eClamp\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(new_pos.y, circle_radius, world_size \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_radius);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // Check collisions\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        foreach\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.entity.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eIter\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e())\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (entity.entity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e==\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity.entity_id)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                continue\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e            if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eIsOverlapping\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity, entity))\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e                // Check to see if we're overlapping with food\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (ctx.Db.food.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity.entity_id).HasValue) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    ctx.Db.entity.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eDelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    ctx.Db.food.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eDelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    circle_entity.mass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity.mass;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e                // Check to see if we're overlapping with another circle owned by another player\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e other_circle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e ctx.Db.circle.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eFind\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (other_circle.HasValue \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    other_circle.Value.player_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e!=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle.player_id)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                    var\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e mass_ratio \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efloat\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e)entity.mass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e/\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e circle_entity.mass;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e                    if\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (mass_ratio \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e MINIMUM_SAFE_MASS_RATIO)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                        ctx.Db.entity.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eDelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                        ctx.Db.circle.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eDelete\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity.entity_id);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                        circle_entity.mass \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e entity.mass;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e                }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e            }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        ctx.Db.entity.entity_id.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eUpdate\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(circle_entity);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eFor every circle, we look at all other entities. If they are overlapping then for food, we add the mass of the food to the circle and delete the food, otherwise if it\u0026#39;s a circle we delete the smaller circle and add the mass to the bigger circle.\u003c/p\u003e\\n\u003cp\u003eThat\u0026#39;s it. We don\u0026#39;t even have to do anything on the client. \u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003espacetime\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e publish\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e --server\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e local\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e blackholio\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eJust update your module by publishing and you\u0026#39;re on your way eating food! Try to see how big you can get!\u003c/p\u003e\\n\u003cp\u003eWe didn\u0026#39;t even have to update the client, because our client\u0026#39;s \u003ccode\u003eOnDelete\u003c/code\u003e callbacks already handled deleting entities from the scene when they\u0026#39;re deleted on the server. SpacetimeDB just synchronizes the state with your client automatically.\u003c/p\u003e\\n\u003cp\u003eNotice that the food automatically respawns as you vaccuum them up. This is because our scheduled reducer is automatically replacing the food 2 times per second, to ensure that there is always 600 food on the map.\u003c/p\u003e\\n\u003ch3 id=\\\"connecting-to-maincloud\\\"\u003eConnecting to Maincloud\u003ca href=\\\"#connecting-to-maincloud\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cul\u003e\\n\u003cli\u003ePublish to Maincloud \u003ccode\u003espacetime publish -s maincloud \u0026lt;your database name\u0026gt; --delete-data\u003c/code\u003e\u003cul\u003e\\n\u003cli\u003e\u003ccode\u003e\u0026lt;your database name\u0026gt;\u003c/code\u003e This name should be unique and cannot contain any special characters other than internal hyphens (\u003ccode\u003e-\u003c/code\u003e).\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003c/li\u003e\\n\u003cli\u003eUpdate the URL in the Unity project to: \u003ccode\u003ehttps://maincloud.spacetimedb.com\u003c/code\u003e\u003c/li\u003e\\n\u003cli\u003eUpdate the module name in the Unity project to \u003ccode\u003e\u0026lt;your database name\u0026gt;\u003c/code\u003e.\u003c/li\u003e\\n\u003cli\u003eClear the PlayerPrefs in Start() within \u003ccode\u003eGameManager.cs\u003c/code\u003e\u003c/li\u003e\\n\u003cli\u003eYour \u003ccode\u003eGameManager.cs\u003c/code\u003e should look something like this:\u003c/li\u003e\\n\u003c/ul\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003econst\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e SERVER_URL \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003ehttps://maincloud.spacetimedb.com\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003econst\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e MODULE_NAME \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\u0026#x3C;your module name\u003e\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e..\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eprivate\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Start\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Clear cached connection data to ensure proper connection\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    PlayerPrefs.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eDeleteAll\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    // Continue with initialization\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eTo delete your Maincloud database, you can run: \u003ccode\u003espacetime delete -s maincloud \u0026lt;your database name\u0026gt;\u003c/code\u003e\u003c/p\u003e\\n\u003ch2 id=\\\"conclusion\\\"\u003eConclusion\u003ca href=\\\"#conclusion\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \u003cp\u003eSo far you\u0026#39;ve learned how to configure a new Unity project to work with SpacetimeDB, how to develop, build, and publish a SpacetimeDB server module. Within the module, you\u0026#39;ve learned how to create tables, update tables, and write reducers. You\u0026#39;ve learned about special reducers like \u003ccode\u003eclient_connected\u003c/code\u003e and \u003ccode\u003einit\u003c/code\u003e and how to created scheduled reducers. You learned how we can used scheduled reducers to implement a physics simulation right within your module.\u003c/p\u003e\\n\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \u003cp\u003eSo far you\u0026#39;ve learned how to configure a new Unity project to work with SpacetimeDB, how to develop, build, and publish a SpacetimeDB server module. Within the module, you\u0026#39;ve learned how to create tables, update tables, and write reducers. You\u0026#39;ve learned about special reducers like \u003ccode\u003eClientConnected\u003c/code\u003e and \u003ccode\u003eInit\u003c/code\u003e and how to created scheduled reducers. You learned how we can used scheduled reducers to implement a physics simulation right within your module.\u003c/p\u003e\\n\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eYou\u0026#39;ve also learned how view module logs and connect your client to your database server, call reducers from the client and synchronize the data with client. Finally you learned how to use that synchronized data to draw game objects on the screen, so that we can interact with them and play a game!\u003c/p\u003e\\n\u003cp\u003eAnd all of that completely from scratch!\u003c/p\u003e\\n\u003cp\u003eOur game is still pretty limited in some important ways. The biggest limitation is that the client assumes your username is \u0026quot;3Blave\u0026quot; and doesn\u0026#39;t give you a menu or a window to set your username before joining the game. Notably, we do not have a unique constraint on the \u003ccode\u003ename\u003c/code\u003e column, so that does not prevent us from connecting multiple clients to the same server.\u003c/p\u003e\\n\u003cp\u003eIn fact, if you build what we have and run multiple clients you already have a (very simple) MMO! You can connect hundreds of players to this arena with SpacetimeDB.\u003c/p\u003e\\n\u003cp\u003eThere\u0026#39;s still plenty more we can do to build this into a proper game though. For example, you might want to also add\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eUsername chooser\u003c/li\u003e\\n\u003cli\u003eChat\u003c/li\u003e\\n\u003cli\u003eLeaderboards\u003c/li\u003e\\n\u003cli\u003eNice animations\u003c/li\u003e\\n\u003cli\u003eNice shaders\u003c/li\u003e\\n\u003cli\u003eSpace theme!\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003eFortunately, we\u0026#39;ve done that for you! If you\u0026#39;d like to check out the completed tutorial game, with these additional features, you can download it on GitHub:\u003c/p\u003e\\n\u003cp\u003e\u003ca href=\\\"https://github.com/ClockworkLabs/Blackholio\\\"\u003ehttps://github.com/ClockworkLabs/Blackholio\u003c/a\u003e\u003c/p\u003e\\n\u003cp\u003eIf you have any suggestions or comments on the tutorial, either open an issue in our \u003ca href=\\\"https://github.com/ClockworkLabs/spacetime-docs\\\"\u003edocs repo\u003c/a\u003e, or join our Discord (\u003ca href=\\\"https://discord.gg/SpacetimeDB\\\"\u003ehttps://discord.gg/SpacetimeDB\u003c/a\u003e) and chat with us! \u003c/p\u003e\\n\",\"next\",{\"_17\":22,\"_23\":66,\"_25\":67,\"_19\":64},\"prev\",{\"_17\":22,\"_23\":56,\"_25\":57,\"_19\":58},\"editURL\",\"https://github.com/clockworklabs/spacetime-docs/edit/master/docs/unity/part-4.md\",\"routes/_marketing\",\"actionData\",\"errors\"]\n");</script><!--$--><script>window.__remixContext.streamController.close();</script><!--/$--><!--/$-->
<!DOCTYPE html><html lang="en">
<!-- Mirrored from spacetimedb.com/docs/subscriptions by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 May 2025 02:58:46 GMT -->
<head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"/><link rel="manifest" href="../site.webmanifest"/><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#202126"/><meta name="msapplication-TileColor" content="#202126"/><meta name="theme-color" content="#202126"/><link href="../favicon-light.ico" rel="icon" media="(prefers-color-scheme: light)"/><link href="../favicon.ico" rel="icon" media="(prefers-color-scheme: dark)"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="title" content="SpacetimeDB"/><meta name="description" content="Multiplayer at the speed of light."/><meta property="og:type" content="website"/><meta property="og:url" content="../index.html"/><meta property="og:title" content="SpacetimeDB"/><meta property="og:description" content="Multiplayer at the speed of light."/><meta property="og:image" content="../meta-tags.png"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:url" content="../index.html"/><meta property="twitter:title" content="SpacetimeDB"/><meta property="twitter:description" content="Multiplayer at the speed of light."/><meta property="twitter:image" content="../meta-tags.png"/><link rel="preload" as="font" href="../assets/ibm-plex-mono-latin-600-normal-rgB1DpUr.woff2" type="font/woff2" crossorigin="anonymous"/><link rel="preload" as="font" href="../assets/inter-latin-wght-normal-C2S99t-D.woff2" type="font/woff2" crossorigin="anonymous"/><link rel="preload" as="font" href="../assets/source-code-pro-latin-wght-normal-C54hYqvT.woff2" type="font/woff2" crossorigin="anonymous"/><title>Docs | SpacetimeDB</title><link rel="stylesheet" href="../assets/root-DgiNzMOf.css"/><link rel="stylesheet" href="../assets/Layout-CTL7f1Hd.css"/><link rel="stylesheet" href="../assets/Container-_6nMI5g_.css"/><link rel="stylesheet" href="../assets/Button-C8_kLgtz.css"/><link rel="stylesheet" href="../assets/route-DfbkRanz.css"/><link rel="stylesheet" href="../assets/ScrollAnimation-HNI5Nioi.css"/><link rel="stylesheet" href="../assets/route-DPGvI9WQ.css"/><link rel="stylesheet" href="../assets/MDComponent-CdQtYgZs.css"/></head><body><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div><div id="root"><div><div class="BPQwEa_scrollScapegoat"></div><header class="BPQwEa_header" style="--background:transparent;--color-border:transparent"><div class="sDndEq_announcementBanner text-tagline-1"><div class="wtWGoa_root"><div class="sDndEq_content"><div class="sDndEq_left"><svg class="sDndEq_announcementIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.2413 2H7.7587C6.95374 1.99999 6.28937 1.99998 5.74818 2.04419C5.18608 2.09012 4.66937 2.18868 4.18404 2.43598C3.43139 2.81947 2.81947 3.43139 2.43598 4.18404C2.18868 4.66937 2.09012 5.18608 2.04419 5.74818C1.99998 6.28937 1.99999 6.95372 2 7.75869V13.5343C1.99999 14.2041 1.99999 14.7569 2.03087 15.2095C2.06289 15.6788 2.13142 16.1129 2.30448 16.5307C2.71046 17.5108 3.48916 18.2895 4.46927 18.6955C4.88708 18.8686 5.32118 18.9371 5.79046 18.9691C6.24307 19 6.79594 19 7.46573 19H7.5C8.03656 19 8.14307 19.0063 8.22975 19.0268C8.38085 19.0624 8.52156 19.1328 8.64075 19.2322C8.70913 19.2893 8.77806 19.3708 9.1 19.8L10.5769 21.7692C10.6703 21.8938 10.7758 22.0346 10.8774 22.1476C10.9894 22.2721 11.1756 22.4555 11.4563 22.5647C11.806 22.7007 12.194 22.7007 12.5437 22.5647C12.8244 22.4555 13.0106 22.2721 13.1226 22.1476C13.2242 22.0346 13.3297 21.8938 13.4231 21.7692L14.9 19.8C15.2219 19.3708 15.2909 19.2893 15.3593 19.2322C15.4784 19.1328 15.6192 19.0624 15.7702 19.0268C15.8569 19.0063 15.9634 19 16.5 19H16.5343C17.2041 19 17.7569 19 18.2095 18.9691C18.6788 18.9371 19.1129 18.8686 19.5307 18.6955C20.5108 18.2895 21.2895 17.5108 21.6955 16.5307C21.8686 16.1129 21.9371 15.6788 21.9691 15.2095C22 14.7569 22 14.2041 22 13.5343V7.75868C22 6.95372 22 6.28937 21.9558 5.74818C21.9099 5.18608 21.8113 4.66937 21.564 4.18404C21.1805 3.43139 20.5686 2.81947 19.816 2.43598C19.3306 2.18868 18.8139 2.09012 18.2518 2.04419C17.7106 1.99998 17.0463 1.99999 16.2413 2ZM13 7C13 6.44772 12.5523 6 12 6C11.4477 6 11 6.44772 11 7V10.5C11 11.0523 11.4477 11.5 12 11.5C12.5523 11.5 13 11.0523 13 10.5V7ZM12 13C11.4477 13 11 13.4477 11 14C11 14.5523 11.4477 15 12 15H12.01C12.5623 15 13.01 14.5523 13.01 14C13.01 13.4477 12.5623 13 12.01 13H12Z" fill="#4CF490"></path></svg><p class="md-body-docs">Maincloud is now <b>LIVE</b>! Get Maincloud Energy 90% off until we run out!</p></div><form method="post" action="https://spacetimedb.com/api/announcement-banner"><button aria-label="Close announcement banner"><svg class="dismiss-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM15.7071 8.29289C16.0976 8.68342 16.0976 9.31658 15.7071 9.70711L13.4142 12L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L12 13.4142L9.70711 15.7071C9.31658 16.0976 8.68342 16.0976 8.29289 15.7071C7.90237 15.3166 7.90237 14.6834 8.29289 14.2929L10.5858 12L8.29289 9.70711C7.90237 9.31658 7.90237 8.68342 8.29289 8.29289C8.68342 7.90237 9.31658 7.90237 9.70711 8.29289L12 10.5858L14.2929 8.29289C14.6834 7.90237 15.3166 7.90237 15.7071 8.29289Z" fill="#A4CBB4"></path></svg></button></form></div></div></div><div class="wtWGoa_root"><div class="BPQwEa_inner" style="--padding:24px 0"><a class="BPQwEa_brand BPQwEa_hideMobile" data-discover="true" href="../home.html"><img src="../images/brand.png" alt="SpacetimeDB" width="390" height="96"/></a><a class="BPQwEa_logo BPQwEa_hideDesktop" data-discover="true" href="../home.html"><img src="../images/logo.png" alt="SpacetimeDB" width="36" height="36"/></a><div class="BPQwEa_versionTag text-value-3"><p>v1.1</p></div><nav class="BPQwEa_nav text-menu BPQwEa_hideMobile"><a data-discover="true" class="" href="../install.html">Install</a><a data-discover="true" class="" href="../pricing.html">Pricing</a><a data-discover="true" class="" href="../maincloud.html">Maincloud</a><a data-discover="true" aria-current="page" class="BPQwEa_active" href="../docs.html">Docs</a><a data-discover="true" class="" href="../blog.html">Blog</a><a data-discover="true" class="" href="../community.html">Community</a></nav><button cy-data="" class="GM6BWG_button GM6BWG_primary BPQwEa_hideMobile BPQwEa_starUsBtn text-menu" aria-label="16K stars" type="button"><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M8.12384 7.08774C7.87849 6.97075 7.59345 6.97075 7.3481 7.08774C7.136 7.18886 7.01906 7.36444 6.96009 7.46077C6.89912 7.56035 6.83654 7.6872 6.77554 7.81084L5.48033 10.4348L2.58314 10.8583C2.44676 10.8782 2.30682 10.8986 2.19332 10.9259C2.08351 10.9523 1.88049 11.0094 1.71892 11.1799C1.53201 11.3772 1.44411 11.6483 1.47969 11.9178C1.51044 12.1507 1.64133 12.316 1.71475 12.4018C1.79064 12.4905 1.89197 12.5892 1.99073 12.6854L4.08627 14.7264L3.59181 17.6093C3.56847 17.7452 3.54452 17.8847 3.53531 18.0011C3.52639 18.1137 3.51777 18.3245 3.62995 18.5311C3.7597 18.7699 3.99034 18.9375 4.25762 18.987C4.4887 19.0299 4.68654 18.9565 4.79087 18.9132C4.89875 18.8684 5.02397 18.8026 5.14603 18.7383L7.73597 17.3763L10.3259 18.7383C10.448 18.8026 10.5732 18.8685 10.6811 18.9132C10.7854 18.9565 10.9832 19.0299 11.2143 18.987C11.4816 18.9375 11.7122 18.7699 11.842 18.5311C11.9542 18.3245 11.9455 18.1137 11.9366 18.0011C11.9274 17.8847 11.9035 17.7453 11.8801 17.6093L11.3857 14.7264L13.4812 12.6853C13.58 12.5892 13.6813 12.4905 13.7572 12.4018C13.8306 12.316 13.9615 12.1507 13.9922 11.9178C14.0278 11.6483 13.9399 11.3772 13.753 11.1799C13.5914 11.0094 13.3884 10.9523 13.2786 10.9259C13.1651 10.8986 13.0252 10.8782 12.8888 10.8583L9.99161 10.4348L8.69642 7.81089C8.63542 7.68724 8.57282 7.56036 8.51185 7.46077C8.45288 7.36444 8.33594 7.18886 8.12384 7.08774Z" fill="currentColor" stroke="rgba(0, 0, 0, 0)" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="10" cy="4" r="2" fill="currentColor"></circle><circle cx="3.5" cy="5.5" r="1.5" fill="currentColor"></circle><circle cx="6" cy="1" r="1" fill="currentColor"></circle></svg>16K stars</button><a class="BPQwEa_hideMobile BPQwEa_loginBtn" data-discover="true" href="https://github.com/login/oauth/authorize?client_id=Iv23liKJqWZxDyNA4Y9G&amp;scope=read%3Auser+user%3Aemail&amp;redirect_uri=https%3A%2F%2Fspacetimedb.com%2Fapi%2Fauth%2Fgithub%2Fcallback&amp;state=01JTSFM2HKQ1NWZFHE4NZNGE5P&amp;allow_signup=true&amp;prompt=select_account">Login</a><button class="BPQwEa_burger" aria-label="Toggle navigation menu"><span></span></button></div></div></header><div class="BPQwEa_modal"><div class="BPQwEa_modalContainer"><nav class="BPQwEa_nav text-menu"><a data-discover="true" class="" href="../install.html">Install</a><a data-discover="true" class="" href="../pricing.html">Pricing</a><a data-discover="true" class="" href="../maincloud.html">Maincloud</a><a data-discover="true" aria-current="page" class="BPQwEa_active" href="../docs.html">Docs</a><a data-discover="true" class="" href="../blog.html">Blog</a><a data-discover="true" class="" href="../community.html">Community</a></nav><div class="BPQwEa_group"><div class="BPQwEa_communitySection"><h4 class="BPQwEa_title text-xs">Community</h4><div class="BPQwEa_socials"><a href="https://github.com/ClockworkLabs/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M10.041 0C4.519 0 0 4.519 0 10.041a10.03 10.03 0 0 0 6.862 9.539c.502.084.669-.251.669-.502v-1.674c-2.761.586-3.347-1.339-3.347-1.339-.418-1.171-1.088-1.506-1.088-1.506-1.004-.586 0-.586 0-.586 1.004.084 1.506 1.004 1.506 1.004.92 1.506 2.343 1.088 2.929.837.084-.669.335-1.088.669-1.339-2.259-.251-4.602-1.088-4.602-4.937a4.04 4.04 0 0 1 1.004-2.678c0-.335-.418-1.339.167-2.678 0 0 .837-.251 2.761 1.004.837-.251 1.674-.335 2.51-.335s1.674.084 2.51.335c1.925-1.339 2.761-1.004 2.761-1.004.586 1.423.167 2.427.084 2.678.669.669 1.004 1.59 1.004 2.678 0 3.849-2.343 4.686-4.602 4.937.335.335.669.92.669 1.841v2.761c0 .251.167.586.669.502a10.03 10.03 0 0 0 6.862-9.539C20.083 4.519 15.564 0 10.041 0z"></path></svg></a><a href="https://discord.gg/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M16.7 0c.27.001.537.054.786.158s.475.256.666.447.341.418.444.668.155.517.155.787h0V20l-2.15-1.9-1.21-1.117-1.28-1.19.53 1.85H3.3c-.27-.001-.537-.054-.786-.158s-.475-.256-.666-.447-.341-.418-.444-.668-.155-.517-.155-.787h0V2.06c-.001-.27.052-.537.155-.787s.253-.476.444-.668.417-.343.666-.447S3.03.001 3.3 0h0 13.4zm-5.05 4.66l-.14.16c.911.242 1.759.675 2.49 1.27a8.15 8.15 0 0 0-3.013-.963 8.46 8.46 0 0 0-2.02.02c-.056.002-.112.009-.167.02a7.51 7.51 0 0 0-2.27.633l-.59.29a6.75 6.75 0 0 1 2.637-1.31h0l-.1-.12c-1.023.051-2.005.417-2.81 1.05a13.39 13.39 0 0 0-1.44 5.833c.345.484.803.876 1.335 1.141s1.121.395 1.715.379l.667-.833a3.11 3.11 0 0 1-1.75-1.18c.357.239.739.437 1.14.59a8.39 8.39 0 0 0 1.467.43c.855.164 1.734.168 2.59.01a6.58 6.58 0 0 0 1.45-.43 5.72 5.72 0 0 0 1.15-.59c-.444.598-1.085 1.019-1.81 1.19l.07.088.142.177.448.545c.595.015 1.185-.115 1.718-.379s.994-.655 1.342-1.138a13.39 13.39 0 0 0-1.44-5.833c-.805-.633-1.787-.999-2.81-1.05h0zm.056 3.727l.134.003c.14.006.277.039.404.098s.241.142.336.245.168.224.216.355.07.271.064.411c0 .224-.068.444-.194.629s-.306.328-.515.41-.438.098-.656.047-.417-.166-.569-.332-.25-.372-.282-.594.004-.449.102-.65.256-.368.451-.479.419-.159.643-.14l-.134-.003zM8.19 8.39c.14.005.278.038.405.097a1.06 1.06 0 0 1 .553.601 1.06 1.06 0 0 1 .062.412l-.001.105c-.006.104-.027.208-.063.306-.048.131-.122.252-.216.355s-.209.187-.336.245-.264.092-.404.098c-.278-.024-.536-.152-.725-.357s-.293-.474-.293-.753.105-.548.293-.753.447-.333.725-.357z"></path></svg></a><a href="https://twitter.com/spacetime_db" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M20 3.833c-.75.333-1.5.583-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1-.75-.833-1.833-1.333-3-1.333A4.09 4.09 0 0 0 9.833 6c0 .333 0 .667.083.917-3.5-.167-6.5-1.833-8.5-4.333a3.76 3.76 0 0 0-.583 2.083c0 1.417.75 2.667 1.833 3.417-.667 0-1.333-.167-1.833-.5v.083c0 2 1.417 3.667 3.25 4-.333.083-.667.167-1.083.167-.25 0-.5 0-.75-.083a3.95 3.95 0 0 0 3.833 2.833c-1.417 1.083-3.167 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.667v-.5c.833-.583 1.5-1.333 2.083-2.083z"></path></svg></a><a href="https://www.twitch.tv/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M3.55263 0L0 3.57143V16.4286H4.26316V20L7.81579 16.4286H10.6579L17.0526 10V0H3.55263ZM15.6316 9.28571L12.7895 12.1429H9.94737L7.46053 14.6429V12.1429H4.26316V1.42857H15.6316V9.28571Z M13.5 3.92857H12.0789V8.21429H13.5V3.92857Z M9.59211 3.92857H8.17105V8.21429H9.59211V3.92857Z"></path></svg></a><a href="https://www.youtube.com/@SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M19.833 6S19.667 4.583 19 4c-.75-.833-1.583-.833-2-.833L10 3l-7 .167C2.583 3.25 1.75 3.25 1 4c-.583.583-.833 2-.833 2S0 7.583 0 9.25v1.5C0 12.333.167 14 .167 14s.167 1.417.833 2c.75.833 1.75.75 2.167.833C4.75 17 10 17 10 17l7-.25c.417-.083 1.25-.083 2-.833.583-.583.833-2 .833-2s.167-1.583.167-3.25v-1.5C20 7.583 19.833 6 19.833 6zM7.917 12.583V7l5.417 2.833-5.417 2.75z"></path></svg></a></div></div><div class="BPQwEa_buttons"><button cy-data="" class="GM6BWG_button GM6BWG_primary BPQwEa_starUsBtn BPQwEa_starUsBtnMobile text-menu" aria-label="16K stars" type="button"><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M8.12384 7.08774C7.87849 6.97075 7.59345 6.97075 7.3481 7.08774C7.136 7.18886 7.01906 7.36444 6.96009 7.46077C6.89912 7.56035 6.83654 7.6872 6.77554 7.81084L5.48033 10.4348L2.58314 10.8583C2.44676 10.8782 2.30682 10.8986 2.19332 10.9259C2.08351 10.9523 1.88049 11.0094 1.71892 11.1799C1.53201 11.3772 1.44411 11.6483 1.47969 11.9178C1.51044 12.1507 1.64133 12.316 1.71475 12.4018C1.79064 12.4905 1.89197 12.5892 1.99073 12.6854L4.08627 14.7264L3.59181 17.6093C3.56847 17.7452 3.54452 17.8847 3.53531 18.0011C3.52639 18.1137 3.51777 18.3245 3.62995 18.5311C3.7597 18.7699 3.99034 18.9375 4.25762 18.987C4.4887 19.0299 4.68654 18.9565 4.79087 18.9132C4.89875 18.8684 5.02397 18.8026 5.14603 18.7383L7.73597 17.3763L10.3259 18.7383C10.448 18.8026 10.5732 18.8685 10.6811 18.9132C10.7854 18.9565 10.9832 19.0299 11.2143 18.987C11.4816 18.9375 11.7122 18.7699 11.842 18.5311C11.9542 18.3245 11.9455 18.1137 11.9366 18.0011C11.9274 17.8847 11.9035 17.7453 11.8801 17.6093L11.3857 14.7264L13.4812 12.6853C13.58 12.5892 13.6813 12.4905 13.7572 12.4018C13.8306 12.316 13.9615 12.1507 13.9922 11.9178C14.0278 11.6483 13.9399 11.3772 13.753 11.1799C13.5914 11.0094 13.3884 10.9523 13.2786 10.9259C13.1651 10.8986 13.0252 10.8782 12.8888 10.8583L9.99161 10.4348L8.69642 7.81089C8.63542 7.68724 8.57282 7.56036 8.51185 7.46077C8.45288 7.36444 8.33594 7.18886 8.12384 7.08774Z" fill="currentColor" stroke="rgba(0, 0, 0, 0)" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="10" cy="4" r="2" fill="currentColor"></circle><circle cx="3.5" cy="5.5" r="1.5" fill="currentColor"></circle><circle cx="6" cy="1" r="1" fill="currentColor"></circle></svg>16K stars</button></div><div class="BPQwEa_buttons"><a cy-data="" aria-label="try the demo" class="GM6BWG_button GM6BWG_secondary text-menu" type="button" data-discover="true" href="subscriptions.html#demo" target=""><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M10.108 1.55c4.611 0 8.35 3.741 8.35 8.35h0v.208a8.36 8.36 0 0 1-8.35 8.35h0H9.9c-4.611 0-8.35-3.741-8.35-8.35h0V9.9c0-4.611 3.741-8.35 8.35-8.35h0zm0 1.5H9.9c-3.78 0-6.85 3.067-6.85 6.85h0v.208c0 3.78 3.067 6.85 6.85 6.85h0 .208a6.86 6.86 0 0 0 6.85-6.85h0V9.9c0-3.78-3.067-6.85-6.85-6.85h0zm.864 4.29l.084.073 2.048 2.056h0a.75.75 0 0 1 .108.136.74.74 0 0 1 .03.052c.006.012.012.024.017.036.011.024.02.048.028.072a.76.76 0 0 1 .009.031.75.75 0 0 1 .018.08.76.76 0 0 1 .005.034.75.75 0 0 1 .005.069c0 .016 0 .033 0 .049-.001.022-.003.043-.005.065-.002.015-.004.03-.007.045-.005.026-.011.051-.018.077a.73.73 0 0 1-.009.028.75.75 0 0 1-.033.082c-.003.007-.007.014-.01.021-.02.04-.045.078-.073.115l-.062.07-2.05 2.058a.75.75 0 0 1-1.135-.974l.072-.084.775-.779H7.425a.75.75 0 0 1-.102-1.493l.102-.007h3.345l-.776-.779a.75.75 0 0 1 .979-1.131z"></path></svg>try the demo</a><a cy-data="" aria-label="install" class="GM6BWG_button GM6BWG_primary text-menu" type="button" data-discover="true" href="../install.html" target=""><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M15.333 6.25c1.703 0 3.069 1.339 3.162 3.064l.005.186v5.75c0 1.752-1.307 3.151-2.985 3.245l-.181.005H4.583c-1.703 0-3.07-1.339-3.162-3.064l-.005-.186V9.5c0-1.814 1.403-3.25 3.167-3.25a.75.75 0 1 1 0 1.5c-.879 0-1.588.679-1.661 1.595l-.006.155v5.75c0 .941.663 1.67 1.522 1.744l.145.006h10.75c.879 0 1.588-.679 1.661-1.595L17 15.25V9.5c0-.993-.739-1.75-1.667-1.75a.75.75 0 1 1 0-1.5zM9.377 9.854L7.044 7.438a.75.75 0 0 1 .996-1.116l.083.074 1.043 1.081v-5.06a.75.75 0 0 1 1.493-.102l.007.102v5.105l1.136-1.135a.75.75 0 0 1 1.133.977l-.073.084-2.417 2.417h0l-.009.009h0l-.025.023-.045.037-.005.004-.013.007-.007.007-.063.039-.022.012-.037.018-.024.01-.022.008-.023.008-.031.009-.047.011-.027.005-.052.007-.047.003h-.029l-.038-.001-.04-.003-.024-.003h0l-.014-.002-.028-.005-.04-.009-.038-.011-.026-.009-.031-.011-.049-.022-.038-.02a.72.72 0 0 1-.061-.038l-.024-.017c-.028-.021-.054-.044-.079-.069l-.009-.009z"></path></svg>install</a></div><div class="BPQwEa_background"><img src="../images/space-time-astrolabe.jpg" alt="Astrolabe" loading="lazy" width="1616" height="2444"/></div></div></div></div><div class="wtWGoa_root" style="padding-top:144px"><div class="_1ZGmjW_root _1ZGmjW_visible FTy4tq_layoutContainer"><nav class="_7MaBSq_sidebar"><a class="_7MaBSq_pageTitle" data-discover="true" href="ai-chat.html">Ask AI Chat</a><p class="_7MaBSq_sectionTitle">Intro</p><a class="_7MaBSq_pageTitle" data-discover="true" href="../docs.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="getting-started.html">Getting Started</a><p class="_7MaBSq_sectionTitle">Deploying</p><a class="_7MaBSq_pageTitle" data-discover="true" href="deploying/maincloud.html">Maincloud</a><a class="_7MaBSq_pageTitle" data-discover="true" href="deploying/spacetimedb-standalone.html">Self-Hosting SpacetimeDB</a><p class="_7MaBSq_sectionTitle">Unity Tutorial - Basic Multiplayer</p><a class="_7MaBSq_pageTitle" data-discover="true" href="unity.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="unity/part-1.html">1 - Setup</a><a class="_7MaBSq_pageTitle" data-discover="true" href="unity/part-2.html">2 - Connecting to SpacetimeDB</a><a class="_7MaBSq_pageTitle" data-discover="true" href="unity/part-3.html">3 - Gameplay</a><a class="_7MaBSq_pageTitle" data-discover="true" href="unity/part-4.html">4 - Moving and Colliding</a><p class="_7MaBSq_sectionTitle">CLI Reference</p><a class="_7MaBSq_pageTitle" data-discover="true" href="cli-reference.html">CLI Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="cli-reference/standalone-config.html">SpacetimeDB Standalone Configuration</a><p class="_7MaBSq_sectionTitle">Server Module Languages</p><a class="_7MaBSq_pageTitle" data-discover="true" href="modules.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="modules/rust/quickstart.html">Rust Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="modules/rust.html">Rust Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="modules/c-sharp/quickstart.html">C# Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="modules/c-sharp.html">C# Reference</a><p class="_7MaBSq_sectionTitle">Client SDK Languages</p><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks.html">Overview</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks/c-sharp/quickstart.html">C# Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks/c-sharp.html">C# Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks/rust/quickstart.html">Rust Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks/rust.html">Rust Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks/typescript/quickstart.html">TypeScript Quickstart</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sdks/typescript.html">TypeScript Reference</a><p class="_7MaBSq_sectionTitle">SQL</p><a class="_7MaBSq_pageTitle" data-discover="true" href="sql.html">SQL Reference</a><p class="_7MaBSq_sectionTitle">Subscriptions</p><a class="_7MaBSq_pageTitle _7MaBSq_active" data-discover="true" href="subscriptions.html">Subscription Reference</a><p class="_7MaBSq_sectionTitle">Row Level Security</p><a class="_7MaBSq_pageTitle" data-discover="true" href="rls.html">Row Level Security</a><p class="_7MaBSq_sectionTitle">How To</p><a class="_7MaBSq_pageTitle" data-discover="true" href="how-to/incremental-migrations.html">Incremental Migrations</a><p class="_7MaBSq_sectionTitle">HTTP API</p><a class="_7MaBSq_pageTitle" data-discover="true" href="http/authorization.html">Authorization</a><a class="_7MaBSq_pageTitle" data-discover="true" href="http/identity.html">`/identity`</a><a class="_7MaBSq_pageTitle" data-discover="true" href="http/database.html">`/database`</a><p class="_7MaBSq_sectionTitle">Internals</p><a class="_7MaBSq_pageTitle" data-discover="true" href="webassembly-abi.html">Module ABI Reference</a><a class="_7MaBSq_pageTitle" data-discover="true" href="sats-json.html">SATS-JSON Data Format</a><a class="_7MaBSq_pageTitle" data-discover="true" href="bsatn.html">BSATN Data Format</a><p class="_7MaBSq_sectionTitle">Appendix</p><a class="_7MaBSq_pageTitle" data-discover="true" href="appendix.html">Appendix</a></nav><div class="WT-eTq_content"><div><article class="sc30Jq_mdc md-body-docs line-break"><h2 id="the-spacetimedb-subscription-api">The SpacetimeDB Subscription API<a href="#the-spacetimedb-subscription-api" class="permalink"><span class="visually-hidden"></span></a></h2><p>The subscription API allows a client to replicate a subset of a database.
It does so by registering SQL queries, which we call subscriptions, through a database connection.
A client will only receive updates for rows that match the subscriptions it has registered.</p>
<p>For more information on syntax and requirements see the <a href="sql.html#subscriptions">SQL docs</a>.</p>
<p>This guide describes the two main interfaces that comprise the API - <code>SubscriptionBuilder</code> and <code>SubscriptionHandle</code>.
By using these interfaces, you can create efficient and responsive client applications that only receive the data they need.</p>
<h3 id="subscriptionbuilder">SubscriptionBuilder<a href="#subscriptionbuilder" class="permalink"><span class="visually-hidden"></span></a></h3>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> struct</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">M</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> SpacetimeModule</span><span style="color:#F8F8F2">> { </span><span style="color:#6272A4">/* private fields */</span><span style="color:#F8F8F2"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">M</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> SpacetimeModule</span><span style="color:#F8F8F2">> </span><span style="color:#8BE9FD;font-style:italic">SubscriptionBuilder</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">M</span><span style="color:#F8F8F2">> {</span></span>
<span class="line"><span style="color:#6272A4">    /// Register a callback that runs when the subscription has been applied.</span></span>
<span class="line"><span style="color:#6272A4">    /// This callback receives a context containing the current state of the subscription.</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> on_applied</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">mut</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">M</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SubscriptionEventContext</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">+</span><span style="color:#8BE9FD;font-style:italic"> Send</span><span style="color:#FF79C6"> +</span><span style="color:#F8F8F2"> '</span><span style="color:#8BE9FD;font-style:italic">static</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Register a callback to run when the subscription fails.</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// Note that this callback may run either when attempting to apply the subscription,</span></span>
<span class="line"><span style="color:#6272A4">    /// in which case [`Self::on_applied`] will never run,</span></span>
<span class="line"><span style="color:#6272A4">    /// or later during the subscription's lifetime if the module's interface changes,</span></span>
<span class="line"><span style="color:#6272A4">    /// in which case [`Self::on_applied`] may have already run.</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> on_error</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">mut</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">M</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ErrorContext</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">crate::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">+</span><span style="color:#8BE9FD;font-style:italic"> Send</span><span style="color:#FF79C6"> +</span><span style="color:#F8F8F2"> '</span><span style="color:#8BE9FD;font-style:italic">static</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Subscribe to a subset of the database via a set of SQL queries.</span></span>
<span class="line"><span style="color:#6272A4">    /// Returns a handle which you can use to monitor or drop the subscription later.</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> subscribe</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">Queries</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> IntoQueries</span><span style="color:#F8F8F2">>(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, query_sql</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Queries</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#F8F8F2"> M</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SubscriptionHandle</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Subscribe to all rows from all tables.</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// This method is intended as a convenience</span></span>
<span class="line"><span style="color:#6272A4">    /// for applications where client-side memory use and network bandwidth are not concerns.</span></span>
<span class="line"><span style="color:#6272A4">    /// Applications where these resources are a constraint</span></span>
<span class="line"><span style="color:#6272A4">    /// should register more precise queries via [`Self::subscribe`]</span></span>
<span class="line"><span style="color:#6272A4">    /// in order to replicate only the subset of data which the client needs to function.</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> subscribe_to_all_tables</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/// Types which specify a list of query strings.</span></span>
<span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> trait</span><span style="color:#8BE9FD;font-style:italic"> IntoQueries</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> into_queries</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> Box</span><span style="color:#F8F8F2">&#x3C;[</span><span style="color:#8BE9FD;font-style:italic">Box</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">str</span><span style="color:#F8F8F2">>]>;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> sealed</span><span style="color:#FF79C6"> class</span><span style="color:#8BE9FD"> SubscriptionBuilder</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">    /// Register a callback to run when the subscription is applied.</span></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#50FA7B"> OnApplied</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        Action</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">SubscriptionEventContext</span><span style="color:#F8F8F2">> </span><span style="color:#FFB86C;font-style:italic">callback</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">    /// Register a callback to run when the subscription fails.</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// Note that this callback may run either when attempting to apply the subscription,</span></span>
<span class="line"><span style="color:#6272A4">    /// in which case </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">c</span><span style="color:#F8F8F2">></span><span style="color:#6272A4">Self::on_applied</span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">c</span><span style="color:#F8F8F2">></span><span style="color:#6272A4"> will never run,</span></span>
<span class="line"><span style="color:#6272A4">    /// or later during the subscription's lifetime if the module's interface changes,</span></span>
<span class="line"><span style="color:#6272A4">    /// in which case </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">c</span><span style="color:#F8F8F2">></span><span style="color:#6272A4">Self::on_applied</span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">c</span><span style="color:#F8F8F2">></span><span style="color:#6272A4"> may have already run.</span></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#50FA7B"> OnError</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        Action</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">ErrorContext</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Exception</span><span style="color:#F8F8F2">> </span><span style="color:#FFB86C;font-style:italic">callback</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">    /// Subscribe to the following SQL queries.</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// This method returns immediately, with the data not yet added to the DbConnection.</span></span>
<span class="line"><span style="color:#6272A4">    /// The provided callbacks will be invoked once the data is returned from the remote server.</span></span>
<span class="line"><span style="color:#6272A4">    /// Data from all the provided queries will be returned at the same time.</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// See the SpacetimeDB SQL docs for more information on SQL syntax:</span></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">a</span><span style="color:#50FA7B;font-style:italic"> href</span><span style="color:#6272A4">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">https://spacetimedb.com/docs/sql</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">></span><span style="color:#6272A4">https://spacetimedb.com/docs/sql</span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">a</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#50FA7B"> Subscribe</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FF79C6">        string</span><span style="color:#F8F8F2">[] </span><span style="color:#FFB86C;font-style:italic">querySqls</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">    /// Subscribe to all rows from all tables.</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// This method is intended as a convenience</span></span>
<span class="line"><span style="color:#6272A4">    /// for applications where client-side memory use and network bandwidth are not concerns.</span></span>
<span class="line"><span style="color:#6272A4">    /// Applications where these resources are a constraint</span></span>
<span class="line"><span style="color:#6272A4">    /// should register more precise queries via </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">c</span><span style="color:#F8F8F2">></span><span style="color:#6272A4">Self.Subscribe</span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">c</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">    /// in order to replicate only the subset of data which the client needs to function.</span></span>
<span class="line"><span style="color:#6272A4">    /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> SubscribeToAllTables</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <p>A <code>SubscriptionBuilder</code> provides an interface for registering subscription queries with a database.
It allows you to register callbacks that run when the subscription is successfully applied or when an error occurs.
Once applied, a client will start receiving row updates to its client cache.
A client can react to these updates by registering row callbacks for the appropriate table.</p>
<h4 id="example-usage">Example Usage<a href="#example-usage" class="permalink"><span class="visually-hidden"></span></a></h4>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Establish a database connection</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> conn</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#FF79C6"> =</span><span style="color:#50FA7B"> connect_to_db</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Register a subscription with the database</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> subscription_handle </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">on_applied</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2">ctx</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle applied state */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">on_error</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2">error_ctx, error</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle error */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span><span style="color:#F1FA8C">"SELECT * FROM user"</span><span style="color:#F8F8F2">, </span><span style="color:#F1FA8C">"SELECT * FROM message"</span><span style="color:#F8F8F2">]);</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Establish a database connection</span></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> conn </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> ConnectToDB</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Register a subscription with the database</span></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> userSubscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">OnApplied</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">ctx</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle applied state */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">OnError</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">errorCtx</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">error</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle error */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] { </span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">SELECT * FROM user</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">SELECT * FROM message</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2"> });</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <h3 id="subscriptionhandle">SubscriptionHandle<a href="#subscriptionhandle" class="permalink"><span class="visually-hidden"></span></a></h3>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">pub</span><span style="color:#FF79C6"> trait</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> InModule</span><span style="color:#FF79C6"> +</span><span style="color:#8BE9FD;font-style:italic"> Clone</span><span style="color:#FF79C6"> +</span><span style="color:#8BE9FD;font-style:italic"> Send</span><span style="color:#FF79C6"> +</span><span style="color:#F8F8F2"> '</span><span style="color:#8BE9FD;font-style:italic">static</span></span>
<span class="line"><span style="color:#FF79C6">where</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Module</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> SpacetimeModule</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">SubscriptionHandle</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2">>,</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#6272A4">    /// Returns `true` if the subscription has been ended.</span></span>
<span class="line"><span style="color:#6272A4">    /// That is, if it has been unsubscribed or terminated due to an error.</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> is_ended</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> bool</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Returns `true` if the subscription is currently active.</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> is_active</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#8BE9FD;font-style:italic"> bool</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Unsubscribe from the query controlled by this `SubscriptionHandle`,</span></span>
<span class="line"><span style="color:#6272A4">    /// then run `on_end` when its rows are removed from the client cache.</span></span>
<span class="line"><span style="color:#6272A4">    /// Returns an error if the subscription is already ended,</span></span>
<span class="line"><span style="color:#6272A4">    /// or if unsubscribe has already been called.</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> unsubscribe_then</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, on_end</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> OnEndedCallback</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Module</span><span style="color:#F8F8F2">>) </span><span style="color:#FF79C6">-></span><span style="color:#FF79C6"> crate::</span><span style="color:#8BE9FD;font-style:italic">Result</span><span style="color:#F8F8F2">&#x3C;()>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Unsubscribe from the query controlled by this `SubscriptionHandle`.</span></span>
<span class="line"><span style="color:#6272A4">    /// Returns an error if the subscription is already ended,</span></span>
<span class="line"><span style="color:#6272A4">    /// or if unsubscribe has already been called.</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> unsubscribe</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-></span><span style="color:#FF79C6"> crate::</span><span style="color:#8BE9FD;font-style:italic">Result</span><span style="color:#F8F8F2">&#x3C;()>;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">    public</span><span style="color:#FF79C6"> class</span><span style="color:#8BE9FD"> SubscriptionHandle</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FFB86C;font-style:italic">SubscriptionEventContext</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">ErrorContext</span><span style="color:#F8F8F2">> : </span><span style="color:#8BE9FD;font-style:italic">ISubscriptionHandle</span></span>
<span class="line"><span style="color:#FF79C6">        where</span><span style="color:#FFB86C;font-style:italic"> SubscriptionEventContext</span><span style="color:#F8F8F2"> : </span><span style="color:#8BE9FD;font-style:italic">ISubscriptionEventContext</span></span>
<span class="line"><span style="color:#FF79C6">        where</span><span style="color:#FFB86C;font-style:italic"> ErrorContext</span><span style="color:#F8F8F2"> : </span><span style="color:#8BE9FD;font-style:italic">IErrorContext</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">        /// Whether the subscription has ended.</span></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">        public</span><span style="color:#FF79C6"> bool</span><span style="color:#F8F8F2"> IsEnded;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">        /// Whether the subscription is active.</span></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">        public</span><span style="color:#FF79C6"> bool</span><span style="color:#F8F8F2"> IsActive;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">        /// Unsubscribe from the query controlled by this subscription handle.</span></span>
<span class="line"><span style="color:#6272A4">        /// </span></span>
<span class="line"><span style="color:#6272A4">        /// Calling this more than once will result in an exception.</span></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">        public</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> Unsubscribe</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#6272A4">        /// Unsubscribe from the query controlled by this subscription handle,</span></span>
<span class="line"><span style="color:#6272A4">        /// and call onEnded when its rows are removed from the client cache.</span></span>
<span class="line"><span style="color:#6272A4">        /// </span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">        public</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> UnsubscribeThen</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">Action</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">SubscriptionEventContext</span><span style="color:#F8F8F2">>? </span><span style="color:#FFB86C;font-style:italic">onEnded</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <p>When you register a subscription, you receive a <code>SubscriptionHandle</code>.
A <code>SubscriptionHandle</code> manages the lifecycle of each subscription you register.
In particular, it provides methods to check the status of the subscription and to unsubscribe if necessary.
Because each subscription has its own independently managed lifetime,
clients can dynamically subscribe to different subsets of the database as their application requires.</p>
<h4 id="example-usage-1">Example Usage<a href="#example-usage-1" class="permalink"><span class="visually-hidden"></span></a></h4>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                <p>Consider a game client that displays shop items and discounts based on a player&#39;s level.
You subscribe to <code>shop_items</code> and <code>shop_discounts</code> when a player is at level 5:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> conn</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#FF79C6"> =</span><span style="color:#50FA7B"> connect_to_db</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> shop_items_subscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">on_applied</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2">ctx</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle applied state */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">on_error</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2">error_ctx, error</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle error */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_items WHERE required_level &#x3C;= 5"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_discounts WHERE required_level &#x3C;= 5"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Later, when the player reaches level 6 and new items become available,
you can subscribe to the new queries and unsubscribe from the old ones:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> new_shop_items_subscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">on_applied</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2">ctx</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle applied state */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">on_error</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2">error_ctx, error</span><span style="color:#FF79C6">|</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle error */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_items WHERE required_level &#x3C;= 6"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_discounts WHERE required_level &#x3C;= 6"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> shop_items_subscription</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">is_active</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">    shop_items_subscription</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">unsubscribe</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">expect</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">"Unsubscribing from shop_items failed"</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>All other subscriptions continue to remain in effect.</p>

            </div>
            <div class="lang-block" data-lang="C#">
                <p>Consider a game client that displays shop items and discounts based on a player&#39;s level.
You subscribe to <code>shop_items</code> and <code>shop_discounts</code> when a player is at level 5:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> conn </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> ConnectToDB</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> shopItemsSubscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">OnApplied</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">ctx</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle applied state */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">OnError</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">errorCtx</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">error</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle error */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] {</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_items WHERE required_level &#x3C;= 5</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_discounts WHERE required_level &#x3C;= 5</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Later, when the player reaches level 6 and new items become available,
you can subscribe to the new queries and unsubscribe from the old ones:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> newShopItemsSubscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">OnApplied</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">ctx</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle applied state */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">OnError</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">errorCtx</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">error</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">/* handle error */</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] {</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_items WHERE required_level &#x3C;= 6</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_discounts WHERE required_level &#x3C;= 6</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> (shopItemsSubscription.IsActive)</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">    shopItemsSubscription.</span><span style="color:#50FA7B">Unsubscribe</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>All other subscriptions continue to remain in effect.</p>

            </div>
        </div>
        <h3 id="best-practices-for-optimizing-server-compute-and-reducing-serialization-overhead">Best Practices for Optimizing Server Compute and Reducing Serialization Overhead<a href="#best-practices-for-optimizing-server-compute-and-reducing-serialization-overhead" class="permalink"><span class="visually-hidden"></span></a></h3><h4 id="1-writing-efficient-sql-queries">1. Writing Efficient SQL Queries<a href="#1-writing-efficient-sql-queries" class="permalink"><span class="visually-hidden"></span></a></h4><p>For writing efficient SQL queries, see our <a href="sql.html#best-practices-for-performance-and-scalability">SQL Best Practices Guide</a>.</p>
<h4 id="2-group-subscriptions-with-the-same-lifetime-together">2. Group Subscriptions with the Same Lifetime Together<a href="#2-group-subscriptions-with-the-same-lifetime-together" class="permalink"><span class="visually-hidden"></span></a></h4><p>Subscriptions with the same lifetime should be grouped together.</p>
<p>For example, you may have certain data that is required for the lifetime of your application,
but you may have other data that is only sometimes required by your application.</p>
<p>By managing these sets as two independent subscriptions,
your application can subscribe and unsubscribe from the latter,
without needlessly unsubscribing and resubscribing to the former.</p>
<p>This will improve throughput by reducing the amount of data transferred from the database to your application.</p>
<h5 id="example">Example<a href="#example" class="permalink"><span class="visually-hidden"></span></a></h5>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> conn</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#FF79C6"> =</span><span style="color:#50FA7B"> connect_to_db</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Never need to unsubscribe from global subscriptions</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> global_subscriptions </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#6272A4">        // Global messages the client should always display</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM announcements"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">        // A description of rewards for in-game achievements</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM badges"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// May unsubscribe to shop_items as player advances</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> shop_subscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_items WHERE required_level &#x3C;= 5"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> conn </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> ConnectToDB</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Never need to unsubscribe from global subscriptions</span></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> globalSubscriptions </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] {</span></span>
<span class="line"><span style="color:#6272A4">        // Global messages the client should always display</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM announcements</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">        // A description of rewards for in-game achievements</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM badges</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// May unsubscribe to shop_items as player advances</span></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> shopSubscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] {</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_items WHERE required_level &#x3C;= 5</span><span style="color:#E9F284">"</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <h4 id="3-subscribe-before-unsubscribing">3. Subscribe Before Unsubscribing<a href="#3-subscribe-before-unsubscribing" class="permalink"><span class="visually-hidden"></span></a></h4><p>If you want to update or modify a subscription by dropping it and subscribing to a new set,
you should subscribe to the new set before unsubscribing from the old one.</p>
<p>This is because SpacetimeDB subscriptions are zero-copy.
Subscribing to the same query more than once doesn&#39;t incur additional processing or serialization overhead.
Likewise, if a query is subscribed to more than once,
unsubscribing from it does not result in any server processing or data serializtion.</p>
<h5 id="example-1">Example<a href="#example-1" class="permalink"><span class="visually-hidden"></span></a></h5>
        <div class="lang-group">
            <div class="lang-tabs">
                <span class="lang-tabs-title"></span>
                <button class="tab-btn" data-lang="Rust">Rust</button><button class="tab-btn" data-lang="C#">C#</button>
            </div>
            
            <div class="lang-block" data-lang="Rust">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> conn</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#FF79C6"> =</span><span style="color:#50FA7B"> connect_to_db</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Initial subscription: player at level 5.</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> shop_subscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#6272A4">        // For displaying the price of shop items in the player's currency of choice</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM exchange_rates"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_items WHERE required_level &#x3C;= 5"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// New subscription: player now at level 6, which overlaps with the previous query.</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> new_shop_subscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscription_builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">    .</span><span style="color:#50FA7B">subscribe</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#6272A4">        // For displaying the price of shop items in the player's currency of choice</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM exchange_rates"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F1FA8C">        "SELECT * FROM shop_items WHERE required_level &#x3C;= 6"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Unsubscribe from the old subscription once the new one is active.</span></span>
<span class="line"><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> shop_subscription</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">is_active</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">    shop_subscription</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">unsubscribe</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
            <div class="lang-block" data-lang="C#">
                
<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> conn </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> ConnectToDB</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Initial subscription: player at level 5.</span></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> shopSubscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] {</span></span>
<span class="line"><span style="color:#6272A4">        // For displaying the price of shop items in the player's currency of choice</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM exchange_rates</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_items WHERE required_level &#x3C;= 5</span><span style="color:#E9F284">"</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// New subscription: player now at level 6, which overlaps with the previous query.</span></span>
<span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> newShopSubscription </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">SubscriptionBuilder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#50FA7B">Subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">new</span><span style="color:#FF79C6"> string</span><span style="color:#F8F8F2">[] {</span></span>
<span class="line"><span style="color:#6272A4">        // For displaying the price of shop items in the player's currency of choice</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM exchange_rates</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        "</span><span style="color:#F1FA8C">SELECT * FROM shop_items WHERE required_level &#x3C;= 6</span><span style="color:#E9F284">"</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Unsubscribe from the old subscription once the new one is in place.</span></span>
<span class="line"><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> (shopSubscription.IsActive)</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">    shopSubscription.</span><span style="color:#50FA7B">Unsubscribe</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre>
            </div>
        </div>
        <h4 id="4-avoid-overlapping-queries">4. Avoid Overlapping Queries<a href="#4-avoid-overlapping-queries" class="permalink"><span class="visually-hidden"></span></a></h4><p>This refers to distinct queries that return intersecting data sets,
which can result in the server processing and serializing the same row multiple times.
While SpacetimeDB can manage this redundancy, it may lead to unnecessary inefficiencies.</p>
<p>Consider the following two queries:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> User</span></span>
<span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> User </span><span style="color:#FF79C6">WHERE</span><span style="color:#F8F8F2"> id </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 5</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>If <code>User.id</code> is a unique or primary key column,
the cost of subscribing to both queries is minimal.
This is because the server will use an index when processing the 2nd query,
and it will only serialize a single row for the 2nd query.</p>
<p>In contrast, consider these two queries:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> User</span></span>
<span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> User </span><span style="color:#FF79C6">WHERE</span><span style="color:#F8F8F2"> id </span><span style="color:#FF79C6">!=</span><span style="color:#BD93F9"> 5</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>The server must now process each row of the <code>User</code> table twice,
since the 2nd query cannot be processed using an index.
It must also serialize all but one row of the <code>User</code> table twice,
due to the significant overlap between the two queries.</p>
<p>By following these best practices, you can optimize your data replication strategy and ensure your application remains efficient and responsive.</p>
</article></div><div class="WT-eTq_bottomDocContent"><div class="WT-eTq_actions"><a class="WT-eTq_prev" data-discover="true" href="sql.html"><p class="WT-eTq_sub">Previous</p><p class="WT-eTq_title">SQL Reference</p></a><a class="WT-eTq_next" data-discover="true" href="rls.html"><p class="WT-eTq_sub">Next</p><p class="WT-eTq_title">Row Level Security</p></a></div></div><a class="WT-eTq_githubEditStyled" rel="noreferrer" href="https://github.com/clockworklabs/spacetime-docs/edit/master/docs/subscriptions/index.md" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="white" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"></path></svg>Edit On Github</a></div></div></div><!--$--><!--/$--></div></div><script>((STORAGE_KEY, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({
        key
      }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(STORAGE_KEY);
    }
  })("positions", null)</script><link rel="modulepreload" href="../assets/entry.client-BGtfi_QV.js"/><link rel="modulepreload" href="../assets/jsx-runtime-B8m6gtXl.js"/><link rel="modulepreload" href="../assets/index-Gwz8MVWd.js"/><link rel="modulepreload" href="../assets/index-DQRDp3BA.js"/><link rel="modulepreload" href="../assets/components-DZQBhqap.js"/><link rel="modulepreload" href="../assets/index-BtvcE26l.js"/><link rel="modulepreload" href="../assets/Layout-BdLUilQM.js"/><link rel="modulepreload" href="../assets/preload-helper-D21cck6N.js"/><link rel="modulepreload" href="../assets/client-only-wNC5TimA.js"/><link rel="modulepreload" href="../assets/Container-DsvKPwib.js"/><link rel="modulepreload" href="../assets/clsx-BeLtu-UY.js"/><link rel="modulepreload" href="../assets/Icon-mnw7YCvf.js"/><link rel="modulepreload" href="../assets/socials-pIkfUSDw.js"/><link rel="modulepreload" href="../assets/index-ZcNkxdux.js"/><link rel="modulepreload" href="../assets/Button-BsQzyESB.js"/><link rel="modulepreload" href="../assets/root-B5VLWL4p.js"/><link rel="modulepreload" href="../assets/route-BN3e8Fjz.js"/><link rel="modulepreload" href="../assets/ScrollAnimation-CzbpuesT.js"/><link rel="modulepreload" href="../assets/route-DJZPQN6P.js"/><link rel="modulepreload" href="../assets/route-Xb11ex6F.js"/><link rel="modulepreload" href="../assets/MDComponent-S1Ei_Xtk.js"/><link rel="modulepreload" href="../assets/route-BsjcODbm.js"/><script>window.__remixContext = {"basename":"/","future":{"v3_fetcherPersist":true,"v3_relativeSplatPath":true,"v3_throwAbortReason":true,"v3_routeConfig":true,"v3_singleFetch":true,"v3_lazyRouteDiscovery":true,"unstable_optimizeDeps":true},"isSpaMode":false};window.__remixContext.stream = new ReadableStream({start(controller){window.__remixContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">;
import * as route0 from "/assets/root-B5VLWL4p.js";
import * as route1 from "/assets/route-BN3e8Fjz.js";
import * as route2 from "/assets/route-DJZPQN6P.js";
import * as route3 from "/assets/route-BsjcODbm.js";
window.__remixManifest = {
  "entry": {
    "module": "/assets/entry.client-BGtfi_QV.js",
    "imports": [
      "/assets/jsx-runtime-B8m6gtXl.js",
      "../assets/index-Gwz8MVWd.js",
      "../assets/index-DQRDp3BA.js",
      "../assets/components-DZQBhqap.js"
    ],
    "css": []
  },
  "routes": {
    "root": {
      "id": "root",
      "path": "",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/root-B5VLWL4p.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/index-Gwz8MVWd.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-BtvcE26l.js",
        "../assets/Layout-BdLUilQM.js",
        "../assets/preload-helper-D21cck6N.js",
        "../assets/client-only-wNC5TimA.js",
        "../assets/Container-DsvKPwib.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/socials-pIkfUSDw.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/Button-BsQzyESB.js"
      ],
      "css": [
        "/assets/root-DgiNzMOf.css",
        "../assets/Layout-CTL7f1Hd.css",
        "../assets/Container-_6nMI5g_.css",
        "../assets/Button-C8_kLgtz.css"
      ]
    },
    "routes/_marketing": {
      "id": "routes/_marketing",
      "parentId": "root",
      "hasAction": false,
      "hasLoader": false,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-BN3e8Fjz.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/Layout-BdLUilQM.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/preload-helper-D21cck6N.js",
        "../assets/client-only-wNC5TimA.js",
        "../assets/Container-DsvKPwib.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/socials-pIkfUSDw.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/Button-BsQzyESB.js",
        "../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/Layout-CTL7f1Hd.css",
        "../assets/Container-_6nMI5g_.css",
        "../assets/Button-C8_kLgtz.css"
      ]
    },
    "routes/_marketing.docs": {
      "id": "routes/_marketing.docs",
      "parentId": "routes/_marketing",
      "path": "docs",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-DJZPQN6P.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/ScrollAnimation-CzbpuesT.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-DfbkRanz.css",
        "../assets/ScrollAnimation-HNI5Nioi.css"
      ]
    },
    "routes/_marketing.docs.$": {
      "id": "routes/_marketing.docs.$",
      "parentId": "routes/_marketing.docs",
      "path": "*",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-BsjcODbm.js",
      "imports": [
        "/assets/route-Xb11ex6F.js",
        "../assets/jsx-runtime-B8m6gtXl.js",
        "../assets/MDComponent-S1Ei_Xtk.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/index-BtvcE26l.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-DPGvI9WQ.css",
        "../assets/MDComponent-CdQtYgZs.css"
      ]
    },
    "routes/_marketing._index": {
      "id": "routes/_marketing._index",
      "parentId": "routes/_marketing",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-D1GAktaa.js",
      "imports": [
        "/assets/route-BjgmKHBp.js",
        "../assets/jsx-runtime-B8m6gtXl.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/ScrollAnimation-CzbpuesT.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/Section-YFQuzqA2.js",
        "../assets/Button-BsQzyESB.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-Gwz8MVWd.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/Modal-Drq6A6PB.js",
        "../assets/preload-helper-D21cck6N.js",
        "../assets/IllustrationSection-CYB1aQb8.js",
        "../assets/Hero-CQn9OGBR.js"
      ],
      "css": [
        "/assets/route-BD-0frUD.css",
        "../assets/ScrollAnimation-HNI5Nioi.css",
        "../assets/Section-BU2yo9B_.css",
        "../assets/Button-C8_kLgtz.css",
        "../assets/Modal-4Y8efbdF.css",
        "../assets/IllustrationSection-Ce9CQF80.css",
        "../assets/Hero-BQ6ieBxK.css"
      ]
    },
    "routes/_marketing.docs._index": {
      "id": "routes/_marketing.docs._index",
      "parentId": "routes/_marketing.docs",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-Xb11ex6F.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/MDComponent-S1Ei_Xtk.js",
        "../assets/components-DZQBhqap.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/index-BtvcE26l.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-DPGvI9WQ.css",
        "../assets/MDComponent-CdQtYgZs.css"
      ]
    }
  },
  "url": "/assets/manifest-81d72d9d.js",
  "version": "81d72d9d"
};
window.__remixRouteModules = {"root":route0,"routes/_marketing":route1,"routes/_marketing.docs":route2,"routes/_marketing.docs.$":route3};

import("../assets/entry.client-BGtfi_QV.js");</script><script class="cookieconsent-optin-statistics" data-cookieconsent="statistics">
                        window.dataLayer = window.dataLayer || [];
                        function gtag(){ dataLayer.push(arguments); }
                        gtag('js', new Date());
                        gtag('config', 'G-PP0E4VHQKG');
                        </script><script src="../../uptime.betterstack.com/widgets/announcement.js" data-id="167677" defer="" type="text/javascript"></script></body>
<!-- Mirrored from spacetimedb.com/docs/subscriptions by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 May 2025 02:58:46 GMT -->
</html><!--$--><script>window.__remixContext.streamController.enqueue("[{\"_1\":2,\"_187\":-5,\"_188\":-5},\"loaderData\",{\"_3\":4,\"_10\":11,\"_176\":177,\"_186\":-5},\"root\",{\"_5\":6,\"_7\":8,\"_9\":-7},\"stargazersCount\",15876,\"isAnnouncementVisible\",true,\"sessionUserInfo\",\"routes/_marketing.docs\",{\"_12\":13,\"_174\":175},\"nav\",{\"_14\":15},\"items\",[16,21,28,32,34,38,42,44,47,51,55,59,63,65,68,72,74,77,81,85,89,93,95,98,101,104,107,110,114,118,120,124,126,130,132,135,137,141,143,147,151,155,157,161,165,169,171],{\"_17\":18,\"_19\":20},\"type\",\"section\",\"title\",\"Intro\",{\"_17\":22,\"_23\":24,\"_25\":26,\"_19\":27},\"page\",\"path\",\"index.md\",\"slug\",\"index\",\"Overview\",{\"_17\":22,\"_23\":29,\"_25\":30,\"_19\":31},\"getting-started.md\",\"getting-started\",\"Getting Started\",{\"_17\":18,\"_19\":33},\"Deploying\",{\"_17\":22,\"_23\":35,\"_25\":36,\"_19\":37},\"deploying/maincloud.md\",\"deploying/maincloud\",\"Maincloud\",{\"_17\":22,\"_23\":39,\"_25\":40,\"_19\":41},\"deploying/spacetimedb-standalone.md\",\"deploying/spacetimedb-standalone\",\"Self-Hosting SpacetimeDB\",{\"_17\":18,\"_19\":43},\"Unity Tutorial - Basic Multiplayer\",{\"_17\":22,\"_23\":45,\"_25\":46,\"_19\":27},\"unity/index.md\",\"unity\",{\"_17\":22,\"_23\":48,\"_25\":49,\"_19\":50},\"unity/part-1.md\",\"unity/part-1\",\"1 - Setup\",{\"_17\":22,\"_23\":52,\"_25\":53,\"_19\":54},\"unity/part-2.md\",\"unity/part-2\",\"2 - Connecting to SpacetimeDB\",{\"_17\":22,\"_23\":56,\"_25\":57,\"_19\":58},\"unity/part-3.md\",\"unity/part-3\",\"3 - Gameplay\",{\"_17\":22,\"_23\":60,\"_25\":61,\"_19\":62},\"unity/part-4.md\",\"unity/part-4\",\"4 - Moving and Colliding\",{\"_17\":18,\"_19\":64},\"CLI Reference\",{\"_17\":22,\"_23\":66,\"_25\":67,\"_19\":64},\"cli-reference.md\",\"cli-reference\",{\"_17\":22,\"_23\":69,\"_25\":70,\"_19\":71},\"cli-reference/standalone-config.md\",\"cli-reference/standalone-config\",\"SpacetimeDB Standalone Configuration\",{\"_17\":18,\"_19\":73},\"Server Module Languages\",{\"_17\":22,\"_23\":75,\"_25\":76,\"_19\":27},\"modules/index.md\",\"modules\",{\"_17\":22,\"_23\":78,\"_25\":79,\"_19\":80},\"modules/rust/quickstart.md\",\"modules/rust/quickstart\",\"Rust Quickstart\",{\"_17\":22,\"_23\":82,\"_25\":83,\"_19\":84},\"modules/rust/index.md\",\"modules/rust\",\"Rust Reference\",{\"_17\":22,\"_23\":86,\"_25\":87,\"_19\":88},\"modules/c-sharp/quickstart.md\",\"modules/c-sharp/quickstart\",\"C# Quickstart\",{\"_17\":22,\"_23\":90,\"_25\":91,\"_19\":92},\"modules/c-sharp/index.md\",\"modules/c-sharp\",\"C# Reference\",{\"_17\":18,\"_19\":94},\"Client SDK Languages\",{\"_17\":22,\"_23\":96,\"_25\":97,\"_19\":27},\"sdks/index.md\",\"sdks\",{\"_17\":22,\"_23\":99,\"_25\":100,\"_19\":88},\"sdks/c-sharp/quickstart.md\",\"sdks/c-sharp/quickstart\",{\"_17\":22,\"_23\":102,\"_25\":103,\"_19\":92},\"sdks/c-sharp/index.md\",\"sdks/c-sharp\",{\"_17\":22,\"_23\":105,\"_25\":106,\"_19\":80},\"sdks/rust/quickstart.md\",\"sdks/rust/quickstart\",{\"_17\":22,\"_23\":108,\"_25\":109,\"_19\":84},\"sdks/rust/index.md\",\"sdks/rust\",{\"_17\":22,\"_23\":111,\"_25\":112,\"_19\":113},\"sdks/typescript/quickstart.md\",\"sdks/typescript/quickstart\",\"TypeScript Quickstart\",{\"_17\":22,\"_23\":115,\"_25\":116,\"_19\":117},\"sdks/typescript/index.md\",\"sdks/typescript\",\"TypeScript Reference\",{\"_17\":18,\"_19\":119},\"SQL\",{\"_17\":22,\"_23\":121,\"_25\":122,\"_19\":123},\"sql/index.md\",\"sql\",\"SQL Reference\",{\"_17\":18,\"_19\":125},\"Subscriptions\",{\"_17\":22,\"_23\":127,\"_25\":128,\"_19\":129},\"subscriptions/index.md\",\"subscriptions\",\"Subscription Reference\",{\"_17\":18,\"_19\":131},\"Row Level Security\",{\"_17\":22,\"_23\":133,\"_25\":134,\"_19\":131},\"rls/index.md\",\"rls\",{\"_17\":18,\"_19\":136},\"How To\",{\"_17\":22,\"_23\":138,\"_25\":139,\"_19\":140},\"how-to/incremental-migrations.md\",\"how-to/incremental-migrations\",\"Incremental Migrations\",{\"_17\":18,\"_19\":142},\"HTTP API\",{\"_17\":22,\"_23\":144,\"_25\":145,\"_19\":146},\"http/authorization.md\",\"http/authorization\",\"Authorization\",{\"_17\":22,\"_23\":148,\"_25\":149,\"_19\":150},\"http/identity.md\",\"http/identity\",\"`/identity`\",{\"_17\":22,\"_23\":152,\"_25\":153,\"_19\":154},\"http/database.md\",\"http/database\",\"`/database`\",{\"_17\":18,\"_19\":156},\"Internals\",{\"_17\":22,\"_23\":158,\"_25\":159,\"_19\":160},\"webassembly-abi/index.md\",\"webassembly-abi\",\"Module ABI Reference\",{\"_17\":22,\"_23\":162,\"_25\":163,\"_19\":164},\"sats-json.md\",\"sats-json\",\"SATS-JSON Data Format\",{\"_17\":22,\"_23\":166,\"_25\":167,\"_19\":168},\"bsatn.md\",\"bsatn\",\"BSATN Data Format\",{\"_17\":18,\"_19\":170},\"Appendix\",{\"_17\":22,\"_23\":172,\"_25\":173,\"_19\":170},\"appendix.md\",\"appendix\",\"rootEditURL\",\"https://github.com/clockworklabs/spacetime-docs/edit/master/docs\",\"routes/_marketing.docs.$\",{\"_178\":179,\"_180\":181,\"_182\":183,\"_184\":185},\"content\",\"\u003ch2 id=\\\"the-spacetimedb-subscription-api\\\"\u003eThe SpacetimeDB Subscription API\u003ca href=\\\"#the-spacetimedb-subscription-api\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eThe subscription API allows a client to replicate a subset of a database.\\nIt does so by registering SQL queries, which we call subscriptions, through a database connection.\\nA client will only receive updates for rows that match the subscriptions it has registered.\u003c/p\u003e\\n\u003cp\u003eFor more information on syntax and requirements see the \u003ca href=\\\"/docs/sql#subscriptions\\\"\u003eSQL docs\u003c/a\u003e.\u003c/p\u003e\\n\u003cp\u003eThis guide describes the two main interfaces that comprise the API - \u003ccode\u003eSubscriptionBuilder\u003c/code\u003e and \u003ccode\u003eSubscriptionHandle\u003c/code\u003e.\\nBy using these interfaces, you can create efficient and responsive client applications that only receive the data they need.\u003c/p\u003e\\n\u003ch3 id=\\\"subscriptionbuilder\\\"\u003eSubscriptionBuilder\u003ca href=\\\"#subscriptionbuilder\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e struct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eM\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SpacetimeModule\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* private fields */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eimpl\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eM\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SpacetimeModule\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eM\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Register a callback that runs when the subscription has been applied.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// This callback receives a context containing the current state of the subscription.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e on_applied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003emut\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, callback\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e impl\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e FnOnce\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eM\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubscriptionEventContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Send\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e '\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003estatic\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Register a callback to run when the subscription fails.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    ///\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Note that this callback may run either when attempting to apply the subscription,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// in which case [`Self::on_applied`] will never run,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// or later during the subscription's lifetime if the module's interface changes,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// in which case [`Self::on_applied`] may have already run.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e on_error\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003emut\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, callback\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e impl\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e FnOnce\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eM\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eErrorContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ecrate::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eError\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Send\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e '\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003estatic\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Subscribe to a subset of the database via a set of SQL queries.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Returns a handle which you can use to monitor or drop the subscription later.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e subscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eQueries\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e IntoQueries\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, query_sql\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Queries\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e M\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubscriptionHandle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Subscribe to all rows from all tables.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    ///\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// This method is intended as a convenience\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// for applications where client-side memory use and network bandwidth are not concerns.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Applications where these resources are a constraint\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// should register more precise queries via [`Self::subscribe`]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// in order to replicate only the subset of data which the client needs to function.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    pub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e subscribe_to_all_tables\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// Types which specify a list of query strings.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e trait\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e IntoQueries\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e into_queries\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Box\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;[\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eBox\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003estr\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e]\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epublic\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e sealed\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e class\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD\\\"\u003e SubscriptionBuilder\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Register a callback to run when the subscription is applied.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e OnApplied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        Action\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubscriptionEventContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003ecallback\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    );\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Register a callback to run when the subscription fails.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    ///\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Note that this callback may run either when attempting to apply the subscription,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// in which case \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003eSelf::on_applied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e will never run,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// or later during the subscription's lifetime if the module's interface changes,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// in which case \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003eSelf::on_applied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e may have already run.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e OnError\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        Action\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eErrorContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eException\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003ecallback\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    );\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Subscribe to the following SQL queries.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    ///\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// This method returns immediately, with the data not yet added to the DbConnection.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// The provided callbacks will be invoked once the data is returned from the remote server.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Data from all the provided queries will be returned at the same time.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    ///\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// See the SpacetimeDB SQL docs for more information on SQL syntax:\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ea\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B;font-style:italic\\\"\u003e href\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003ehttps://spacetimedb.com/docs/sql\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003ehttps://spacetimedb.com/docs/sql\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ea\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SubscriptionHandle\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Subscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003equerySqls\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    );\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Subscribe to all rows from all tables.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    ///\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// This method is intended as a convenience\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// for applications where client-side memory use and network bandwidth are not concerns.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Applications where these resources are a constraint\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// should register more precise queries via \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003eSelf.Subscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ec\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// in order to replicate only the subset of data which the client needs to function.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e SubscribeToAllTables\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eA \u003ccode\u003eSubscriptionBuilder\u003c/code\u003e provides an interface for registering subscription queries with a database.\\nIt allows you to register callbacks that run when the subscription is successfully applied or when an error occurs.\\nOnce applied, a client will start receiving row updates to its client cache.\\nA client can react to these updates by registering row callbacks for the appropriate table.\u003c/p\u003e\\n\u003ch4 id=\\\"example-usage\\\"\u003eExample Usage\u003ca href=\\\"#example-usage\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Establish a database connection\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbConnection\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e connect_to_db\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Register a subscription with the database\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e subscription_handle \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eon_applied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle applied state */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eon_error\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eerror_ctx, error\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle error */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\\\"SELECT * FROM user\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\\\"SELECT * FROM message\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e]);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Establish a database connection\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e ConnectToDB\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Register a subscription with the database\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e userSubscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eOnApplied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle applied state */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eOnError\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eerrorCtx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eerror\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle error */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] { \u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM user\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM message\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e });\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003ch3 id=\\\"subscriptionhandle\\\"\u003eSubscriptionHandle\u003ca href=\\\"#subscriptionhandle\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003epub\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e trait\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SubscriptionHandle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e InModule\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Clone\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Send\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e +\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e '\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003estatic\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e    Self\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eModule\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e SpacetimeModule\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubscriptionHandle\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003e Self\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Returns `true` if the subscription has been ended.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// That is, if it has been unsubscribed or terminated due to an error.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e is_ended\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e bool\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Returns `true` if the subscription is currently active.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e is_active\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e bool\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Unsubscribe from the query controlled by this `SubscriptionHandle`,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// then run `on_end` when its rows are removed from the client cache.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Returns an error if the subscription is already ended,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// or if unsubscribe has already been called.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e unsubscribe_then\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, on_end\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e OnEndedCallback\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eSelf\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eModule\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e crate::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eResult\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;()\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Unsubscribe from the query controlled by this `SubscriptionHandle`.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// Returns an error if the subscription is already ended,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e    /// or if unsubscribe has already been called.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    fn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e unsubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9;font-style:italic\\\"\u003eself\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e crate::\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eResult\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;()\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e class\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD\\\"\u003e SubscriptionHandle\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eSubscriptionEventContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eErrorContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e : \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eISubscriptionHandle\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        where\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e SubscriptionEventContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e : \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eISubscriptionEventContext\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        where\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003e ErrorContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e : \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eIErrorContext\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// Whether the subscription has ended.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e bool\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e IsEnded;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// Whether the subscription is active.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e bool\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e IsActive;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// Unsubscribe from the query controlled by this subscription handle.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// Calling this more than once will result in an exception.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Unsubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// Unsubscribe from the query controlled by this subscription handle,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// and call onEnded when its rows are removed from the client cache.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        /// \u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003esummary\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        public\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e void\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e UnsubscribeThen\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eAction\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eSubscriptionEventContext\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e\u003e? \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eonEnded\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003cp\u003eWhen you register a subscription, you receive a \u003ccode\u003eSubscriptionHandle\u003c/code\u003e.\\nA \u003ccode\u003eSubscriptionHandle\u003c/code\u003e manages the lifecycle of each subscription you register.\\nIn particular, it provides methods to check the status of the subscription and to unsubscribe if necessary.\\nBecause each subscription has its own independently managed lifetime,\\nclients can dynamically subscribe to different subsets of the database as their application requires.\u003c/p\u003e\\n\u003ch4 id=\\\"example-usage-1\\\"\u003eExample Usage\u003ca href=\\\"#example-usage-1\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \u003cp\u003eConsider a game client that displays shop items and discounts based on a player\u0026#39;s level.\\nYou subscribe to \u003ccode\u003eshop_items\u003c/code\u003e and \u003ccode\u003eshop_discounts\u003c/code\u003e when a player is at level 5:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbConnection\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e connect_to_db\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shop_items_subscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eon_applied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle applied state */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eon_error\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eerror_ctx, error\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle error */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_items WHERE required_level \u0026#x3C;= 5\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_discounts WHERE required_level \u0026#x3C;= 5\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    ]);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eLater, when the player reaches level 6 and new items become available,\\nyou can subscribe to the new queries and unsubscribe from the old ones:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_shop_items_subscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eon_applied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle applied state */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eon_error\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eerror_ctx, error\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e|\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle error */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_items WHERE required_level \u0026#x3C;= 6\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_discounts WHERE required_level \u0026#x3C;= 6\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    ]);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eif\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shop_items_subscription\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eis_active\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    shop_items_subscription\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eunsubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e        .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eexpect\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e\\\"Unsubscribing from shop_items failed\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eAll other subscriptions continue to remain in effect.\u003c/p\u003e\\n\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \u003cp\u003eConsider a game client that displays shop items and discounts based on a player\u0026#39;s level.\\nYou subscribe to \u003ccode\u003eshop_items\u003c/code\u003e and \u003ccode\u003eshop_discounts\u003c/code\u003e when a player is at level 5:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e ConnectToDB\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shopItemsSubscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eOnApplied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle applied state */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eOnError\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eerrorCtx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eerror\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle error */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_items WHERE required_level \u0026#x3C;= 5\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_discounts WHERE required_level \u0026#x3C;= 5\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    });\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eLater, when the player reaches level 6 and new items become available,\\nyou can subscribe to the new queries and unsubscribe from the old ones:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e newShopItemsSubscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eOnApplied\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003ectx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle applied state */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eOnError\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e((\u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eerrorCtx\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#FFB86C;font-style:italic\\\"\u003eerror\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e { \u003c/span\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/* handle error */\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e })\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_items WHERE required_level \u0026#x3C;= 6\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_discounts WHERE required_level \u0026#x3C;= 6\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    });\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eif\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (shopItemsSubscription.IsActive)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    shopItemsSubscription.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eUnsubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eAll other subscriptions continue to remain in effect.\u003c/p\u003e\\n\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003ch3 id=\\\"best-practices-for-optimizing-server-compute-and-reducing-serialization-overhead\\\"\u003eBest Practices for Optimizing Server Compute and Reducing Serialization Overhead\u003ca href=\\\"#best-practices-for-optimizing-server-compute-and-reducing-serialization-overhead\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003ch4 id=\\\"1-writing-efficient-sql-queries\\\"\u003e1. Writing Efficient SQL Queries\u003ca href=\\\"#1-writing-efficient-sql-queries\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eFor writing efficient SQL queries, see our \u003ca href=\\\"/docs/sql#best-practices-for-performance-and-scalability\\\"\u003eSQL Best Practices Guide\u003c/a\u003e.\u003c/p\u003e\\n\u003ch4 id=\\\"2-group-subscriptions-with-the-same-lifetime-together\\\"\u003e2. Group Subscriptions with the Same Lifetime Together\u003ca href=\\\"#2-group-subscriptions-with-the-same-lifetime-together\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eSubscriptions with the same lifetime should be grouped together.\u003c/p\u003e\\n\u003cp\u003eFor example, you may have certain data that is required for the lifetime of your application,\\nbut you may have other data that is only sometimes required by your application.\u003c/p\u003e\\n\u003cp\u003eBy managing these sets as two independent subscriptions,\\nyour application can subscribe and unsubscribe from the latter,\\nwithout needlessly unsubscribing and resubscribing to the former.\u003c/p\u003e\\n\u003cp\u003eThis will improve throughput by reducing the amount of data transferred from the database to your application.\u003c/p\u003e\\n\u003ch5 id=\\\"example\\\"\u003eExample\u003ca href=\\\"#example\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h5\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbConnection\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e connect_to_db\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Never need to unsubscribe from global subscriptions\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e global_subscriptions \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // Global messages the client should always display\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM announcements\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // A description of rewards for in-game achievements\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM badges\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    ]);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// May unsubscribe to shop_items as player advances\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shop_subscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_items WHERE required_level \u0026#x3C;= 5\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    ]);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e ConnectToDB\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Never need to unsubscribe from global subscriptions\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e globalSubscriptions \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // Global messages the client should always display\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM announcements\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // A description of rewards for in-game achievements\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM badges\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    });\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// May unsubscribe to shop_items as player advances\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shopSubscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_items WHERE required_level \u0026#x3C;= 5\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    });\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003ch4 id=\\\"3-subscribe-before-unsubscribing\\\"\u003e3. Subscribe Before Unsubscribing\u003ca href=\\\"#3-subscribe-before-unsubscribing\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eIf you want to update or modify a subscription by dropping it and subscribing to a new set,\\nyou should subscribe to the new set before unsubscribing from the old one.\u003c/p\u003e\\n\u003cp\u003eThis is because SpacetimeDB subscriptions are zero-copy.\\nSubscribing to the same query more than once doesn\u0026#39;t incur additional processing or serialization overhead.\\nLikewise, if a query is subscribed to more than once,\\nunsubscribing from it does not result in any server processing or data serializtion.\u003c/p\u003e\\n\u003ch5 id=\\\"example-1\\\"\u003eExample\u003ca href=\\\"#example-1\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h5\u003e\\n        \u003cdiv class=\\\"lang-group\\\"\u003e\\n            \u003cdiv class=\\\"lang-tabs\\\"\u003e\\n                \u003cspan class=\\\"lang-tabs-title\\\"\u003e\u003c/span\u003e\\n                \u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"Rust\\\"\u003eRust\u003c/button\u003e\u003cbutton class=\\\"tab-btn\\\" data-lang=\\\"C#\\\"\u003eC#\u003c/button\u003e\\n            \u003c/div\u003e\\n            \\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"Rust\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e DbConnection\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e =\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e connect_to_db\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Initial subscription: player at level 5.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shop_subscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // For displaying the price of shop items in the player's currency of choice\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM exchange_rates\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_items WHERE required_level \u0026#x3C;= 5\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    ]);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// New subscription: player now at level 6, which overlaps with the previous query.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003elet\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e new_shop_subscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscription_builder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003esubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e([\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // For displaying the price of shop items in the player's currency of choice\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM exchange_rates\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003e        \\\"SELECT * FROM shop_items WHERE required_level \u0026#x3C;= 6\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    ]);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Unsubscribe from the old subscription once the new one is active.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eif\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shop_subscription\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eis_active\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    shop_subscription\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eunsubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n            \u003cdiv class=\\\"lang-block\\\" data-lang=\\\"C#\\\"\u003e\\n                \\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e ConnectToDB\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Initial subscription: player at level 5.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e shopSubscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // For displaying the price of shop items in the player's currency of choice\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM exchange_rates\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_items WHERE required_level \u0026#x3C;= 5\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    });\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// New subscription: player now at level 6, which overlaps with the previous query.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003evar\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e newShopSubscription \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e conn\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscriptionBuilder\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e()\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    .\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eSubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e string\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e        // For displaying the price of shop items in the player's currency of choice\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM exchange_rates\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e        \\\"\u003c/span\u003e\u003cspan style=\\\"color:#F1FA8C\\\"\u003eSELECT * FROM shop_items WHERE required_level \u0026#x3C;= 6\u003c/span\u003e\u003cspan style=\\\"color:#E9F284\\\"\u003e\\\"\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    });\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e// Unsubscribe from the old subscription once the new one is in place.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eif\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (shopSubscription.IsActive)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    shopSubscription.\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eUnsubscribe\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\\n            \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003ch4 id=\\\"4-avoid-overlapping-queries\\\"\u003e4. Avoid Overlapping Queries\u003ca href=\\\"#4-avoid-overlapping-queries\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\u003cp\u003eThis refers to distinct queries that return intersecting data sets,\\nwhich can result in the server processing and serializing the same row multiple times.\\nWhile SpacetimeDB can manage this redundancy, it may lead to unnecessary inefficiencies.\u003c/p\u003e\\n\u003cp\u003eConsider the following two queries:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eSELECT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e FROM\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e User\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eSELECT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e FROM\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e User \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eWHERE\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 5\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eIf \u003ccode\u003eUser.id\u003c/code\u003e is a unique or primary key column,\\nthe cost of subscribing to both queries is minimal.\\nThis is because the server will use an index when processing the 2nd query,\\nand it will only serialize a single row for the 2nd query.\u003c/p\u003e\\n\u003cp\u003eIn contrast, consider these two queries:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eSELECT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e FROM\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e User\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eSELECT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e *\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e FROM\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e User \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eWHERE\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e!=\u003c/span\u003e\u003cspan style=\\\"color:#BD93F9\\\"\u003e 5\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eThe server must now process each row of the \u003ccode\u003eUser\u003c/code\u003e table twice,\\nsince the 2nd query cannot be processed using an index.\\nIt must also serialize all but one row of the \u003ccode\u003eUser\u003c/code\u003e table twice,\\ndue to the significant overlap between the two queries.\u003c/p\u003e\\n\u003cp\u003eBy following these best practices, you can optimize your data replication strategy and ensure your application remains efficient and responsive.\u003c/p\u003e\\n\",\"next\",{\"_17\":22,\"_23\":133,\"_25\":134,\"_19\":131},\"prev\",{\"_17\":22,\"_23\":121,\"_25\":122,\"_19\":123},\"editURL\",\"https://github.com/clockworklabs/spacetime-docs/edit/master/docs/subscriptions/index.md\",\"routes/_marketing\",\"actionData\",\"errors\"]\n");</script><!--$--><script>window.__remixContext.streamController.close();</script><!--/$--><!--/$-->
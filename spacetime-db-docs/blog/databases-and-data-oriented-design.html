<!DOCTYPE html><html lang="en">
<!-- Mirrored from spacetimedb.com/blog/databases-and-data-oriented-design by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 May 2025 02:58:49 GMT -->
<head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"/><link rel="manifest" href="../site.webmanifest"/><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#202126"/><meta name="msapplication-TileColor" content="#202126"/><meta name="theme-color" content="#202126"/><link href="../favicon-light.ico" rel="icon" media="(prefers-color-scheme: light)"/><link href="../favicon.ico" rel="icon" media="(prefers-color-scheme: dark)"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="title" content="SpacetimeDB"/><meta name="description" content="Multiplayer at the speed of light."/><meta property="og:type" content="website"/><meta property="og:url" content="../index.html"/><meta property="og:title" content="SpacetimeDB"/><meta property="og:description" content="Multiplayer at the speed of light."/><meta property="og:image" content="../meta-tags.png"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:url" content="../index.html"/><meta property="twitter:title" content="SpacetimeDB"/><meta property="twitter:description" content="Multiplayer at the speed of light."/><meta property="twitter:image" content="../meta-tags.png"/><link rel="preload" as="font" href="../assets/ibm-plex-mono-latin-600-normal-rgB1DpUr.woff2" type="font/woff2" crossorigin="anonymous"/><link rel="preload" as="font" href="../assets/inter-latin-wght-normal-C2S99t-D.woff2" type="font/woff2" crossorigin="anonymous"/><link rel="preload" as="font" href="../assets/source-code-pro-latin-wght-normal-C54hYqvT.woff2" type="font/woff2" crossorigin="anonymous"/><title>Databases are the endgame for data-oriented design | Blog | SpacetimeDB</title><link rel="stylesheet" href="../assets/root-DgiNzMOf.css"/><link rel="stylesheet" href="../assets/Layout-CTL7f1Hd.css"/><link rel="stylesheet" href="../assets/Container-_6nMI5g_.css"/><link rel="stylesheet" href="../assets/Button-C8_kLgtz.css"/><link rel="stylesheet" href="../assets/route-Dz2xtRs4.css"/><link rel="stylesheet" href="../assets/route-DkqE9ded.css"/><link rel="stylesheet" href="../assets/MDComponent-CdQtYgZs.css"/></head><body><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div><div id="root"><div><div class="BPQwEa_scrollScapegoat"></div><header class="BPQwEa_header" style="--background:transparent;--color-border:transparent"><div class="sDndEq_announcementBanner text-tagline-1"><div class="wtWGoa_root"><div class="sDndEq_content"><div class="sDndEq_left"><svg class="sDndEq_announcementIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.2413 2H7.7587C6.95374 1.99999 6.28937 1.99998 5.74818 2.04419C5.18608 2.09012 4.66937 2.18868 4.18404 2.43598C3.43139 2.81947 2.81947 3.43139 2.43598 4.18404C2.18868 4.66937 2.09012 5.18608 2.04419 5.74818C1.99998 6.28937 1.99999 6.95372 2 7.75869V13.5343C1.99999 14.2041 1.99999 14.7569 2.03087 15.2095C2.06289 15.6788 2.13142 16.1129 2.30448 16.5307C2.71046 17.5108 3.48916 18.2895 4.46927 18.6955C4.88708 18.8686 5.32118 18.9371 5.79046 18.9691C6.24307 19 6.79594 19 7.46573 19H7.5C8.03656 19 8.14307 19.0063 8.22975 19.0268C8.38085 19.0624 8.52156 19.1328 8.64075 19.2322C8.70913 19.2893 8.77806 19.3708 9.1 19.8L10.5769 21.7692C10.6703 21.8938 10.7758 22.0346 10.8774 22.1476C10.9894 22.2721 11.1756 22.4555 11.4563 22.5647C11.806 22.7007 12.194 22.7007 12.5437 22.5647C12.8244 22.4555 13.0106 22.2721 13.1226 22.1476C13.2242 22.0346 13.3297 21.8938 13.4231 21.7692L14.9 19.8C15.2219 19.3708 15.2909 19.2893 15.3593 19.2322C15.4784 19.1328 15.6192 19.0624 15.7702 19.0268C15.8569 19.0063 15.9634 19 16.5 19H16.5343C17.2041 19 17.7569 19 18.2095 18.9691C18.6788 18.9371 19.1129 18.8686 19.5307 18.6955C20.5108 18.2895 21.2895 17.5108 21.6955 16.5307C21.8686 16.1129 21.9371 15.6788 21.9691 15.2095C22 14.7569 22 14.2041 22 13.5343V7.75868C22 6.95372 22 6.28937 21.9558 5.74818C21.9099 5.18608 21.8113 4.66937 21.564 4.18404C21.1805 3.43139 20.5686 2.81947 19.816 2.43598C19.3306 2.18868 18.8139 2.09012 18.2518 2.04419C17.7106 1.99998 17.0463 1.99999 16.2413 2ZM13 7C13 6.44772 12.5523 6 12 6C11.4477 6 11 6.44772 11 7V10.5C11 11.0523 11.4477 11.5 12 11.5C12.5523 11.5 13 11.0523 13 10.5V7ZM12 13C11.4477 13 11 13.4477 11 14C11 14.5523 11.4477 15 12 15H12.01C12.5623 15 13.01 14.5523 13.01 14C13.01 13.4477 12.5623 13 12.01 13H12Z" fill="#4CF490"></path></svg><p class="md-body-docs">Maincloud is now <b>LIVE</b>! Get Maincloud Energy 90% off until we run out!</p></div><form method="post" action="https://spacetimedb.com/api/announcement-banner"><button aria-label="Close announcement banner"><svg class="dismiss-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM15.7071 8.29289C16.0976 8.68342 16.0976 9.31658 15.7071 9.70711L13.4142 12L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L12 13.4142L9.70711 15.7071C9.31658 16.0976 8.68342 16.0976 8.29289 15.7071C7.90237 15.3166 7.90237 14.6834 8.29289 14.2929L10.5858 12L8.29289 9.70711C7.90237 9.31658 7.90237 8.68342 8.29289 8.29289C8.68342 7.90237 9.31658 7.90237 9.70711 8.29289L12 10.5858L14.2929 8.29289C14.6834 7.90237 15.3166 7.90237 15.7071 8.29289Z" fill="#A4CBB4"></path></svg></button></form></div></div></div><div class="wtWGoa_root"><div class="BPQwEa_inner" style="--padding:24px 0"><a class="BPQwEa_brand BPQwEa_hideMobile" data-discover="true" href="../home.html"><img src="../images/brand.png" alt="SpacetimeDB" width="390" height="96"/></a><a class="BPQwEa_logo BPQwEa_hideDesktop" data-discover="true" href="../home.html"><img src="../images/logo.png" alt="SpacetimeDB" width="36" height="36"/></a><div class="BPQwEa_versionTag text-value-3"><p>v1.1</p></div><nav class="BPQwEa_nav text-menu BPQwEa_hideMobile"><a data-discover="true" class="" href="../install.html">Install</a><a data-discover="true" class="" href="../pricing.html">Pricing</a><a data-discover="true" class="" href="../maincloud.html">Maincloud</a><a data-discover="true" class="" href="../docs.html">Docs</a><a data-discover="true" aria-current="page" class="BPQwEa_active" href="../blog.html">Blog</a><a data-discover="true" class="" href="../community.html">Community</a></nav><button cy-data="" class="GM6BWG_button GM6BWG_primary BPQwEa_hideMobile BPQwEa_starUsBtn text-menu" aria-label="16K stars" type="button"><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M8.12384 7.08774C7.87849 6.97075 7.59345 6.97075 7.3481 7.08774C7.136 7.18886 7.01906 7.36444 6.96009 7.46077C6.89912 7.56035 6.83654 7.6872 6.77554 7.81084L5.48033 10.4348L2.58314 10.8583C2.44676 10.8782 2.30682 10.8986 2.19332 10.9259C2.08351 10.9523 1.88049 11.0094 1.71892 11.1799C1.53201 11.3772 1.44411 11.6483 1.47969 11.9178C1.51044 12.1507 1.64133 12.316 1.71475 12.4018C1.79064 12.4905 1.89197 12.5892 1.99073 12.6854L4.08627 14.7264L3.59181 17.6093C3.56847 17.7452 3.54452 17.8847 3.53531 18.0011C3.52639 18.1137 3.51777 18.3245 3.62995 18.5311C3.7597 18.7699 3.99034 18.9375 4.25762 18.987C4.4887 19.0299 4.68654 18.9565 4.79087 18.9132C4.89875 18.8684 5.02397 18.8026 5.14603 18.7383L7.73597 17.3763L10.3259 18.7383C10.448 18.8026 10.5732 18.8685 10.6811 18.9132C10.7854 18.9565 10.9832 19.0299 11.2143 18.987C11.4816 18.9375 11.7122 18.7699 11.842 18.5311C11.9542 18.3245 11.9455 18.1137 11.9366 18.0011C11.9274 17.8847 11.9035 17.7453 11.8801 17.6093L11.3857 14.7264L13.4812 12.6853C13.58 12.5892 13.6813 12.4905 13.7572 12.4018C13.8306 12.316 13.9615 12.1507 13.9922 11.9178C14.0278 11.6483 13.9399 11.3772 13.753 11.1799C13.5914 11.0094 13.3884 10.9523 13.2786 10.9259C13.1651 10.8986 13.0252 10.8782 12.8888 10.8583L9.99161 10.4348L8.69642 7.81089C8.63542 7.68724 8.57282 7.56036 8.51185 7.46077C8.45288 7.36444 8.33594 7.18886 8.12384 7.08774Z" fill="currentColor" stroke="rgba(0, 0, 0, 0)" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="10" cy="4" r="2" fill="currentColor"></circle><circle cx="3.5" cy="5.5" r="1.5" fill="currentColor"></circle><circle cx="6" cy="1" r="1" fill="currentColor"></circle></svg>16K stars</button><a class="BPQwEa_hideMobile BPQwEa_loginBtn" data-discover="true" href="https://github.com/login/oauth/authorize?client_id=Iv23liKJqWZxDyNA4Y9G&amp;scope=read%3Auser+user%3Aemail&amp;redirect_uri=https%3A%2F%2Fspacetimedb.com%2Fapi%2Fauth%2Fgithub%2Fcallback&amp;state=01JTSFM2HKQ1NWZFHE4NZNGE5P&amp;allow_signup=true&amp;prompt=select_account">Login</a><button class="BPQwEa_burger" aria-label="Toggle navigation menu"><span></span></button></div></div></header><div class="BPQwEa_modal"><div class="BPQwEa_modalContainer"><nav class="BPQwEa_nav text-menu"><a data-discover="true" class="" href="../install.html">Install</a><a data-discover="true" class="" href="../pricing.html">Pricing</a><a data-discover="true" class="" href="../maincloud.html">Maincloud</a><a data-discover="true" class="" href="../docs.html">Docs</a><a data-discover="true" aria-current="page" class="BPQwEa_active" href="../blog.html">Blog</a><a data-discover="true" class="" href="../community.html">Community</a></nav><div class="BPQwEa_group"><div class="BPQwEa_communitySection"><h4 class="BPQwEa_title text-xs">Community</h4><div class="BPQwEa_socials"><a href="https://github.com/ClockworkLabs/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M10.041 0C4.519 0 0 4.519 0 10.041a10.03 10.03 0 0 0 6.862 9.539c.502.084.669-.251.669-.502v-1.674c-2.761.586-3.347-1.339-3.347-1.339-.418-1.171-1.088-1.506-1.088-1.506-1.004-.586 0-.586 0-.586 1.004.084 1.506 1.004 1.506 1.004.92 1.506 2.343 1.088 2.929.837.084-.669.335-1.088.669-1.339-2.259-.251-4.602-1.088-4.602-4.937a4.04 4.04 0 0 1 1.004-2.678c0-.335-.418-1.339.167-2.678 0 0 .837-.251 2.761 1.004.837-.251 1.674-.335 2.51-.335s1.674.084 2.51.335c1.925-1.339 2.761-1.004 2.761-1.004.586 1.423.167 2.427.084 2.678.669.669 1.004 1.59 1.004 2.678 0 3.849-2.343 4.686-4.602 4.937.335.335.669.92.669 1.841v2.761c0 .251.167.586.669.502a10.03 10.03 0 0 0 6.862-9.539C20.083 4.519 15.564 0 10.041 0z"></path></svg></a><a href="https://discord.gg/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M16.7 0c.27.001.537.054.786.158s.475.256.666.447.341.418.444.668.155.517.155.787h0V20l-2.15-1.9-1.21-1.117-1.28-1.19.53 1.85H3.3c-.27-.001-.537-.054-.786-.158s-.475-.256-.666-.447-.341-.418-.444-.668-.155-.517-.155-.787h0V2.06c-.001-.27.052-.537.155-.787s.253-.476.444-.668.417-.343.666-.447S3.03.001 3.3 0h0 13.4zm-5.05 4.66l-.14.16c.911.242 1.759.675 2.49 1.27a8.15 8.15 0 0 0-3.013-.963 8.46 8.46 0 0 0-2.02.02c-.056.002-.112.009-.167.02a7.51 7.51 0 0 0-2.27.633l-.59.29a6.75 6.75 0 0 1 2.637-1.31h0l-.1-.12c-1.023.051-2.005.417-2.81 1.05a13.39 13.39 0 0 0-1.44 5.833c.345.484.803.876 1.335 1.141s1.121.395 1.715.379l.667-.833a3.11 3.11 0 0 1-1.75-1.18c.357.239.739.437 1.14.59a8.39 8.39 0 0 0 1.467.43c.855.164 1.734.168 2.59.01a6.58 6.58 0 0 0 1.45-.43 5.72 5.72 0 0 0 1.15-.59c-.444.598-1.085 1.019-1.81 1.19l.07.088.142.177.448.545c.595.015 1.185-.115 1.718-.379s.994-.655 1.342-1.138a13.39 13.39 0 0 0-1.44-5.833c-.805-.633-1.787-.999-2.81-1.05h0zm.056 3.727l.134.003c.14.006.277.039.404.098s.241.142.336.245.168.224.216.355.07.271.064.411c0 .224-.068.444-.194.629s-.306.328-.515.41-.438.098-.656.047-.417-.166-.569-.332-.25-.372-.282-.594.004-.449.102-.65.256-.368.451-.479.419-.159.643-.14l-.134-.003zM8.19 8.39c.14.005.278.038.405.097a1.06 1.06 0 0 1 .553.601 1.06 1.06 0 0 1 .062.412l-.001.105c-.006.104-.027.208-.063.306-.048.131-.122.252-.216.355s-.209.187-.336.245-.264.092-.404.098c-.278-.024-.536-.152-.725-.357s-.293-.474-.293-.753.105-.548.293-.753.447-.333.725-.357z"></path></svg></a><a href="https://twitter.com/spacetime_db" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M20 3.833c-.75.333-1.5.583-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1-.75-.833-1.833-1.333-3-1.333A4.09 4.09 0 0 0 9.833 6c0 .333 0 .667.083.917-3.5-.167-6.5-1.833-8.5-4.333a3.76 3.76 0 0 0-.583 2.083c0 1.417.75 2.667 1.833 3.417-.667 0-1.333-.167-1.833-.5v.083c0 2 1.417 3.667 3.25 4-.333.083-.667.167-1.083.167-.25 0-.5 0-.75-.083a3.95 3.95 0 0 0 3.833 2.833c-1.417 1.083-3.167 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.667v-.5c.833-.583 1.5-1.333 2.083-2.083z"></path></svg></a><a href="https://www.twitch.tv/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M3.55263 0L0 3.57143V16.4286H4.26316V20L7.81579 16.4286H10.6579L17.0526 10V0H3.55263ZM15.6316 9.28571L12.7895 12.1429H9.94737L7.46053 14.6429V12.1429H4.26316V1.42857H15.6316V9.28571Z M13.5 3.92857H12.0789V8.21429H13.5V3.92857Z M9.59211 3.92857H8.17105V8.21429H9.59211V3.92857Z"></path></svg></a><a href="https://www.youtube.com/@SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M19.833 6S19.667 4.583 19 4c-.75-.833-1.583-.833-2-.833L10 3l-7 .167C2.583 3.25 1.75 3.25 1 4c-.583.583-.833 2-.833 2S0 7.583 0 9.25v1.5C0 12.333.167 14 .167 14s.167 1.417.833 2c.75.833 1.75.75 2.167.833C4.75 17 10 17 10 17l7-.25c.417-.083 1.25-.083 2-.833.583-.583.833-2 .833-2s.167-1.583.167-3.25v-1.5C20 7.583 19.833 6 19.833 6zM7.917 12.583V7l5.417 2.833-5.417 2.75z"></path></svg></a></div></div><div class="BPQwEa_buttons"><button cy-data="" class="GM6BWG_button GM6BWG_primary BPQwEa_starUsBtn BPQwEa_starUsBtnMobile text-menu" aria-label="16K stars" type="button"><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M8.12384 7.08774C7.87849 6.97075 7.59345 6.97075 7.3481 7.08774C7.136 7.18886 7.01906 7.36444 6.96009 7.46077C6.89912 7.56035 6.83654 7.6872 6.77554 7.81084L5.48033 10.4348L2.58314 10.8583C2.44676 10.8782 2.30682 10.8986 2.19332 10.9259C2.08351 10.9523 1.88049 11.0094 1.71892 11.1799C1.53201 11.3772 1.44411 11.6483 1.47969 11.9178C1.51044 12.1507 1.64133 12.316 1.71475 12.4018C1.79064 12.4905 1.89197 12.5892 1.99073 12.6854L4.08627 14.7264L3.59181 17.6093C3.56847 17.7452 3.54452 17.8847 3.53531 18.0011C3.52639 18.1137 3.51777 18.3245 3.62995 18.5311C3.7597 18.7699 3.99034 18.9375 4.25762 18.987C4.4887 19.0299 4.68654 18.9565 4.79087 18.9132C4.89875 18.8684 5.02397 18.8026 5.14603 18.7383L7.73597 17.3763L10.3259 18.7383C10.448 18.8026 10.5732 18.8685 10.6811 18.9132C10.7854 18.9565 10.9832 19.0299 11.2143 18.987C11.4816 18.9375 11.7122 18.7699 11.842 18.5311C11.9542 18.3245 11.9455 18.1137 11.9366 18.0011C11.9274 17.8847 11.9035 17.7453 11.8801 17.6093L11.3857 14.7264L13.4812 12.6853C13.58 12.5892 13.6813 12.4905 13.7572 12.4018C13.8306 12.316 13.9615 12.1507 13.9922 11.9178C14.0278 11.6483 13.9399 11.3772 13.753 11.1799C13.5914 11.0094 13.3884 10.9523 13.2786 10.9259C13.1651 10.8986 13.0252 10.8782 12.8888 10.8583L9.99161 10.4348L8.69642 7.81089C8.63542 7.68724 8.57282 7.56036 8.51185 7.46077C8.45288 7.36444 8.33594 7.18886 8.12384 7.08774Z" fill="currentColor" stroke="rgba(0, 0, 0, 0)" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="10" cy="4" r="2" fill="currentColor"></circle><circle cx="3.5" cy="5.5" r="1.5" fill="currentColor"></circle><circle cx="6" cy="1" r="1" fill="currentColor"></circle></svg>16K stars</button></div><div class="BPQwEa_buttons"><a cy-data="" aria-label="try the demo" class="GM6BWG_button GM6BWG_secondary text-menu" type="button" data-discover="true" href="databases-and-data-oriented-design.html#demo" target=""><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M10.108 1.55c4.611 0 8.35 3.741 8.35 8.35h0v.208a8.36 8.36 0 0 1-8.35 8.35h0H9.9c-4.611 0-8.35-3.741-8.35-8.35h0V9.9c0-4.611 3.741-8.35 8.35-8.35h0zm0 1.5H9.9c-3.78 0-6.85 3.067-6.85 6.85h0v.208c0 3.78 3.067 6.85 6.85 6.85h0 .208a6.86 6.86 0 0 0 6.85-6.85h0V9.9c0-3.78-3.067-6.85-6.85-6.85h0zm.864 4.29l.084.073 2.048 2.056h0a.75.75 0 0 1 .108.136.74.74 0 0 1 .03.052c.006.012.012.024.017.036.011.024.02.048.028.072a.76.76 0 0 1 .009.031.75.75 0 0 1 .018.08.76.76 0 0 1 .005.034.75.75 0 0 1 .005.069c0 .016 0 .033 0 .049-.001.022-.003.043-.005.065-.002.015-.004.03-.007.045-.005.026-.011.051-.018.077a.73.73 0 0 1-.009.028.75.75 0 0 1-.033.082c-.003.007-.007.014-.01.021-.02.04-.045.078-.073.115l-.062.07-2.05 2.058a.75.75 0 0 1-1.135-.974l.072-.084.775-.779H7.425a.75.75 0 0 1-.102-1.493l.102-.007h3.345l-.776-.779a.75.75 0 0 1 .979-1.131z"></path></svg>try the demo</a><a cy-data="" aria-label="install" class="GM6BWG_button GM6BWG_primary text-menu" type="button" data-discover="true" href="../install.html" target=""><svg class="GM6BWG_leftIcon" style="min-width:20px" fill="none" width="20" height="20" viewBox="0 0 20 20"><path d="M15.333 6.25c1.703 0 3.069 1.339 3.162 3.064l.005.186v5.75c0 1.752-1.307 3.151-2.985 3.245l-.181.005H4.583c-1.703 0-3.07-1.339-3.162-3.064l-.005-.186V9.5c0-1.814 1.403-3.25 3.167-3.25a.75.75 0 1 1 0 1.5c-.879 0-1.588.679-1.661 1.595l-.006.155v5.75c0 .941.663 1.67 1.522 1.744l.145.006h10.75c.879 0 1.588-.679 1.661-1.595L17 15.25V9.5c0-.993-.739-1.75-1.667-1.75a.75.75 0 1 1 0-1.5zM9.377 9.854L7.044 7.438a.75.75 0 0 1 .996-1.116l.083.074 1.043 1.081v-5.06a.75.75 0 0 1 1.493-.102l.007.102v5.105l1.136-1.135a.75.75 0 0 1 1.133.977l-.073.084-2.417 2.417h0l-.009.009h0l-.025.023-.045.037-.005.004-.013.007-.007.007-.063.039-.022.012-.037.018-.024.01-.022.008-.023.008-.031.009-.047.011-.027.005-.052.007-.047.003h-.029l-.038-.001-.04-.003-.024-.003h0l-.014-.002-.028-.005-.04-.009-.038-.011-.026-.009-.031-.011-.049-.022-.038-.02a.72.72 0 0 1-.061-.038l-.024-.017c-.028-.021-.054-.044-.079-.069l-.009-.009z"></path></svg>install</a></div><div class="BPQwEa_background"><img src="../images/space-time-astrolabe.jpg" alt="Astrolabe" loading="lazy" width="1616" height="2444"/></div></div></div></div><div class="wtWGoa_root" style="padding-top:144px"><a class="_6BEXPq_backButton" data-discover="true" href="../blog.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M18 6L18 18" stroke="#B6C0CF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 12L13 12" stroke="#B6C0CF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.13135 8.75842L5 11.9302L8.13135 15.102" stroke="#B6C0CF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>ALL POSTS</a><div class="wtWGoa_root wtWGoa_root wtWGoa_blog"><h1 class="_6BEXPq_title">Databases are the endgame for data-oriented design</h1><div class="_6BEXPq_socials"><a href="https://github.com/ClockworkLabs/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M10.041 0C4.519 0 0 4.519 0 10.041a10.03 10.03 0 0 0 6.862 9.539c.502.084.669-.251.669-.502v-1.674c-2.761.586-3.347-1.339-3.347-1.339-.418-1.171-1.088-1.506-1.088-1.506-1.004-.586 0-.586 0-.586 1.004.084 1.506 1.004 1.506 1.004.92 1.506 2.343 1.088 2.929.837.084-.669.335-1.088.669-1.339-2.259-.251-4.602-1.088-4.602-4.937a4.04 4.04 0 0 1 1.004-2.678c0-.335-.418-1.339.167-2.678 0 0 .837-.251 2.761 1.004.837-.251 1.674-.335 2.51-.335s1.674.084 2.51.335c1.925-1.339 2.761-1.004 2.761-1.004.586 1.423.167 2.427.084 2.678.669.669 1.004 1.59 1.004 2.678 0 3.849-2.343 4.686-4.602 4.937.335.335.669.92.669 1.841v2.761c0 .251.167.586.669.502a10.03 10.03 0 0 0 6.862-9.539C20.083 4.519 15.564 0 10.041 0z"></path></svg></a><a href="https://discord.gg/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M16.7 0c.27.001.537.054.786.158s.475.256.666.447.341.418.444.668.155.517.155.787h0V20l-2.15-1.9-1.21-1.117-1.28-1.19.53 1.85H3.3c-.27-.001-.537-.054-.786-.158s-.475-.256-.666-.447-.341-.418-.444-.668-.155-.517-.155-.787h0V2.06c-.001-.27.052-.537.155-.787s.253-.476.444-.668.417-.343.666-.447S3.03.001 3.3 0h0 13.4zm-5.05 4.66l-.14.16c.911.242 1.759.675 2.49 1.27a8.15 8.15 0 0 0-3.013-.963 8.46 8.46 0 0 0-2.02.02c-.056.002-.112.009-.167.02a7.51 7.51 0 0 0-2.27.633l-.59.29a6.75 6.75 0 0 1 2.637-1.31h0l-.1-.12c-1.023.051-2.005.417-2.81 1.05a13.39 13.39 0 0 0-1.44 5.833c.345.484.803.876 1.335 1.141s1.121.395 1.715.379l.667-.833a3.11 3.11 0 0 1-1.75-1.18c.357.239.739.437 1.14.59a8.39 8.39 0 0 0 1.467.43c.855.164 1.734.168 2.59.01a6.58 6.58 0 0 0 1.45-.43 5.72 5.72 0 0 0 1.15-.59c-.444.598-1.085 1.019-1.81 1.19l.07.088.142.177.448.545c.595.015 1.185-.115 1.718-.379s.994-.655 1.342-1.138a13.39 13.39 0 0 0-1.44-5.833c-.805-.633-1.787-.999-2.81-1.05h0zm.056 3.727l.134.003c.14.006.277.039.404.098s.241.142.336.245.168.224.216.355.07.271.064.411c0 .224-.068.444-.194.629s-.306.328-.515.41-.438.098-.656.047-.417-.166-.569-.332-.25-.372-.282-.594.004-.449.102-.65.256-.368.451-.479.419-.159.643-.14l-.134-.003zM8.19 8.39c.14.005.278.038.405.097a1.06 1.06 0 0 1 .553.601 1.06 1.06 0 0 1 .062.412l-.001.105c-.006.104-.027.208-.063.306-.048.131-.122.252-.216.355s-.209.187-.336.245-.264.092-.404.098c-.278-.024-.536-.152-.725-.357s-.293-.474-.293-.753.105-.548.293-.753.447-.333.725-.357z"></path></svg></a><a href="https://twitter.com/spacetime_db" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M20 3.833c-.75.333-1.5.583-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1-.75-.833-1.833-1.333-3-1.333A4.09 4.09 0 0 0 9.833 6c0 .333 0 .667.083.917-3.5-.167-6.5-1.833-8.5-4.333a3.76 3.76 0 0 0-.583 2.083c0 1.417.75 2.667 1.833 3.417-.667 0-1.333-.167-1.833-.5v.083c0 2 1.417 3.667 3.25 4-.333.083-.667.167-1.083.167-.25 0-.5 0-.75-.083a3.95 3.95 0 0 0 3.833 2.833c-1.417 1.083-3.167 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.667v-.5c.833-.583 1.5-1.333 2.083-2.083z"></path></svg></a><a href="https://www.twitch.tv/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M3.55263 0L0 3.57143V16.4286H4.26316V20L7.81579 16.4286H10.6579L17.0526 10V0H3.55263ZM15.6316 9.28571L12.7895 12.1429H9.94737L7.46053 14.6429V12.1429H4.26316V1.42857H15.6316V9.28571Z M13.5 3.92857H12.0789V8.21429H13.5V3.92857Z M9.59211 3.92857H8.17105V8.21429H9.59211V3.92857Z"></path></svg></a><a href="https://www.youtube.com/@SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M19.833 6S19.667 4.583 19 4c-.75-.833-1.583-.833-2-.833L10 3l-7 .167C2.583 3.25 1.75 3.25 1 4c-.583.583-.833 2-.833 2S0 7.583 0 9.25v1.5C0 12.333.167 14 .167 14s.167 1.417.833 2c.75.833 1.75.75 2.167.833C4.75 17 10 17 10 17l7-.25c.417-.083 1.25-.083 2-.833.583-.583.833-2 .833-2s.167-1.583.167-3.25v-1.5C20 7.583 19.833 6 19.833 6zM7.917 12.583V7l5.417 2.833-5.417 2.75z"></path></svg></a></div><div class="_6BEXPq_separator" role="separator"></div><h3 class="_6BEXPq_header"><span class="-Ad55a_date">December 6th, 2023</span> · <span><a href="https://twitter.com/TylerFCloutier">Tyler Cloutier</a></span></h3><article class="sc30Jq_mdc md-body-docs line-break"><p>For the first SpacetimeDB blog post, I’d like to clear up some confusion that I’ve seen arise in discussions about SpacetimeDB and address some general misperceptions about databases.</p>
<p>My sense is that many people understand databases to be “a way to store and query data which is persisted to disk” and that the <a href="https://en.wikipedia.org/wiki/Relational_model">relational model</a> of data, while necessary for querying data, is otherwise an inconvenience which requires us to transform our data into a form which can be used in our general purpose programming languages.</p>
<p>By the end of this blog post, I hope that you will agree that not only do databases go far beyond managing persistent storage, but that they offer a principled system for organizing program memory in general and offer a general purpose solution to the performance and data modeling problems that data-oriented design and <a href="https://en.wikipedia.org/wiki/Entity_component_system">ECS</a> were invented to solve. As the title suggests, I argue that databases are the logical conclusion you arrive at if you push data-oriented design as far as it will go.</p>
<p>I have generally found that most computer science was done by 1970, and if you think you’ve come up with a new clever idea, probably check the 60s again. It turns out <a href="https://en.wikipedia.org/wiki/Edgar_F._Codd">Ted Codd</a> had it right in <a href="https://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf">1969</a> and we’ve been disregarding his work at our own peril ever since.</p>
<h3 id="what-is-data-oriented-design">What is data-oriented design<a href="#what-is-data-oriented-design" class="permalink"><span class="visually-hidden"></span></a></h3><p>If we want to know how databases and data-oriented design are related, then we first need a basic understanding of data-oriented design.</p>
<p>Data-oriented design (DOD) is a programming paradigm that focuses on the efficient and flexible organization, processing, and storage of data. It was originally developed for use in games since games are extremely complex and interconnected systems with very high performance requirements and latency sensitivity. In short, the “normal” programming strategies (especially Object-oriented Design) weren’t cutting it.</p>
<p>At its heart is the honest recognition that the ultimate purpose of any program is to transform data from one form to another, and that we should seek to do this transformation in the most efficient way possible. For example, if you are writing a graphics program, you need to transform data from a scene representation to graphics buffers which are sent to the GPU. If you are writing a compiler you need to convert the program from text to a structured binary executable, and so forth.</p>
<p>A major component of DOD is taking into account the physical realities of computer components to determine the most efficient mechanism for performing those transformations. For example, DOD emphasizes efficient data layout in memory, aiming to minimize cache misses and ensure data is stored contiguously. This approach improves performance by leveraging the cache hierarchy of modern CPUs more effectively.</p>
<p>This is of course just the tip of the iceberg for techniques in DOD. I recommend Richard Fabian’s <a href="https://www.dataorienteddesign.com/dodmain/">fantastic book</a> on the subject if you’d like to learn more.</p>
<h3 id="ecs-entity-component-system">ECS (Entity Component System)<a href="#ecs-entity-component-system" class="permalink"><span class="visually-hidden"></span></a></h3><p>ECS is a programming pattern that is often associated with DOD which was developed to allow people to create more complex and higher performance games. The idea is to achieve two main goals:</p>
<ol>
<li>Provide a data model which allows for complex data interactions while allowing for future feature additions or refactorings.</li>
<li>Provide an efficient way to arrange data in memory to take the most advantage of the CPU cache.</li>
</ol>
<p>In the ECS pattern, these goals are achieved by creating a unique identifier to represent “entities” (sometimes called “objects”, not to be confused with OOP objects) in a game. Those identifiers are then made meaningful by associating pieces of data, called “components”, with those identifiers. Several components can be composed together on an entity to create complex data representations. Systems are transforms (code) that operate on entities with a certain set of components. For example, we could imagine a basic ECS with the following components.</p>
<blockquote class="blockquote-md">
    <div class="top">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="256"
            height="256"
            viewBox="0 0 256 256"
        >
            <path
                fill="white"
                d="M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h108.69a15.92 15.92 0 0 0 11.31-4.69L219.31 168a15.92 15.92 0 0 0 4.69-11.31V48a16 16 0 0 0-16-16ZM96 88h64a8 8 0 0 1 0 16H96a8 8 0 0 1 0-16Zm32 80H96a8 8 0 0 1 0-16h32a8 8 0 0 1 0 16Zm-32-32a8 8 0 0 1 0-16h64a8 8 0 0 1 0 16Zm64 68.69V160h44.7Z"
            />
        </svg>
        <p class="blockquote-p">Note</p>
    </div>
    <div><p>NOTE: I’m using Rust syntax for this example, but the concept is language agnostic.</p></div>
</blockquote>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#6272A4">/// This is the “entity” identifier</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Entity</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">u32</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/// This is a “component”</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Position</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    x</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    y</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    z</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/// This is a “component”</span></span>
<span class="line"><span style="color:#6272A4">/// Yes I am aware that you would not normally have a separate type</span></span>
<span class="line"><span style="color:#6272A4">/// for position and velocity.</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Velocity</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    x</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    y</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    z</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> f32</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/// This is another “component”</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Player</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    username</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> String</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/// This is another “component”</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Enemy</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    target</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Entity</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>And we could imagine transforming this data with the following system:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#6272A4">/// This is a “system”</span></span>
<span class="line"><span style="color:#FF79C6">fn</span><span style="color:#50FA7B"> update_position_system</span><span style="color:#F8F8F2">(entity</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Entity</span><span style="color:#F8F8F2">, position</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Position</span><span style="color:#F8F8F2">, velocity</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Velocity</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">    position </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> velocity;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><blockquote>
<p>NOTE: The function above operates on a single entity at a time, although the idea is that this function will be run for every single entity that has a <code>Position</code> component and a <code>Velocity</code> component every frame. Also note that I’m omitting the plumbing to set up calling the system on each entity as this is typically provided by the particular ECS framework. Managing this is a major part of what ECS frameworks provide.</p>
<p>The API might be something like <code>ecs::register_system(update_position_system)</code>, type system wrangling details notwithstanding.</p>
</blockquote>
<p>Note that because ECS was built for games, there is an implicit assumption that your program executes data transforms during “frames”. A frame being a fixed length duration of time in which every system is executed on every entity that it matches.</p>
<p>The power of the ECS data model is that the behavior of an entity is not determined by code written for a specific kind of entity, but rather by systems (aka transforms) which operate on entities that “match” the set of components which is relevant to them.</p>
<p>In this way, the behavior of an entity can be changed simply by adding or removing components which alters which transforms the entity is affected by. Behavior is changed through component composition, rather than inheritance.</p>
<p>For example, in our small ECS above, all entities with a position are moved regardless of whether or not they are players or enemies. The basic assumption of the <code>update_position_system</code> is that the position and velocity components are the only data required to move an entity in our world. In reality, you may have many systems which match different subsets of components. The act of a system “matching” a set of components, can be thought of as that system “querying” all the data in the program and running on all entities matching that query, just as we did with <code>Velocity</code> and <code>Position</code> above. In fact, many ECS systems actually refer to this as “querying”, for example <a href="https://github.com/SanderMertens/flecs">FLECS</a> or <a href="https://bevyengine.org/">Bevy</a>.</p>
<p>Note that in many cases, systems only allow querying the data in a very specific way, namely, you can query for entities which have <em>all</em> of the components in the query. FLECS is a notable exception, as it implements a more general query system inspired by databases which I will discuss a bit further down.</p>
<blockquote class="blockquote-md">
    <div class="top">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="256"
            height="256"
            viewBox="0 0 256 256"
        >
            <path
                fill="white"
                d="M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h108.69a15.92 15.92 0 0 0 11.31-4.69L219.31 168a15.92 15.92 0 0 0 4.69-11.31V48a16 16 0 0 0-16-16ZM96 88h64a8 8 0 0 1 0 16H96a8 8 0 0 1 0-16Zm32 80H96a8 8 0 0 1 0-16h32a8 8 0 0 1 0 16Zm-32-32a8 8 0 0 1 0-16h64a8 8 0 0 1 0 16Zm64 68.69V160h44.7Z"
            />
        </svg>
        <p class="blockquote-p">Note</p>
    </div>
    <div><p>SPOILER ALERT: This is an inner join on the entity id.</p></div>
</blockquote>
<p>Note that ECS can be made quite performant on modern CPUs by storing components contiguously in memory and clustered together with other components which are also queried together so that, as one entity is processed by a system, the components for the next entities are being prefetched or are already loaded into cache.</p>
<h3 id="ecs-is-a-weak-sauce-relational-model">ECS is a weak-sauce relational model<a href="#ecs-is-a-weak-sauce-relational-model" class="permalink"><span class="visually-hidden"></span></a></h3><p>Maybe the title of this section is a little spicy, but once you see it, you can’t unsee it. Once you begin using ECS you almost immediately find that you can’t represent certain constraints or relationships in your data or that modeling certain kinds of data feels awkward or shoehorned into the data model.</p>
<p>For example, how would you model chat messages in your game? I suppose you’d have to represent that as an entity in your game. How would you represent a constraint that would prevent a health component from being added to your chat message erroneously? In ECS it’s straightforward to create a system which operates on chat messages individually, but how would you query your chat messages so that you can display them in order? How would you model an entity which has many instances of the same component? How would I model a friends list where all players have many friends who are also players?</p>
<p>It’s clear that the ECS data model is quite powerful for modeling certain types of data, like entities in a game world, but is not quite general enough to model all types of application data. What at first appears to be awkwardness or annoyances is actually a fundamental limitation of the ECS data model.</p>
<p>So I raise the question: is there a data model, similar to the ECS data model, that has proven itself capable and general enough of representing all manner of application data for over 50 years of software development?</p>
<p><img src="../images/ted-codd-excited.jpg" alt="Ted Codd looks into your soul"></p>
<p>You bet there is!</p>
<p>Implementation details aside – although we’ll get to that too – at its core the ECS data model is baby’s first relational model. More precisely, the ECS data model is a strict subset of the relational model; relations can represent everything in the ECS model plus more.</p>
<p>We can demonstrate this by implementing the ECS data model within the relational model. We can translate ECS to the relational model by representing entities by an <code>Entity</code> table with a single column:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> Entity</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    id </span><span style="color:#FF79C6">SERIAL</span><span style="color:#FF79C6"> PRIMARY KEY</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>Next we can represent each component as a table with a foreign key constraint on the <code>entity_id</code>.</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> Position</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    entity_id </span><span style="color:#FF79C6">INT</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    x </span><span style="color:#FF79C6">FLOAT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    y </span><span style="color:#FF79C6">FLOAT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    z </span><span style="color:#FF79C6">FLOAT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">    FOREIGN KEY</span><span style="color:#F8F8F2"> (entity_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> Entity(id)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> Velocity</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    entity_id </span><span style="color:#FF79C6">INT</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    x </span><span style="color:#FF79C6">FLOAT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    y </span><span style="color:#FF79C6">FLOAT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    z </span><span style="color:#FF79C6">FLOAT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">    FOREIGN KEY</span><span style="color:#F8F8F2"> (entity_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> Entity(id)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> Player</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    entity_id </span><span style="color:#FF79C6">INT</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    username </span><span style="color:#FF79C6">TEXT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">    FOREIGN KEY</span><span style="color:#F8F8F2"> (entity_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> Entity(id)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> Enemy</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    entity_id </span><span style="color:#FF79C6">INT</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    target_entity_id </span><span style="color:#FF79C6">INT</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">    FOREIGN KEY</span><span style="color:#F8F8F2"> (entity_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> Entity(id),</span></span>
<span class="line"><span style="color:#FF79C6">    FOREIGN KEY</span><span style="color:#F8F8F2"> (target_entity_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> Entity(id)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><blockquote class="blockquote-md">
    <div class="top">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="256"
            height="256"
            viewBox="0 0 256 256"
        >
            <path
                fill="white"
                d="M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h108.69a15.92 15.92 0 0 0 11.31-4.69L219.31 168a15.92 15.92 0 0 0 4.69-11.31V48a16 16 0 0 0-16-16ZM96 88h64a8 8 0 0 1 0 16H96a8 8 0 0 1 0-16Zm32 80H96a8 8 0 0 1 0-16h32a8 8 0 0 1 0 16Zm-32-32a8 8 0 0 1 0-16h64a8 8 0 0 1 0 16Zm64 68.69V160h44.7Z"
            />
        </svg>
        <p class="blockquote-p">Note</p>
    </div>
    <div><p>NOTE: I am using PostgreSQL to represent these relations because many people are familiar, but any relational representation will do, and <a href="https://www.scattered-thoughts.net/writing/against-sql/">arguably</a> SQL is quite a poor one.</p></div>
</blockquote>
<p>Once we break it down this way, it’s pretty easy to see that the ECS model is just the relational model with the following restrictions:</p>
<ol>
<li>There is an entity table with a single unique <code>id</code> column.</li>
<li>All other tables must have a unique, foreign key reference to the entity <code>id</code>.</li>
<li>Systems (aka queries) must execute on every entity they match, every “frame”.</li>
<li>Systems may only execute and operate on <code>INNER JOIN</code> queries on the entity <code>id</code>.</li>
</ol>
<p>That’s really all there is to it. This is now identical to the ECS data model. Restriction 3, in particular, is interesting because it implicitly assumes that your program’s logic must have a scheduler which runs all queries multiple times per second at fixed intervals. That’s a common need for <em>some</em> games, but certainly not all games and definitely not most other types of applications.</p>
<blockquote>
<p>As an aside, I would like to point out that notable ECS implementations, such as FLECS, are working towards eliminating, or have already eliminated restriction number 4 by adding in more expressive query engines into their frameworks. In fact, FLECS is especially notable for this because it uses a variant of Datalog which in its recursive form is <a href="https://deepblue.lib.umich.edu/bitstream/handle/2027.42/31164/0000063.pdf?sequence=1&amp;isAllowed=y">strictly more expressive</a> than the relational model which is based on first-order logic.</p>
<p>Please note, I’m not an expert on first order logic or Datalog and I’d love to see some discussion about this. <a href="https://ajmmertens.medium.com/why-it-is-time-to-start-thinking-of-games-as-databases-e7971da33ac3">This blog post</a> from Sander Mertens, the creator of FLECS, is particularly enlightening, although I wholeheartedly reject the statement that “database[s]... are, put plainly, too slow.”</p>
</blockquote>
<p>Why not go further though? Why not free ourselves completely from the shackles of these restrictions? Why not embrace the full power of the relational model?</p>
<p><img src="../images/emperor-ted-codd.png" alt="Emperor Ted Codd"></p>
<p>The keen amongst you are probably crying out that it must be the details of how ECS is implemented and optimized for games that make it more performant than a general purpose database in the context of games. After all, databases are slow, and ECS is fast! Databases have all kinds of other requirements like transactions and ACID constraints! How could a database ever process and update millions of entities per second?</p>
<p>That is where you’d be mistaken… mostly.</p>
<h3 id="databases-arent-slow">Databases aren’t slow<a href="#databases-arent-slow" class="permalink"><span class="visually-hidden"></span></a></h3><p>Databases are perhaps the most performant, well optimized, highly multithreaded programs ever written. There has been 50+ years of research applied to the problem of executing queries on row formatted data. The problem has been studied from almost every conceivable angle: high throughput, low latency, high write volume, high read volume, large rows, small rows, locking, lock-free, single version concurrency control, multi version concurrency control, strict transaction isolation, loose transaction isolation, you name it.</p>
<p>I think that people perceive databases to be slow, not because they are slow, but because they often interact with them in the context of persisting data to disk, from across a network, by passing strings back and forth which must be parsed, compiled and executed. If you’ve ever optimized a program, you know that I just listed pretty much the slowest operations you can do on a computer.</p>
<p>It turns out that an enormous amount of research has focused on in-memory databases, and that many of the optimizations that are built into ECS are already employed by certain databases in a configurable way. For example, consider “<a href="https://docs.unity3d.com/Packages/com.unity.entities@1.0/manual/concepts-archetypes.html#:~:text=An%20archetype%20is%20a%20unique,and%20B%20share%20an%20archetype.">archetype</a>”s in ECS. Archetypes are an optimization whereby entities which share the same exact set of components are stored in the same physical location. This allows an ECS framework to satisfy a system’s predicate without having to filter rows that are missing certain components. It turns out that certain database systems already implement this optimization as a “pre-join” operation at the storage layer. That is, they physically store the tables pre-joined if these kinds of operations are common or this is manually configured by the user. Another similar technique is creating a materialized view, although that requires making a copy of the data.</p>
<p>Another common optimization in ECS is to divide the work of a given system onto multiple cores by partitioning a group of entities onto each core and processing them separately. This is commonly referred to as a <a href="https://www.postgresql.org/docs/current/parallel-query.html">parallel query</a> and is particularly suited to updating many rows in a single query, just as is the case in ECS.</p>
<p>There are database systems that easily achieve millions of transactions per second for in-memory data. For example, consider <a href="https://faculty.cc.gatech.edu/~jarulraj/courses/4420-s19/papers/06-mvcc2/lim-sigmod2017.pdf">Cicada</a>:</p>
<blockquote>
<p>It handles up to 2.07 M TPC-C transactions per second and 56.5 M YCSB transactions per second, and scans up to 356 M records per second on a single 28-core machine.</p>
<p>For the record, the Yahoo! Cloud Serving Benchmark (YCSB) is a framework for evaluating the performance of various types of databases, particularly NoSQL systems. The TPC-C benchmark, developed by the Transaction Processing Performance Council (TPC), simulates a complete computing environment where a population of users executes transactions against a database with a combination of common types of queries.</p>
</blockquote>
<p>Or consider <a href="https://db.in.tum.de/~muehlbau/papers/mvcc.pdf">HyPer</a>, which can achieve nearly a million <a href="https://en.wikipedia.org/wiki/Serializability">serializable</a> transactions per second. These are truly incredible numbers, particularly when you consider that this is an apples to oranges comparison - databases are more flexible and provide stronger ACID guarantees than an ECS.</p>
<p>Databases are much faster than you think.</p>
<h3 id="where-do-we-go-from-here">Where do we go from here?<a href="#where-do-we-go-from-here" class="permalink"><span class="visually-hidden"></span></a></h3><p>It is of course the case that the additional constraints of ECS allow you to make different optimizations that will allow ECS systems to outperform database systems in certain scenarios. Notably, databases which are designed to provide transactional semantics will always have overhead related to providing those guarantees.</p>
<p>My central thesis is that this is beside the point. My real point is that viewing our programs as databases gives us a structured framework within which to evaluate them. It provides a general and structured way to represent and transform our app data, a framework in which we can pick and choose which features and performance tradeoffs make the most sense for our particular application, and a framework by which we can evaluate the performance of our systems against standardized metrics.</p>
<p>The ECS community seems to be <a href="https://ajmmertens.medium.com/why-it-is-time-to-start-thinking-of-games-as-databases-e7971da33ac3">moving in this direction</a> already and I couldn’t be more excited to see where it goes.</p>
<p>Here at Clockwork Labs, we’re putting our money where our mouth is. Our MMORPG <a href="https://bitcraftonline.com/">BitCraft</a> is implemented 100% as a WebAssembly stored procedure inside of our real-time, low latency, in-memory database, <a href="https://github.com/clockworklabs/spacetimedb">SpacetimeDB</a>.</p>
<p>This is what a typical SpacetimeDB stored procedure function would look like:</p>

<pre class="shiki spacetime-dark" style="background-color:var(--color-bg);color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#6272A4">/// NOTE: If you’re looking for the `join!` macro in our current docs, we haven’t added this functionality as of `v0.7` so you’d have to join manually in this case.</span></span>
<span class="line"><span style="color:#F8F8F2">#[spacetimedb(reducer)]</span></span>
<span class="line"><span style="color:#FF79C6">fn</span><span style="color:#50FA7B"> update_position_system</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#F8F8F2"> (position, velocity) </span><span style="color:#FF79C6">in</span><span style="color:#50FA7B"> join!</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">Position</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Velocity</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">        position </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> velocity;</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        Position</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">update_by_entity_id</span><span style="color:#F8F8F2">(position</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">entity_id, position);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code> <button data-copy-code>
    <svg
        class="md-copy-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <g fill="white">
            <path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z" />
            <path d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z" />
        </g>
    </svg>
</button></pre><p>As you can see, this is just regular ECS implemented in the relational model and it’s how we run the entire game. I hope you agree that this idea doesn’t seem quite as crazy as it might have at the beginning of this post.</p>
<p>For so long, we’ve all taken an unprincipled approach to the pile of pointers and loose data in the runtime of our programs. The philosophy of data-oriented design is centered around the idea that transforming data is the ultimate purpose of any program. I think it’s about time we took that idea seriously and learned from the people that have taken that idea seriously since 1969. We’re in the endgame now.</p>
<p><img src="../images/ted-codd-endgame.jpg" alt="Ted Codd Endgame"></p>
<h3 id="credits">Credits<a href="#credits" class="permalink"><span class="visually-hidden"></span></a></h3><ul>
<li>Thank you to Sander Mertens for the interesting discussions on this topic.</li>
<li>Thank you to Phoebe Goldman for inspiration and review of this post.</li>
<li>Thanks to Richard Fabian for writing such an inspirational book.</li>
</ul>
</article><div class="_6BEXPq_separator" role="separator"></div><div class="_6BEXPq_socials"><a href="https://github.com/ClockworkLabs/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M10.041 0C4.519 0 0 4.519 0 10.041a10.03 10.03 0 0 0 6.862 9.539c.502.084.669-.251.669-.502v-1.674c-2.761.586-3.347-1.339-3.347-1.339-.418-1.171-1.088-1.506-1.088-1.506-1.004-.586 0-.586 0-.586 1.004.084 1.506 1.004 1.506 1.004.92 1.506 2.343 1.088 2.929.837.084-.669.335-1.088.669-1.339-2.259-.251-4.602-1.088-4.602-4.937a4.04 4.04 0 0 1 1.004-2.678c0-.335-.418-1.339.167-2.678 0 0 .837-.251 2.761 1.004.837-.251 1.674-.335 2.51-.335s1.674.084 2.51.335c1.925-1.339 2.761-1.004 2.761-1.004.586 1.423.167 2.427.084 2.678.669.669 1.004 1.59 1.004 2.678 0 3.849-2.343 4.686-4.602 4.937.335.335.669.92.669 1.841v2.761c0 .251.167.586.669.502a10.03 10.03 0 0 0 6.862-9.539C20.083 4.519 15.564 0 10.041 0z"></path></svg></a><a href="https://discord.gg/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M16.7 0c.27.001.537.054.786.158s.475.256.666.447.341.418.444.668.155.517.155.787h0V20l-2.15-1.9-1.21-1.117-1.28-1.19.53 1.85H3.3c-.27-.001-.537-.054-.786-.158s-.475-.256-.666-.447-.341-.418-.444-.668-.155-.517-.155-.787h0V2.06c-.001-.27.052-.537.155-.787s.253-.476.444-.668.417-.343.666-.447S3.03.001 3.3 0h0 13.4zm-5.05 4.66l-.14.16c.911.242 1.759.675 2.49 1.27a8.15 8.15 0 0 0-3.013-.963 8.46 8.46 0 0 0-2.02.02c-.056.002-.112.009-.167.02a7.51 7.51 0 0 0-2.27.633l-.59.29a6.75 6.75 0 0 1 2.637-1.31h0l-.1-.12c-1.023.051-2.005.417-2.81 1.05a13.39 13.39 0 0 0-1.44 5.833c.345.484.803.876 1.335 1.141s1.121.395 1.715.379l.667-.833a3.11 3.11 0 0 1-1.75-1.18c.357.239.739.437 1.14.59a8.39 8.39 0 0 0 1.467.43c.855.164 1.734.168 2.59.01a6.58 6.58 0 0 0 1.45-.43 5.72 5.72 0 0 0 1.15-.59c-.444.598-1.085 1.019-1.81 1.19l.07.088.142.177.448.545c.595.015 1.185-.115 1.718-.379s.994-.655 1.342-1.138a13.39 13.39 0 0 0-1.44-5.833c-.805-.633-1.787-.999-2.81-1.05h0zm.056 3.727l.134.003c.14.006.277.039.404.098s.241.142.336.245.168.224.216.355.07.271.064.411c0 .224-.068.444-.194.629s-.306.328-.515.41-.438.098-.656.047-.417-.166-.569-.332-.25-.372-.282-.594.004-.449.102-.65.256-.368.451-.479.419-.159.643-.14l-.134-.003zM8.19 8.39c.14.005.278.038.405.097a1.06 1.06 0 0 1 .553.601 1.06 1.06 0 0 1 .062.412l-.001.105c-.006.104-.027.208-.063.306-.048.131-.122.252-.216.355s-.209.187-.336.245-.264.092-.404.098c-.278-.024-.536-.152-.725-.357s-.293-.474-.293-.753.105-.548.293-.753.447-.333.725-.357z"></path></svg></a><a href="https://twitter.com/spacetime_db" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M20 3.833c-.75.333-1.5.583-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1-.75-.833-1.833-1.333-3-1.333A4.09 4.09 0 0 0 9.833 6c0 .333 0 .667.083.917-3.5-.167-6.5-1.833-8.5-4.333a3.76 3.76 0 0 0-.583 2.083c0 1.417.75 2.667 1.833 3.417-.667 0-1.333-.167-1.833-.5v.083c0 2 1.417 3.667 3.25 4-.333.083-.667.167-1.083.167-.25 0-.5 0-.75-.083a3.95 3.95 0 0 0 3.833 2.833c-1.417 1.083-3.167 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.667v-.5c.833-.583 1.5-1.333 2.083-2.083z"></path></svg></a><a href="https://www.twitch.tv/SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M3.55263 0L0 3.57143V16.4286H4.26316V20L7.81579 16.4286H10.6579L17.0526 10V0H3.55263ZM15.6316 9.28571L12.7895 12.1429H9.94737L7.46053 14.6429V12.1429H4.26316V1.42857H15.6316V9.28571Z M13.5 3.92857H12.0789V8.21429H13.5V3.92857Z M9.59211 3.92857H8.17105V8.21429H9.59211V3.92857Z"></path></svg></a><a href="https://www.youtube.com/@SpacetimeDB" target="_blank" rel="noreferrer"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M19.833 6S19.667 4.583 19 4c-.75-.833-1.583-.833-2-.833L10 3l-7 .167C2.583 3.25 1.75 3.25 1 4c-.583.583-.833 2-.833 2S0 7.583 0 9.25v1.5C0 12.333.167 14 .167 14s.167 1.417.833 2c.75.833 1.75.75 2.167.833C4.75 17 10 17 10 17l7-.25c.417-.083 1.25-.083 2-.833.583-.583.833-2 .833-2s.167-1.583.167-3.25v-1.5C20 7.583 19.833 6 19.833 6zM7.917 12.583V7l5.417 2.833-5.417 2.75z"></path></svg></a></div></div><footer class="_8-Tv9a_footer"><div class="_8-Tv9a_row"><div class="_8-Tv9a_col"><a class="_8-Tv9a_logo" data-discover="true" href="../index.html"><img src="../images/brand.png" alt="SpacetimeDB" width="390" height="96"/></a><div class="_8-Tv9a_about text-body-2"><p>SpacetimeDB is designed and engineered by<!-- --> <a href="https://clockworklabs.io/" target="_blank" rel="noreferrer">Clockwork Labs</a>.</p><p>With an SQL-style query language, real-time subscription queries, fully programmable permissions, transactional updates, and ultra high performance thanks to embedded application logic, it is the next generation serverless database.</p></div></div><div class="_8-Tv9a_col"><h4 class="_8-Tv9a_title text-xs">Navigation</h4><nav class="_8-Tv9a_nav"><a data-discover="true" class="text-menu" href="../install.html">Install</a><a data-discover="true" class="text-menu" href="../pricing.html">Pricing</a><a data-discover="true" class="text-menu" href="../maincloud.html">Maincloud</a><a data-discover="true" class="text-menu" href="../docs.html">Docs</a><a data-discover="true" aria-current="page" class="text-menu _8-Tv9a_active" href="../blog.html">Blog</a><a data-discover="true" class="text-menu" href="../community.html">Community</a></nav></div><div class="_8-Tv9a_col"><h4 class="_8-Tv9a_title text-xs">Community</h4><div class="_8-Tv9a_socials"><a href="https://github.com/ClockworkLabs/SpacetimeDB" target="_blank" rel="noreferrer" aria-label="github"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M10.041 0C4.519 0 0 4.519 0 10.041a10.03 10.03 0 0 0 6.862 9.539c.502.084.669-.251.669-.502v-1.674c-2.761.586-3.347-1.339-3.347-1.339-.418-1.171-1.088-1.506-1.088-1.506-1.004-.586 0-.586 0-.586 1.004.084 1.506 1.004 1.506 1.004.92 1.506 2.343 1.088 2.929.837.084-.669.335-1.088.669-1.339-2.259-.251-4.602-1.088-4.602-4.937a4.04 4.04 0 0 1 1.004-2.678c0-.335-.418-1.339.167-2.678 0 0 .837-.251 2.761 1.004.837-.251 1.674-.335 2.51-.335s1.674.084 2.51.335c1.925-1.339 2.761-1.004 2.761-1.004.586 1.423.167 2.427.084 2.678.669.669 1.004 1.59 1.004 2.678 0 3.849-2.343 4.686-4.602 4.937.335.335.669.92.669 1.841v2.761c0 .251.167.586.669.502a10.03 10.03 0 0 0 6.862-9.539C20.083 4.519 15.564 0 10.041 0z"></path></svg></a><a href="https://discord.gg/SpacetimeDB" target="_blank" rel="noreferrer" aria-label="discord"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M16.7 0c.27.001.537.054.786.158s.475.256.666.447.341.418.444.668.155.517.155.787h0V20l-2.15-1.9-1.21-1.117-1.28-1.19.53 1.85H3.3c-.27-.001-.537-.054-.786-.158s-.475-.256-.666-.447-.341-.418-.444-.668-.155-.517-.155-.787h0V2.06c-.001-.27.052-.537.155-.787s.253-.476.444-.668.417-.343.666-.447S3.03.001 3.3 0h0 13.4zm-5.05 4.66l-.14.16c.911.242 1.759.675 2.49 1.27a8.15 8.15 0 0 0-3.013-.963 8.46 8.46 0 0 0-2.02.02c-.056.002-.112.009-.167.02a7.51 7.51 0 0 0-2.27.633l-.59.29a6.75 6.75 0 0 1 2.637-1.31h0l-.1-.12c-1.023.051-2.005.417-2.81 1.05a13.39 13.39 0 0 0-1.44 5.833c.345.484.803.876 1.335 1.141s1.121.395 1.715.379l.667-.833a3.11 3.11 0 0 1-1.75-1.18c.357.239.739.437 1.14.59a8.39 8.39 0 0 0 1.467.43c.855.164 1.734.168 2.59.01a6.58 6.58 0 0 0 1.45-.43 5.72 5.72 0 0 0 1.15-.59c-.444.598-1.085 1.019-1.81 1.19l.07.088.142.177.448.545c.595.015 1.185-.115 1.718-.379s.994-.655 1.342-1.138a13.39 13.39 0 0 0-1.44-5.833c-.805-.633-1.787-.999-2.81-1.05h0zm.056 3.727l.134.003c.14.006.277.039.404.098s.241.142.336.245.168.224.216.355.07.271.064.411c0 .224-.068.444-.194.629s-.306.328-.515.41-.438.098-.656.047-.417-.166-.569-.332-.25-.372-.282-.594.004-.449.102-.65.256-.368.451-.479.419-.159.643-.14l-.134-.003zM8.19 8.39c.14.005.278.038.405.097a1.06 1.06 0 0 1 .553.601 1.06 1.06 0 0 1 .062.412l-.001.105c-.006.104-.027.208-.063.306-.048.131-.122.252-.216.355s-.209.187-.336.245-.264.092-.404.098c-.278-.024-.536-.152-.725-.357s-.293-.474-.293-.753.105-.548.293-.753.447-.333.725-.357z"></path></svg></a><a href="https://twitter.com/spacetime_db" target="_blank" rel="noreferrer" aria-label="twitter"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M20 3.833c-.75.333-1.5.583-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1-.75-.833-1.833-1.333-3-1.333A4.09 4.09 0 0 0 9.833 6c0 .333 0 .667.083.917-3.5-.167-6.5-1.833-8.5-4.333a3.76 3.76 0 0 0-.583 2.083c0 1.417.75 2.667 1.833 3.417-.667 0-1.333-.167-1.833-.5v.083c0 2 1.417 3.667 3.25 4-.333.083-.667.167-1.083.167-.25 0-.5 0-.75-.083a3.95 3.95 0 0 0 3.833 2.833c-1.417 1.083-3.167 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.667v-.5c.833-.583 1.5-1.333 2.083-2.083z"></path></svg></a><a href="https://www.twitch.tv/SpacetimeDB" target="_blank" rel="noreferrer" aria-label="twitch"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M3.55263 0L0 3.57143V16.4286H4.26316V20L7.81579 16.4286H10.6579L17.0526 10V0H3.55263ZM15.6316 9.28571L12.7895 12.1429H9.94737L7.46053 14.6429V12.1429H4.26316V1.42857H15.6316V9.28571Z M13.5 3.92857H12.0789V8.21429H13.5V3.92857Z M9.59211 3.92857H8.17105V8.21429H9.59211V3.92857Z"></path></svg></a><a href="https://www.youtube.com/@SpacetimeDB" target="_blank" rel="noreferrer" aria-label="youtube"><svg style="min-width:24px" fill="none" width="24" height="24" viewBox="0 0 20 20"><path d="M19.833 6S19.667 4.583 19 4c-.75-.833-1.583-.833-2-.833L10 3l-7 .167C2.583 3.25 1.75 3.25 1 4c-.583.583-.833 2-.833 2S0 7.583 0 9.25v1.5C0 12.333.167 14 .167 14s.167 1.417.833 2c.75.833 1.75.75 2.167.833C4.75 17 10 17 10 17l7-.25c.417-.083 1.25-.083 2-.833.583-.583.833-2 .833-2s.167-1.583.167-3.25v-1.5C20 7.583 19.833 6 19.833 6zM7.917 12.583V7l5.417 2.833-5.417 2.75z"></path></svg></a></div></div></div><div class="_8-Tv9a_bottom text-caption-1"><div class="_8-Tv9a_copyright">©<!-- -->2025<!-- --> Clockwork Laboratories, Inc.</div><ul class="_8-Tv9a_legal"><li><a data-discover="true" href="../terms-of-service.html">Terms of service</a></li><li><a data-discover="true" href="../privacy.html">Privacy policy</a></li><li><a data-discover="true" href="../cookies.html">Cookie policy</a></li></ul></div></footer></div><!--$--><!--/$--></div></div><script>((STORAGE_KEY, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({
        key
      }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(STORAGE_KEY);
    }
  })("positions", null)</script><link rel="modulepreload" href="../assets/entry.client-BGtfi_QV.js"/><link rel="modulepreload" href="../assets/jsx-runtime-B8m6gtXl.js"/><link rel="modulepreload" href="../assets/index-Gwz8MVWd.js"/><link rel="modulepreload" href="../assets/index-DQRDp3BA.js"/><link rel="modulepreload" href="../assets/components-DZQBhqap.js"/><link rel="modulepreload" href="../assets/index-BtvcE26l.js"/><link rel="modulepreload" href="../assets/Layout-BdLUilQM.js"/><link rel="modulepreload" href="../assets/preload-helper-D21cck6N.js"/><link rel="modulepreload" href="../assets/client-only-wNC5TimA.js"/><link rel="modulepreload" href="../assets/Container-DsvKPwib.js"/><link rel="modulepreload" href="../assets/clsx-BeLtu-UY.js"/><link rel="modulepreload" href="../assets/Icon-mnw7YCvf.js"/><link rel="modulepreload" href="../assets/socials-pIkfUSDw.js"/><link rel="modulepreload" href="../assets/index-ZcNkxdux.js"/><link rel="modulepreload" href="../assets/Button-BsQzyESB.js"/><link rel="modulepreload" href="../assets/root-B5VLWL4p.js"/><link rel="modulepreload" href="../assets/route-BN3e8Fjz.js"/><link rel="modulepreload" href="../assets/route.module-DQcdTtjJ.js"/><link rel="modulepreload" href="../assets/MDComponent-S1Ei_Xtk.js"/><link rel="modulepreload" href="../assets/route-D-kDeoHj.js"/><script>window.__remixContext = {"basename":"/","future":{"v3_fetcherPersist":true,"v3_relativeSplatPath":true,"v3_throwAbortReason":true,"v3_routeConfig":true,"v3_singleFetch":true,"v3_lazyRouteDiscovery":true,"unstable_optimizeDeps":true},"isSpaMode":false};window.__remixContext.stream = new ReadableStream({start(controller){window.__remixContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">;
import * as route0 from "/assets/root-B5VLWL4p.js";
import * as route1 from "/assets/route-BN3e8Fjz.js";
import * as route2 from "/assets/route-D-kDeoHj.js";
window.__remixManifest = {
  "entry": {
    "module": "/assets/entry.client-BGtfi_QV.js",
    "imports": [
      "/assets/jsx-runtime-B8m6gtXl.js",
      "../assets/index-Gwz8MVWd.js",
      "../assets/index-DQRDp3BA.js",
      "../assets/components-DZQBhqap.js"
    ],
    "css": []
  },
  "routes": {
    "root": {
      "id": "root",
      "path": "",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/root-B5VLWL4p.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/index-Gwz8MVWd.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-BtvcE26l.js",
        "../assets/Layout-BdLUilQM.js",
        "../assets/preload-helper-D21cck6N.js",
        "../assets/client-only-wNC5TimA.js",
        "../assets/Container-DsvKPwib.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/socials-pIkfUSDw.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/Button-BsQzyESB.js"
      ],
      "css": [
        "/assets/root-DgiNzMOf.css",
        "../assets/Layout-CTL7f1Hd.css",
        "../assets/Container-_6nMI5g_.css",
        "../assets/Button-C8_kLgtz.css"
      ]
    },
    "routes/_marketing": {
      "id": "routes/_marketing",
      "parentId": "root",
      "hasAction": false,
      "hasLoader": false,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-BN3e8Fjz.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/Layout-BdLUilQM.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/preload-helper-D21cck6N.js",
        "../assets/client-only-wNC5TimA.js",
        "../assets/Container-DsvKPwib.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/socials-pIkfUSDw.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/Button-BsQzyESB.js",
        "../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/Layout-CTL7f1Hd.css",
        "../assets/Container-_6nMI5g_.css",
        "../assets/Button-C8_kLgtz.css"
      ]
    },
    "routes/_marketing.blog.$id": {
      "id": "routes/_marketing.blog.$id",
      "parentId": "routes/_marketing",
      "path": "blog/:id",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-D-kDeoHj.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/route.module-DQcdTtjJ.js",
        "../assets/Container-DsvKPwib.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/MDComponent-S1Ei_Xtk.js",
        "../assets/socials-pIkfUSDw.js",
        "../assets/components-DZQBhqap.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/index-BtvcE26l.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/index-Gwz8MVWd.js"
      ],
      "css": [
        "/assets/route-Dz2xtRs4.css",
        "../assets/route-DkqE9ded.css",
        "../assets/Container-_6nMI5g_.css",
        "../assets/MDComponent-CdQtYgZs.css"
      ]
    },
    "routes/_marketing._index": {
      "id": "routes/_marketing._index",
      "parentId": "routes/_marketing",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-D1GAktaa.js",
      "imports": [
        "/assets/route-BjgmKHBp.js",
        "../assets/jsx-runtime-B8m6gtXl.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/ScrollAnimation-CzbpuesT.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/Section-YFQuzqA2.js",
        "../assets/Button-BsQzyESB.js",
        "../assets/Icon-mnw7YCvf.js",
        "../assets/components-DZQBhqap.js",
        "../assets/index-Gwz8MVWd.js",
        "../assets/index-DQRDp3BA.js",
        "../assets/Modal-Drq6A6PB.js",
        "../assets/preload-helper-D21cck6N.js",
        "../assets/IllustrationSection-CYB1aQb8.js",
        "../assets/Hero-CQn9OGBR.js"
      ],
      "css": [
        "/assets/route-BD-0frUD.css",
        "../assets/ScrollAnimation-HNI5Nioi.css",
        "../assets/Section-BU2yo9B_.css",
        "../assets/Button-C8_kLgtz.css",
        "../assets/Modal-4Y8efbdF.css",
        "../assets/IllustrationSection-Ce9CQF80.css",
        "../assets/Hero-BQ6ieBxK.css"
      ]
    },
    "routes/_marketing.blog._index": {
      "id": "routes/_marketing.blog._index",
      "parentId": "routes/_marketing",
      "path": "blog",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/route-2gX32KoB.js",
      "imports": [
        "/assets/jsx-runtime-B8m6gtXl.js",
        "../assets/route.module-DQcdTtjJ.js",
        "../assets/Container-DsvKPwib.js",
        "../assets/ScrollAnimation-CzbpuesT.js",
        "../assets/Hero-CQn9OGBR.js",
        "../assets/components-DZQBhqap.js",
        "../assets/clsx-BeLtu-UY.js",
        "../assets/index-ZcNkxdux.js",
        "../assets/index-Gwz8MVWd.js",
        "../assets/index-DQRDp3BA.js"
      ],
      "css": [
        "/assets/route-DkqE9ded.css",
        "../assets/Container-_6nMI5g_.css",
        "../assets/ScrollAnimation-HNI5Nioi.css",
        "../assets/Hero-BQ6ieBxK.css"
      ]
    }
  },
  "url": "/assets/manifest-81d72d9d.js",
  "version": "81d72d9d"
};
window.__remixRouteModules = {"root":route0,"routes/_marketing":route1,"routes/_marketing.blog.$id":route2};

import("../assets/entry.client-BGtfi_QV.js");</script><script class="cookieconsent-optin-statistics" data-cookieconsent="statistics">
                        window.dataLayer = window.dataLayer || [];
                        function gtag(){ dataLayer.push(arguments); }
                        gtag('js', new Date());
                        gtag('config', 'G-PP0E4VHQKG');
                        </script><script src="../../uptime.betterstack.com/widgets/announcement.js" data-id="167677" defer="" type="text/javascript"></script></body>
<!-- Mirrored from spacetimedb.com/blog/databases-and-data-oriented-design by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 May 2025 02:58:50 GMT -->
</html><!--$--><script>window.__remixContext.streamController.enqueue("[{\"_1\":2,\"_29\":-5,\"_30\":-5},\"loaderData\",{\"_3\":4,\"_10\":11,\"_28\":-5},\"root\",{\"_5\":6,\"_7\":8,\"_9\":-7},\"stargazersCount\",15876,\"isAnnouncementVisible\",true,\"sessionUserInfo\",\"routes/_marketing.blog.$id\",{\"_12\":13,\"_26\":27},\"config\",{\"_14\":15,\"_16\":17,\"_18\":19,\"_20\":21,\"_22\":23,\"_24\":25},\"title\",\"Databases are the endgame for data-oriented design\",\"author\",\"Tyler Cloutier\",\"authorLink\",\"https://twitter.com/TylerFCloutier\",\"slug\",\"databases-and-data-oriented-design\",\"preview\",\"For the first SpacetimeDB blog post, I’d like to clear up some confusion that I’ve seen arise in discussions about SpacetimeDB and address some general misperceptions about databases.\\nMy sense is that many people understand databases to be…\",\"date\",\"December 6th, 2023\",\"content\",\"\u003cp\u003eFor the first SpacetimeDB blog post, I’d like to clear up some confusion that I’ve seen arise in discussions about SpacetimeDB and address some general misperceptions about databases.\u003c/p\u003e\\n\u003cp\u003eMy sense is that many people understand databases to be “a way to store and query data which is persisted to disk” and that the \u003ca href=\\\"https://en.wikipedia.org/wiki/Relational_model\\\"\u003erelational model\u003c/a\u003e of data, while necessary for querying data, is otherwise an inconvenience which requires us to transform our data into a form which can be used in our general purpose programming languages.\u003c/p\u003e\\n\u003cp\u003eBy the end of this blog post, I hope that you will agree that not only do databases go far beyond managing persistent storage, but that they offer a principled system for organizing program memory in general and offer a general purpose solution to the performance and data modeling problems that data-oriented design and \u003ca href=\\\"https://en.wikipedia.org/wiki/Entity_component_system\\\"\u003eECS\u003c/a\u003e were invented to solve. As the title suggests, I argue that databases are the logical conclusion you arrive at if you push data-oriented design as far as it will go.\u003c/p\u003e\\n\u003cp\u003eI have generally found that most computer science was done by 1970, and if you think you’ve come up with a new clever idea, probably check the 60s again. It turns out \u003ca href=\\\"https://en.wikipedia.org/wiki/Edgar_F._Codd\\\"\u003eTed Codd\u003c/a\u003e had it right in \u003ca href=\\\"https://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf\\\"\u003e1969\u003c/a\u003e and we’ve been disregarding his work at our own peril ever since.\u003c/p\u003e\\n\u003ch3 id=\\\"what-is-data-oriented-design\\\"\u003eWhat is data-oriented design\u003ca href=\\\"#what-is-data-oriented-design\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eIf we want to know how databases and data-oriented design are related, then we first need a basic understanding of data-oriented design.\u003c/p\u003e\\n\u003cp\u003eData-oriented design (DOD) is a programming paradigm that focuses on the efficient and flexible organization, processing, and storage of data. It was originally developed for use in games since games are extremely complex and interconnected systems with very high performance requirements and latency sensitivity. In short, the “normal” programming strategies (especially Object-oriented Design) weren’t cutting it.\u003c/p\u003e\\n\u003cp\u003eAt its heart is the honest recognition that the ultimate purpose of any program is to transform data from one form to another, and that we should seek to do this transformation in the most efficient way possible. For example, if you are writing a graphics program, you need to transform data from a scene representation to graphics buffers which are sent to the GPU. If you are writing a compiler you need to convert the program from text to a structured binary executable, and so forth.\u003c/p\u003e\\n\u003cp\u003eA major component of DOD is taking into account the physical realities of computer components to determine the most efficient mechanism for performing those transformations. For example, DOD emphasizes efficient data layout in memory, aiming to minimize cache misses and ensure data is stored contiguously. This approach improves performance by leveraging the cache hierarchy of modern CPUs more effectively.\u003c/p\u003e\\n\u003cp\u003eThis is of course just the tip of the iceberg for techniques in DOD. I recommend Richard Fabian’s \u003ca href=\\\"https://www.dataorienteddesign.com/dodmain/\\\"\u003efantastic book\u003c/a\u003e on the subject if you’d like to learn more.\u003c/p\u003e\\n\u003ch3 id=\\\"ecs-entity-component-system\\\"\u003eECS (Entity Component System)\u003ca href=\\\"#ecs-entity-component-system\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eECS is a programming pattern that is often associated with DOD which was developed to allow people to create more complex and higher performance games. The idea is to achieve two main goals:\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003eProvide a data model which allows for complex data interactions while allowing for future feature additions or refactorings.\u003c/li\u003e\\n\u003cli\u003eProvide an efficient way to arrange data in memory to take the most advantage of the CPU cache.\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003cp\u003eIn the ECS pattern, these goals are achieved by creating a unique identifier to represent “entities” (sometimes called “objects”, not to be confused with OOP objects) in a game. Those identifiers are then made meaningful by associating pieces of data, called “components”, with those identifiers. Several components can be composed together on an entity to create complex data representations. Systems are transforms (code) that operate on entities with a certain set of components. For example, we could imagine a basic ECS with the following components.\u003c/p\u003e\\n\u003cblockquote class=\\\"blockquote-md\\\"\u003e\\n    \u003cdiv class=\\\"top\\\"\u003e\\n        \u003csvg\\n            xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n            width=\\\"256\\\"\\n            height=\\\"256\\\"\\n            viewBox=\\\"0 0 256 256\\\"\\n        \u003e\\n            \u003cpath\\n                fill=\\\"white\\\"\\n                d=\\\"M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h108.69a15.92 15.92 0 0 0 11.31-4.69L219.31 168a15.92 15.92 0 0 0 4.69-11.31V48a16 16 0 0 0-16-16ZM96 88h64a8 8 0 0 1 0 16H96a8 8 0 0 1 0-16Zm32 80H96a8 8 0 0 1 0-16h32a8 8 0 0 1 0 16Zm-32-32a8 8 0 0 1 0-16h64a8 8 0 0 1 0 16Zm64 68.69V160h44.7Z\\\"\\n            /\u003e\\n        \u003c/svg\u003e\\n        \u003cp class=\\\"blockquote-p\\\"\u003eNote\u003c/p\u003e\\n    \u003c/div\u003e\\n    \u003cdiv\u003e\u003cp\u003eNOTE: I’m using Rust syntax for this example, but the concept is language agnostic.\u003c/p\u003e\u003c/div\u003e\\n\u003c/blockquote\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// This is the “entity” identifier\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003estruct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Entity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eu32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// This is a “component”\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003estruct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Position\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    z\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// This is a “component”\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// Yes I am aware that you would not normally have a separate type\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// for position and velocity.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003estruct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Velocity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    x\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    y\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    z\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e f32\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// This is another “component”\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003estruct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Player\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    username\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e String\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// This is another “component”\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003estruct\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Enemy\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    target\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Entity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eAnd we could imagine transforming this data with the following system:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// This is a “system”\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e update_position_system\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(entity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Entity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, position\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Position\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, velocity\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e Velocity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    position \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e velocity;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cblockquote\u003e\\n\u003cp\u003eNOTE: The function above operates on a single entity at a time, although the idea is that this function will be run for every single entity that has a \u003ccode\u003ePosition\u003c/code\u003e component and a \u003ccode\u003eVelocity\u003c/code\u003e component every frame. Also note that I’m omitting the plumbing to set up calling the system on each entity as this is typically provided by the particular ECS framework. Managing this is a major part of what ECS frameworks provide.\u003c/p\u003e\\n\u003cp\u003eThe API might be something like \u003ccode\u003eecs::register_system(update_position_system)\u003c/code\u003e, type system wrangling details notwithstanding.\u003c/p\u003e\\n\u003c/blockquote\u003e\\n\u003cp\u003eNote that because ECS was built for games, there is an implicit assumption that your program executes data transforms during “frames”. A frame being a fixed length duration of time in which every system is executed on every entity that it matches.\u003c/p\u003e\\n\u003cp\u003eThe power of the ECS data model is that the behavior of an entity is not determined by code written for a specific kind of entity, but rather by systems (aka transforms) which operate on entities that “match” the set of components which is relevant to them.\u003c/p\u003e\\n\u003cp\u003eIn this way, the behavior of an entity can be changed simply by adding or removing components which alters which transforms the entity is affected by. Behavior is changed through component composition, rather than inheritance.\u003c/p\u003e\\n\u003cp\u003eFor example, in our small ECS above, all entities with a position are moved regardless of whether or not they are players or enemies. The basic assumption of the \u003ccode\u003eupdate_position_system\u003c/code\u003e is that the position and velocity components are the only data required to move an entity in our world. In reality, you may have many systems which match different subsets of components. The act of a system “matching” a set of components, can be thought of as that system “querying” all the data in the program and running on all entities matching that query, just as we did with \u003ccode\u003eVelocity\u003c/code\u003e and \u003ccode\u003ePosition\u003c/code\u003e above. In fact, many ECS systems actually refer to this as “querying”, for example \u003ca href=\\\"https://github.com/SanderMertens/flecs\\\"\u003eFLECS\u003c/a\u003e or \u003ca href=\\\"https://bevyengine.org/\\\"\u003eBevy\u003c/a\u003e.\u003c/p\u003e\\n\u003cp\u003eNote that in many cases, systems only allow querying the data in a very specific way, namely, you can query for entities which have \u003cem\u003eall\u003c/em\u003e of the components in the query. FLECS is a notable exception, as it implements a more general query system inspired by databases which I will discuss a bit further down.\u003c/p\u003e\\n\u003cblockquote class=\\\"blockquote-md\\\"\u003e\\n    \u003cdiv class=\\\"top\\\"\u003e\\n        \u003csvg\\n            xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n            width=\\\"256\\\"\\n            height=\\\"256\\\"\\n            viewBox=\\\"0 0 256 256\\\"\\n        \u003e\\n            \u003cpath\\n                fill=\\\"white\\\"\\n                d=\\\"M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h108.69a15.92 15.92 0 0 0 11.31-4.69L219.31 168a15.92 15.92 0 0 0 4.69-11.31V48a16 16 0 0 0-16-16ZM96 88h64a8 8 0 0 1 0 16H96a8 8 0 0 1 0-16Zm32 80H96a8 8 0 0 1 0-16h32a8 8 0 0 1 0 16Zm-32-32a8 8 0 0 1 0-16h64a8 8 0 0 1 0 16Zm64 68.69V160h44.7Z\\\"\\n            /\u003e\\n        \u003c/svg\u003e\\n        \u003cp class=\\\"blockquote-p\\\"\u003eNote\u003c/p\u003e\\n    \u003c/div\u003e\\n    \u003cdiv\u003e\u003cp\u003eSPOILER ALERT: This is an inner join on the entity id.\u003c/p\u003e\u003c/div\u003e\\n\u003c/blockquote\u003e\\n\u003cp\u003eNote that ECS can be made quite performant on modern CPUs by storing components contiguously in memory and clustered together with other components which are also queried together so that, as one entity is processed by a system, the components for the next entities are being prefetched or are already loaded into cache.\u003c/p\u003e\\n\u003ch3 id=\\\"ecs-is-a-weak-sauce-relational-model\\\"\u003eECS is a weak-sauce relational model\u003ca href=\\\"#ecs-is-a-weak-sauce-relational-model\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eMaybe the title of this section is a little spicy, but once you see it, you can’t unsee it. Once you begin using ECS you almost immediately find that you can’t represent certain constraints or relationships in your data or that modeling certain kinds of data feels awkward or shoehorned into the data model.\u003c/p\u003e\\n\u003cp\u003eFor example, how would you model chat messages in your game? I suppose you’d have to represent that as an entity in your game. How would you represent a constraint that would prevent a health component from being added to your chat message erroneously? In ECS it’s straightforward to create a system which operates on chat messages individually, but how would you query your chat messages so that you can display them in order? How would you model an entity which has many instances of the same component? How would I model a friends list where all players have many friends who are also players?\u003c/p\u003e\\n\u003cp\u003eIt’s clear that the ECS data model is quite powerful for modeling certain types of data, like entities in a game world, but is not quite general enough to model all types of application data. What at first appears to be awkwardness or annoyances is actually a fundamental limitation of the ECS data model.\u003c/p\u003e\\n\u003cp\u003eSo I raise the question: is there a data model, similar to the ECS data model, that has proven itself capable and general enough of representing all manner of application data for over 50 years of software development?\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"/images/ted-codd-excited.jpg\\\" alt=\\\"Ted Codd looks into your soul\\\"\u003e\u003c/p\u003e\\n\u003cp\u003eYou bet there is!\u003c/p\u003e\\n\u003cp\u003eImplementation details aside – although we’ll get to that too – at its core the ECS data model is baby’s first relational model. More precisely, the ECS data model is a strict subset of the relational model; relations can represent everything in the ECS model plus more.\u003c/p\u003e\\n\u003cp\u003eWe can demonstrate this by implementing the ECS data model within the relational model. We can translate ECS to the relational model by representing entities by an \u003ccode\u003eEntity\u003c/code\u003e table with a single column:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eCREATE\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e TABLE\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Entity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eSERIAL\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e PRIMARY KEY\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eNext we can represent each component as a table with a foreign key constraint on the \u003ccode\u003eentity_id\u003c/code\u003e.\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eCREATE\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e TABLE\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Position\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    entity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eINT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e PRIMARY KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eFLOAT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eFLOAT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    z \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eFLOAT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    FOREIGN KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (entity_id) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eREFERENCES\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Entity(id)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eCREATE\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e TABLE\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Velocity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    entity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eINT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e PRIMARY KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    x \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eFLOAT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    y \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eFLOAT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    z \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eFLOAT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    FOREIGN KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (entity_id) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eREFERENCES\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Entity(id)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eCREATE\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e TABLE\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Player\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    entity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eINT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e PRIMARY KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    username \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eTEXT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    FOREIGN KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (entity_id) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eREFERENCES\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Entity(id)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eCREATE\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e TABLE\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e Enemy\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    entity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eINT\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e PRIMARY KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    target_entity_id \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eINT\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    FOREIGN KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (entity_id) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eREFERENCES\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Entity(id),\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    FOREIGN KEY\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (target_entity_id) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003eREFERENCES\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e Entity(id)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cblockquote class=\\\"blockquote-md\\\"\u003e\\n    \u003cdiv class=\\\"top\\\"\u003e\\n        \u003csvg\\n            xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n            width=\\\"256\\\"\\n            height=\\\"256\\\"\\n            viewBox=\\\"0 0 256 256\\\"\\n        \u003e\\n            \u003cpath\\n                fill=\\\"white\\\"\\n                d=\\\"M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h108.69a15.92 15.92 0 0 0 11.31-4.69L219.31 168a15.92 15.92 0 0 0 4.69-11.31V48a16 16 0 0 0-16-16ZM96 88h64a8 8 0 0 1 0 16H96a8 8 0 0 1 0-16Zm32 80H96a8 8 0 0 1 0-16h32a8 8 0 0 1 0 16Zm-32-32a8 8 0 0 1 0-16h64a8 8 0 0 1 0 16Zm64 68.69V160h44.7Z\\\"\\n            /\u003e\\n        \u003c/svg\u003e\\n        \u003cp class=\\\"blockquote-p\\\"\u003eNote\u003c/p\u003e\\n    \u003c/div\u003e\\n    \u003cdiv\u003e\u003cp\u003eNOTE: I am using PostgreSQL to represent these relations because many people are familiar, but any relational representation will do, and \u003ca href=\\\"https://www.scattered-thoughts.net/writing/against-sql/\\\"\u003earguably\u003c/a\u003e SQL is quite a poor one.\u003c/p\u003e\u003c/div\u003e\\n\u003c/blockquote\u003e\\n\u003cp\u003eOnce we break it down this way, it’s pretty easy to see that the ECS model is just the relational model with the following restrictions:\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003eThere is an entity table with a single unique \u003ccode\u003eid\u003c/code\u003e column.\u003c/li\u003e\\n\u003cli\u003eAll other tables must have a unique, foreign key reference to the entity \u003ccode\u003eid\u003c/code\u003e.\u003c/li\u003e\\n\u003cli\u003eSystems (aka queries) must execute on every entity they match, every “frame”.\u003c/li\u003e\\n\u003cli\u003eSystems may only execute and operate on \u003ccode\u003eINNER JOIN\u003c/code\u003e queries on the entity \u003ccode\u003eid\u003c/code\u003e.\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003cp\u003eThat’s really all there is to it. This is now identical to the ECS data model. Restriction 3, in particular, is interesting because it implicitly assumes that your program’s logic must have a scheduler which runs all queries multiple times per second at fixed intervals. That’s a common need for \u003cem\u003esome\u003c/em\u003e games, but certainly not all games and definitely not most other types of applications.\u003c/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003eAs an aside, I would like to point out that notable ECS implementations, such as FLECS, are working towards eliminating, or have already eliminated restriction number 4 by adding in more expressive query engines into their frameworks. In fact, FLECS is especially notable for this because it uses a variant of Datalog which in its recursive form is \u003ca href=\\\"https://deepblue.lib.umich.edu/bitstream/handle/2027.42/31164/0000063.pdf?sequence=1\u0026isAllowed=y\\\"\u003estrictly more expressive\u003c/a\u003e than the relational model which is based on first-order logic.\u003c/p\u003e\\n\u003cp\u003ePlease note, I’m not an expert on first order logic or Datalog and I’d love to see some discussion about this. \u003ca href=\\\"https://ajmmertens.medium.com/why-it-is-time-to-start-thinking-of-games-as-databases-e7971da33ac3\\\"\u003eThis blog post\u003c/a\u003e from Sander Mertens, the creator of FLECS, is particularly enlightening, although I wholeheartedly reject the statement that “database[s]... are, put plainly, too slow.”\u003c/p\u003e\\n\u003c/blockquote\u003e\\n\u003cp\u003eWhy not go further though? Why not free ourselves completely from the shackles of these restrictions? Why not embrace the full power of the relational model?\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"/images/emperor-ted-codd.png\\\" alt=\\\"Emperor Ted Codd\\\"\u003e\u003c/p\u003e\\n\u003cp\u003eThe keen amongst you are probably crying out that it must be the details of how ECS is implemented and optimized for games that make it more performant than a general purpose database in the context of games. After all, databases are slow, and ECS is fast! Databases have all kinds of other requirements like transactions and ACID constraints! How could a database ever process and update millions of entities per second?\u003c/p\u003e\\n\u003cp\u003eThat is where you’d be mistaken… mostly.\u003c/p\u003e\\n\u003ch3 id=\\\"databases-arent-slow\\\"\u003eDatabases aren’t slow\u003ca href=\\\"#databases-arent-slow\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eDatabases are perhaps the most performant, well optimized, highly multithreaded programs ever written. There has been 50+ years of research applied to the problem of executing queries on row formatted data. The problem has been studied from almost every conceivable angle: high throughput, low latency, high write volume, high read volume, large rows, small rows, locking, lock-free, single version concurrency control, multi version concurrency control, strict transaction isolation, loose transaction isolation, you name it.\u003c/p\u003e\\n\u003cp\u003eI think that people perceive databases to be slow, not because they are slow, but because they often interact with them in the context of persisting data to disk, from across a network, by passing strings back and forth which must be parsed, compiled and executed. If you’ve ever optimized a program, you know that I just listed pretty much the slowest operations you can do on a computer.\u003c/p\u003e\\n\u003cp\u003eIt turns out that an enormous amount of research has focused on in-memory databases, and that many of the optimizations that are built into ECS are already employed by certain databases in a configurable way. For example, consider “\u003ca href=\\\"https://docs.unity3d.com/Packages/com.unity.entities@1.0/manual/concepts-archetypes.html#:~:text=An%20archetype%20is%20a%20unique,and%20B%20share%20an%20archetype.\\\"\u003earchetype\u003c/a\u003e”s in ECS. Archetypes are an optimization whereby entities which share the same exact set of components are stored in the same physical location. This allows an ECS framework to satisfy a system’s predicate without having to filter rows that are missing certain components. It turns out that certain database systems already implement this optimization as a “pre-join” operation at the storage layer. That is, they physically store the tables pre-joined if these kinds of operations are common or this is manually configured by the user. Another similar technique is creating a materialized view, although that requires making a copy of the data.\u003c/p\u003e\\n\u003cp\u003eAnother common optimization in ECS is to divide the work of a given system onto multiple cores by partitioning a group of entities onto each core and processing them separately. This is commonly referred to as a \u003ca href=\\\"https://www.postgresql.org/docs/current/parallel-query.html\\\"\u003eparallel query\u003c/a\u003e and is particularly suited to updating many rows in a single query, just as is the case in ECS.\u003c/p\u003e\\n\u003cp\u003eThere are database systems that easily achieve millions of transactions per second for in-memory data. For example, consider \u003ca href=\\\"https://faculty.cc.gatech.edu/~jarulraj/courses/4420-s19/papers/06-mvcc2/lim-sigmod2017.pdf\\\"\u003eCicada\u003c/a\u003e:\u003c/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003eIt handles up to 2.07 M TPC-C transactions per second and 56.5 M YCSB transactions per second, and scans up to 356 M records per second on a single 28-core machine.\u003c/p\u003e\\n\u003cp\u003eFor the record, the Yahoo! Cloud Serving Benchmark (YCSB) is a framework for evaluating the performance of various types of databases, particularly NoSQL systems. The TPC-C benchmark, developed by the Transaction Processing Performance Council (TPC), simulates a complete computing environment where a population of users executes transactions against a database with a combination of common types of queries.\u003c/p\u003e\\n\u003c/blockquote\u003e\\n\u003cp\u003eOr consider \u003ca href=\\\"https://db.in.tum.de/~muehlbau/papers/mvcc.pdf\\\"\u003eHyPer\u003c/a\u003e, which can achieve nearly a million \u003ca href=\\\"https://en.wikipedia.org/wiki/Serializability\\\"\u003eserializable\u003c/a\u003e transactions per second. These are truly incredible numbers, particularly when you consider that this is an apples to oranges comparison - databases are more flexible and provide stronger ACID guarantees than an ECS.\u003c/p\u003e\\n\u003cp\u003eDatabases are much faster than you think.\u003c/p\u003e\\n\u003ch3 id=\\\"where-do-we-go-from-here\\\"\u003eWhere do we go from here?\u003ca href=\\\"#where-do-we-go-from-here\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eIt is of course the case that the additional constraints of ECS allow you to make different optimizations that will allow ECS systems to outperform database systems in certain scenarios. Notably, databases which are designed to provide transactional semantics will always have overhead related to providing those guarantees.\u003c/p\u003e\\n\u003cp\u003eMy central thesis is that this is beside the point. My real point is that viewing our programs as databases gives us a structured framework within which to evaluate them. It provides a general and structured way to represent and transform our app data, a framework in which we can pick and choose which features and performance tradeoffs make the most sense for our particular application, and a framework by which we can evaluate the performance of our systems against standardized metrics.\u003c/p\u003e\\n\u003cp\u003eThe ECS community seems to be \u003ca href=\\\"https://ajmmertens.medium.com/why-it-is-time-to-start-thinking-of-games-as-databases-e7971da33ac3\\\"\u003emoving in this direction\u003c/a\u003e already and I couldn’t be more excited to see where it goes.\u003c/p\u003e\\n\u003cp\u003eHere at Clockwork Labs, we’re putting our money where our mouth is. Our MMORPG \u003ca href=\\\"https://bitcraftonline.com\\\"\u003eBitCraft\u003c/a\u003e is implemented 100% as a WebAssembly stored procedure inside of our real-time, low latency, in-memory database, \u003ca href=\\\"https://github.com/clockworklabs/spacetimedb\\\"\u003eSpacetimeDB\u003c/a\u003e.\u003c/p\u003e\\n\u003cp\u003eThis is what a typical SpacetimeDB stored procedure function would look like:\u003c/p\u003e\\n\\n\u003cpre class=\\\"shiki spacetime-dark\\\" style=\\\"background-color:var(--color-bg);color:#F8F8F2\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#6272A4\\\"\u003e/// NOTE: If you’re looking for the `join!` macro in our current docs, we haven’t added this functionality as of `v0.7` so you’d have to join manually in this case.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e#[spacetimedb(reducer)]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003efn\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e update_position_system\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e() {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e    for\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e (position, velocity) \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003ein\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003e join!\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003ePosition\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e, \u003c/span\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003eVelocity\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e        position \u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e+=\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e velocity;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#8BE9FD;font-style:italic\\\"\u003e        Position\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e::\u003c/span\u003e\u003cspan style=\\\"color:#50FA7B\\\"\u003eupdate_by_entity_id\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e(position\u003c/span\u003e\u003cspan style=\\\"color:#FF79C6\\\"\u003e.\u003c/span\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003eentity_id, position);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color:#F8F8F2\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e \u003cbutton data-copy-code\u003e\\n    \u003csvg\\n        class=\\\"md-copy-icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        width=\\\"24\\\"\\n        height=\\\"24\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n    \u003e\\n        \u003cg fill=\\\"white\\\"\u003e\\n            \u003cpath d=\\\"M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z\\\" /\u003e\\n            \u003cpath d=\\\"M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z\\\" /\u003e\\n        \u003c/g\u003e\\n    \u003c/svg\u003e\\n\u003c/button\u003e\u003c/pre\u003e\u003cp\u003eAs you can see, this is just regular ECS implemented in the relational model and it’s how we run the entire game. I hope you agree that this idea doesn’t seem quite as crazy as it might have at the beginning of this post.\u003c/p\u003e\\n\u003cp\u003eFor so long, we’ve all taken an unprincipled approach to the pile of pointers and loose data in the runtime of our programs. The philosophy of data-oriented design is centered around the idea that transforming data is the ultimate purpose of any program. I think it’s about time we took that idea seriously and learned from the people that have taken that idea seriously since 1969. We’re in the endgame now.\u003c/p\u003e\\n\u003cp\u003e\u003cimg src=\\\"/images/ted-codd-endgame.jpg\\\" alt=\\\"Ted Codd Endgame\\\"\u003e\u003c/p\u003e\\n\u003ch3 id=\\\"credits\\\"\u003eCredits\u003ca href=\\\"#credits\\\" class=\\\"permalink\\\"\u003e\u003cspan class=\\\"visually-hidden\\\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\u003cul\u003e\\n\u003cli\u003eThank you to Sander Mertens for the interesting discussions on this topic.\u003c/li\u003e\\n\u003cli\u003eThank you to Phoebe Goldman for inspiration and review of this post.\u003c/li\u003e\\n\u003cli\u003eThanks to Richard Fabian for writing such an inspirational book.\u003c/li\u003e\\n\u003c/ul\u003e\\n\",\"routes/_marketing\",\"actionData\",\"errors\"]\n");</script><!--$--><script>window.__remixContext.streamController.close();</script><!--/$--><!--/$-->